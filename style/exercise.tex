\newcounter{EoplExercise}[chapter]
\renewcommand\theEoplExercise{\thechapter.\arabic{EoplExercise}}
\newcommand\EoplExerciseName{练习}
\newcommand\EoplExerciseIndexPrefix{ex.}
\newenvironment{EoplExercise}{%
  \setlength{\parskip}{1em}
  \setlength{\parindent}{0pt}
  \refstepcounter{EoplExercise}
  {\small\emph{\EoplExerciseName}\nobreak\hspace{1ex}}\theEoplExercise\nobreak\hspace{1ex}\begin{small}}{
  \end{small}}
\newcommand{\EoplExerciseRef}[1]{\EoplExerciseName~{#1}}
% for exercise reference in index
\usepackage{cleveref}
\crefname{EoplExercise}{ex.}{ex.}
\Crefname{EoplExercise}{Ex.}{Ex.}

\crefrangelabelformat{EoplExercise}%
{#3#1#4--#5\crefstripprefix{#1}{#2}#6}

\crefmultiformat{EoplExercise}%
{\edef\crefstripprefixinfo{#1}ex. #2#1#3}%
{--#2\crefstripprefix{\crefstripprefixinfo}{#1}#3}%
{, #2\crefstripprefix{\crefstripprefixinfo}{#1}#3}%
{ 和 #2\crefstripprefix{\crefstripprefixinfo}{#1}#3}

\newcommand{\crefpairconjunction}{, }
% parameter of this macro is one or a list of labels
\newcommand{\EoplExerRefRange}[1]{\cref{#1}}
