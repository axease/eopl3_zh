<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;表达式</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="footnote.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {
  document.write('<link rel="stylesheet" href="katex/katex.min.css" />');
})();(function() {document.write('<scr' + 'ipt type="text/javascript" src="katex/katex.min.js"></scr' + 'ipt>');})();(function(f) {
  // A "simple" onLoad function
  if (window.document.readyState == "complete") {
    f();
  } else if (window.document.addEventListener) {
    window.document.addEventListener("DOMContentLoaded", f, false);
  } else if (window.attachEvent) {
    window.attachEvent("onreadystatechange", function() {
      if (window.document.readyState == "complete") {
        f();
      }
    });
  } else {
    var oldLoad = window.onload;
    if (typeof(oldLoad) == "function") {
      window.onload = function() {
        try {
          oldLoad();
        } finally {
          f();
        }
      };
    } else {
      window.onload = f;
    }
  }
})(function() {
  // This is an ugly way to change the doctype, in case the scribble document
  // did not use (with-html5).
  if (!(document.doctype && document.doctype.publicId == '')) {
    if (console && console.log) {
      console.log("Re-wrote the document to use the HTML5 doctype.\n"
                  + "  Consider using the following declaration:\n"
                  + "      @title[#:style (with-html5 manual-doc-style)]{…}");
    }
    var wholeDoc = '<!doctype HTML>\n' + document.documentElement.outerHTML;
    document.open();
    document.clear();
    document.write(wholeDoc);
  }
  var inlineElements = document.getElementsByClassName("texMathInline");
  for (var i = 0; i < inlineElements.length; i++) {
    var e = inlineElements[i];
    katex.render(e.textContent, e, { displayMode:false, throwOnError:false });
  }
  var displayElements = document.getElementsByClassName("texMathDisplay");
  for (var i = 0; i < displayElements.length; i++) {
    var e = displayElements[i];
    katex.render(e.textContent, e, { displayMode:true, throwOnError:false });
  }
});
</script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="fw-trans.html" class="tocviewlink" data-pltdoc="x">&#35793;&#32773;&#30340;&#35805;</a></td></tr><tr><td align="right"></td><td><a href="glo.html" class="tocviewlink" data-pltdoc="x">&#35793;&#21517;&#34920;</a></td></tr><tr><td align="right"></td><td><a href="fw.html" class="tocviewlink" data-pltdoc="x">&#24207;</a></td></tr><tr><td align="right"></td><td><a href="pf.html" class="tocviewlink" data-pltdoc="x">&#21069;&#35328;</a></td></tr><tr><td align="right"></td><td><a href="awk.html" class="tocviewlink" data-pltdoc="x">&#33268;&#35874;</a></td></tr><tr><td align="right">1&nbsp;</td><td><a href="isd.html" class="tocviewlink" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="da.html" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#34920;&#36798;&#24335;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="state.html" class="tocviewlink" data-pltdoc="x">&#29366;&#24577;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="cpi.html" class="tocviewlink" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="cps.html" class="tocviewlink" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="types.html" class="tocviewlink" data-pltdoc="x">&#31867;&#22411;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="modules.html" class="tocviewlink" data-pltdoc="x">&#27169;&#22359;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="oac.html" class="tocviewlink" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="further-reading.html" class="tocviewlink" data-pltdoc="x">&#25193;&#23637;&#38405;&#35835;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="sllgen-parsing-system.html" class="tocviewlink" data-pltdoc="x">SLLGEN&#35299;&#26512;&#31995;&#32479;</a></td></tr><tr><td align="right"></td><td><a href="bib.html" class="tocviewlink" data-pltdoc="x">&#21442;&#32771;&#20070;&#30446;</a></td></tr><tr><td align="right"></td><td><a href="indices.html" class="tocviewlink" data-pltdoc="x">&#32034;&#24341;</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#34920;&#36798;&#24335;</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._s3..1%29" class="tocviewlink" data-pltdoc="x">&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._s3..2%29" class="tocviewlink" data-pltdoc="x">LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._s3..3%29" class="tocviewlink" data-pltdoc="x">PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._s3..4%29" class="tocviewlink" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td align="right">3.5&nbsp;</td><td><a href="#%28part._s3..5%29" class="tocviewlink" data-pltdoc="x">&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;</a></td></tr><tr><td align="right">3.6&nbsp;</td><td><a href="#%28part._s3..6%29" class="tocviewlink" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a></td></tr><tr><td align="right">3.7&nbsp;</td><td><a href="#%28part._s3..7%29" class="tocviewlink" data-pltdoc="x">&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._s3..1%29" class="tocsubseclink" data-pltdoc="x">&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._s3..2%29" class="tocsubseclink" data-pltdoc="x">LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._s3..2..1%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#35821;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#%28part._s3..2..2%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#20540;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#%28part._s3..2..3%29" class="tocsubseclink" data-pltdoc="x">&#29615;&#22659;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.4<tt>&nbsp;</tt></span><a href="#%28part._s3..2..4%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.5<tt>&nbsp;</tt></span><a href="#%28part._s3..2..5%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#31243;&#24207;&#30340;&#34892;&#20026;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.6<tt>&nbsp;</tt></span><a href="#%28part._s3..2..6%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#26465;&#20214;</a></td></tr><tr><td><span class="tocsublinknumber">3.2.7<tt>&nbsp;</tt></span><a href="#%28part._s3..2..7%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041; <span class="stt">let</span></a></td></tr><tr><td><span class="tocsublinknumber">3.2.8<tt>&nbsp;</tt></span><a href="#%28part._s3..2..8%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616; LET &#35268;&#33539;</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#%28part._s3..3%29" class="tocsubseclink" data-pltdoc="x">PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.3.1<tt>&nbsp;</tt></span><a href="#%28part._s3..3..1%29" class="tocsubseclink" data-pltdoc="x">&#19968;&#20010;&#20363;&#23376;</a></td></tr><tr><td><span class="tocsublinknumber">3.3.2<tt>&nbsp;</tt></span><a href="#%28part._s3..3..2%29" class="tocsubseclink" data-pltdoc="x">&#34920;&#31034;&#36807;&#31243;</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#%28part._s3..4%29" class="tocsubseclink" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a></td></tr><tr><td><span class="tocsublinknumber">3.5<tt>&nbsp;</tt></span><a href="#%28part._s3..5%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;</a></td></tr><tr><td><span class="tocsublinknumber">3.6<tt>&nbsp;</tt></span><a href="#%28part._s3..6%29" class="tocsubseclink" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a></td></tr><tr><td><span class="tocsublinknumber">3.7<tt>&nbsp;</tt></span><a href="#%28part._s3..7%29" class="tocsubseclink" data-pltdoc="x">&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</a></td></tr><tr><td><span class="tocsublinknumber">3.7.1<tt>&nbsp;</tt></span><a href="#%28part._s3..7..1%29" class="tocsubseclink" data-pltdoc="x">&#32763;&#35793;&#22120;</a></td></tr><tr><td><span class="tocsublinknumber">3.7.2<tt>&nbsp;</tt></span><a href="#%28part._s3..7..2%29" class="tocsubseclink" data-pltdoc="x">&#26080;&#21517;&#35299;&#37322;&#22120;</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="da.html" title="backward to &quot;2 数据抽象&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;编程语言要素&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="state.html" title="forward to &quot;4 状态&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._expr)"></a>&#34920;&#36798;&#24335;</h3><p>&#26412;&#31456;&#30740;&#31350;&#21464;&#37327;&#32465;&#23450;&#21450;&#20854;&#20316;&#29992;&#22495;&#12290;&#25105;&#20204;&#29992;&#19968;&#31995;&#21015;&#23567;&#22411;&#35821;&#35328;&#35299;&#37322;&#36825;&#20123;&#27010;&#24565;&#12290;&#25105;&#20204;&#20026;&#36825;&#20123;&#35821;&#35328;&#20889;&#20986;
&#35268;&#33539;&#65292;&#36981;&#29031;<a href="isd.html" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#30340;&#35299;&#37322;&#22120;&#31192;&#26041;&#23454;&#29616;&#20854;&#35299;&#37322;&#22120;&#12290;&#25105;&#20204;&#30340;&#35268;&#33539;&#21644;&#35299;&#37322;&#22120;&#21462;&#19968;
&#21517;&#20026;<span class="emph">&#29615;&#22659;</span> (<span class="emph">environment</span>) &#30340;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#20197;&#35760;&#24405;&#24453;&#27714;&#20540;&#30340;&#34920;&#36798;&#24335;&#20013;&#21508;&#20010;&#21464;&#37327;&#30340;&#21547;
&#20041;&#12290;</p><h4>3.1<tt>&nbsp;</tt><a name="(part._s3..1)"></a>&#35268;&#33539;&#21644;&#23454;&#29616;&#31574;&#30053;</h4><p><div class="SIntrapara"><a name="(idx._(gentag._340))"></a>
&#25105;&#20204;&#30340;&#35268;&#33539;&#21253;&#21547;&#33509;&#24178;&#26029;&#35328;&#65292;&#24418;&#22914;&#65306;
</div><div class="SIntrapara"><blockquote class="SubFlow"><p><span class="texMathDisplay"><span class="stt">(value-of </span><span class="texMathInline">exp</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> = val</span></p><p>&#24847;&#20026;&#22312;&#29615;&#22659; <span class="texMathInline">\rho</span> &#20013;&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;&#20540;&#24212;&#20026; <span class="texMathInline">val</span>&#12290;&#25105;&#20204;&#20687;<a href="isd.html" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#37027;&#26679;&#65292;
&#20889;&#20986;&#25512;&#29702;&#35268;&#21017;&#21644;&#26041;&#31243;&#65292;&#20197;&#20415;&#25512;&#23548;&#20986;&#36825;&#26679;&#30340;&#26029;&#35328;&#12290;&#25105;&#20204;&#25163;&#20889;&#35268;&#21017;&#21644;&#26041;&#31243;&#65292;&#25214;&#20986;&#26576;&#20123;&#34920;&#36798;&#24335;&#30340;&#26399;
&#26395;&#20540;&#12290;</p></blockquote></div></p><p><a name="(idx._(gentag._341))"></a>&#32780;&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#20889;&#20986;&#31243;&#24207;&#65292;
<a name="(idx._(gentag._342))"></a>
<a name="(idx._(gentag._343))"></a>
<a name="(idx._(gentag._344))"></a>
&#23454;&#29616;&#35821;&#35328;&#12290;&#27010;&#20917;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;&#39318;&#20808;&#26159;&#31243;&#24207;&#65292;&#30001;&#25105;&#20204;&#35201;&#23454;&#29616;&#30340;&#35821;&#35328;&#20889;&#20986;&#12290;
&#36825;&#21483;&#20570;<span class="emph">&#28304;&#35821;&#35328;</span> (<span class="emph">source language</span>) &#25110;<span class="emph">&#34987;&#23450;&#35821;&#35328;</span> (<span class="emph">defined language</span>)&#12290;&#21069;
&#31471;&#25509;&#25910;&#31243;&#24207;&#25991;&#26412;&#65288;&#30001;&#28304;&#35821;&#35328;&#20889;&#25104;&#30340;&#31243;&#24207;&#65289;&#65292;&#23558;&#20854;&#36716;&#21270;&#20026;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#28982;&#21518;&#23558;&#35821;&#27861;&#26641;&#20256;&#32473;&#35299;&#37322;
&#22120;&#12290;&#35299;&#37322;&#22120;&#26159;&#19968;&#31243;&#24207;&#65292;&#23427;&#26597;&#30475;&#19968;&#27573;&#25968;&#25454;&#32467;&#26500;&#65292;&#26681;&#25454;&#32467;&#26500;&#25191;&#34892;&#19968;&#20123;&#21160;&#20316;&#12290;&#24403;&#28982;&#65292;&#35299;&#37322;&#22120;&#33258;&#36523;&#20063;
&#30001;&#26576;&#31181;&#35821;&#35328;&#20889;&#25104;&#12290;&#25105;&#20204;&#25226;&#37027;&#31181;&#35821;&#35328;&#21483;&#20570;<span class="emph">&#23454;&#29616;&#35821;&#35328;</span> (<span class="emph">implementation language</span>)
<a name="(idx._(gentag._345))"></a>
&#25110;<span class="emph">&#23450;&#20041;&#35821;&#35328;</span> (<span class="emph">defining language</span>)&#12290;&#25105;&#20204;&#30340;&#22823;&#22810;&#25968;&#23454;&#29616;&#37117;&#36981;&#29031;&#36825;&#31181;&#26041;&#24335;&#12290;</p><p><a name="(idx._(gentag._346))"></a>
&#21478;&#19968;&#31181;&#24120;&#35265;&#30340;&#32452;&#32455;&#26041;&#24335;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;&#20854;&#20013;&#65292;&#32534;&#35793;&#22120;&#26367;&#20195;&#20102;&#35299;&#37322;&#22120;&#65292;&#23558;
&#25277;&#35937;&#35821;&#27861;&#26641;&#32763;&#35793;&#20026;&#21478;&#19968;&#31181;&#35821;&#35328;&#65288;&#31216;&#20026;<span class="emph">&#30446;&#26631;&#35821;&#35328;</span> (<span class="emph">target language</span>)&#65289;&#20889;&#25104;&#30340;
&#31243;&#24207;&#65292;&#28982;&#21518;&#25191;&#34892;&#12290;&#30446;&#26631;&#35821;&#35328;&#21487;&#33021;&#20687;<span class="EoplFigureRef"></span> &#37027;&#26679;&#65292;&#30001;&#19968;&#20010;&#35299;&#37322;&#22120;&#25191;&#34892;&#65292;&#20063;
&#21487;&#33021;&#32763;&#35793;&#25104;&#26356;&#24213;&#23618;&#30340;&#35821;&#35328;&#25191;&#34892;&#12290;
<a name="(idx._(gentag._347))"></a></p><p>&#36890;&#24120;&#65292;&#30446;&#26631;&#35821;&#35328;&#26159;&#19968;&#31181;&#26426;&#22120;&#35821;&#35328;&#65292;&#30001;&#30828;&#20214;&#35299;&#37322;&#12290;&#20294;&#30446;&#26631;&#35821;&#35328;&#20063;&#21487;&#33021;&#26159;&#19968;&#31181;&#29305;&#23450;&#29992;&#36884;&#30340;&#35821;&#35328;&#65292;
&#27604;&#21407;&#26412;&#30340;&#35821;&#35328;&#31616;&#21333;&#65292;&#20026;&#23427;&#20889;&#19968;&#20010;&#35299;&#37322;&#22120;&#30456;&#23545;&#23481;&#26131;&#12290;&#36825;&#26679;&#65292;&#31243;&#24207;&#21487;&#20197;&#32534;&#35793;&#19968;&#27425;&#65292;&#28982;&#21518;&#22312;&#22810;&#31181;&#19981;
&#21516;&#30340;&#30828;&#20214;&#24179;&#21488;&#19978;&#25191;&#34892;&#12290;&#20986;&#20110;&#21382;&#21490;&#21407;&#22240;&#65292;&#24120;&#31216;&#36825;&#26679;&#30340;&#30446;&#26631;&#35821;&#35328;&#20026;<span class="emph">&#23383;&#33410;&#30721;</span> (<span class="emph">byte
code</span>)&#65292;&#31216;&#20854;&#35299;&#37322;&#22120;&#31216;&#20026;<span class="emph">&#34394;&#25311;&#26426;</span> (<span class="emph">virtual machine</span>)&#12290;
<a name="(idx._(gentag._348))"></a>
<a name="(idx._(gentag._349))"></a>
<a name="(idx._(gentag._350))"></a></p><p>&#32534;&#35793;&#22120;&#24120;&#24120;&#20998;&#20026;&#20004;&#37096;&#20998;&#65306;<span class="emph">&#20998;&#26512;&#22120;</span> (<span class="emph">analyzer</span>)&#65292;&#23581;&#35797;&#25512;&#26029;&#20851;&#20110;&#31243;&#24207;&#30340;&#26377;&#25928;&#20449;
&#24687;&#65307;<span class="emph">&#32763;&#35793;&#22120;</span> (<span class="emph">translator</span>)&#65292;&#25191;&#34892;&#32763;&#35793;&#65292;&#21487;&#33021;&#29992;&#21040;&#26469;&#33258;&#20998;&#26512;&#22120;&#30340;&#20449;&#24687;&#12290;&#36825;&#20123;
&#38454;&#27573;&#26082;&#33021;&#29992;&#25512;&#29702;&#35268;&#21017;&#25351;&#23450;&#65292;&#20063;&#33021;&#29992;&#19987;&#20889;&#35268;&#33539;&#30340;&#35821;&#35328;&#25351;&#23450;&#12290;&#28982;&#21518;&#26159;&#23454;&#29616;&#12290;
<a href="cps.html" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a>&#21644;<a href="types.html" data-pltdoc="x">&#31867;&#22411;</a>&#25506;&#35752;&#20102;&#19968;&#20123;&#31616;&#21333;&#30340;&#20998;&#26512;&#22120;&#21644;&#32763;&#35793;&#22120;&#12290;</p><p><a name="(idx._(gentag._351))"></a>
&#19981;&#35770;&#37319;&#29992;&#21738;&#31181;&#23454;&#29616;&#31574;&#30053;&#65292;&#25105;&#20204;&#37117;&#38656;&#35201;&#19968;&#20010;<span class="emph">&#21069;&#31471;</span> (<span class="emph">front end</span>)&#65292;&#23558;&#31243;&#24207;&#36716;&#25442;&#20026;
&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;&#22240;&#20026;&#31243;&#24207;&#21482;&#26159;&#23383;&#31526;&#20018;&#65292;&#25105;&#20204;&#30340;&#21069;&#31471;&#35201;&#23558;&#36825;&#20123;&#23383;&#31526;&#32452;&#25104;&#26377;&#24847;&#20041;&#30340;&#21333;&#20803;&#12290;&#20998;&#32452;&#36890;&#24120;
&#20998;&#20026;&#20004;&#20010;&#38454;&#27573;&#65306;<span class="emph">&#25195;&#25551;</span> (<span class="emph">scanning</span>) &#21644;<span class="emph">&#35299;&#26512;</span> (<span class="emph">parsing</span>)&#12290;
<a name="(idx._(gentag._352))"></a></p><p>&#25195;&#25551;&#23601;&#26159;&#23558;&#23383;&#31526;&#24207;&#21015;&#20998;&#20026;&#21333;&#35789;&#12289;&#25968;&#23383;&#12289;&#26631;&#28857;&#12289;&#27880;&#37322;&#31561;&#31561;&#12290;&#36825;&#20123;&#21333;&#20803;&#21483;&#20570;<span class="emph">&#35789;&#26465;</span> (<span class="emph">lexical
item</span>)&#12289;<span class="emph">&#35789;&#32032;</span> (<span class="emph">lexeme</span>)&#12289;&#25110;&#32773;&#26368;&#24120;&#35265;&#30340;<span class="emph">&#35789;&#29260;</span> (<span class="emph">token</span>)&#12290;&#25226;&#31243;&#24207;&#20998;
&#20026;&#35789;&#29260;&#30340;&#26041;&#24335;&#21483;&#20570;&#35821;&#35328;&#30340;<span class="emph">&#35789;&#27861;&#35268;&#33539;</span> (<span class="emph">lexical specification</span>)&#12290;&#25195;&#25551;&#22120;&#21462;&#19968;&#23383;&#31526;&#24207;
&#21015;&#65292;&#29983;&#25104;&#35789;&#29260;&#24207;&#21015;&#12290;
<a name="(idx._(gentag._353))"></a>
<a name="(idx._(gentag._354))"></a></p><p>&#35299;&#26512;&#23601;&#26159;&#23558;&#35789;&#29260;&#24207;&#21015;&#32452;&#25104;&#26377;&#23618;&#27425;&#30340;&#35821;&#27861;&#32467;&#26500;&#65292;&#22914;&#34920;&#36798;&#24335;&#12289;&#35821;&#21477;&#21644;&#22359;&#12290;&#36825;&#23601;&#20687;&#29992;&#20174;&#21477;&#32452;&#32455;&#65288;&#25110;
&#31216;&#22270;&#35299;<span class="NoteBox"><span class="NoteContent">&#35199;&#26041;&#26377;diagram sentence&#20043;&#35828;&#65292;&#20197;&#26641;&#29366;&#22270;&#34920;&#31034;&#21477;&#23376;&#32467;&#26500;&#65292;&#22914;&#25105;&#22269;&#20013;&#23398;&#29983;&#23398;&#20064;&#33521;
&#25991;&#20043;&#20027;&#12289;&#35859;&#12289;&#23486;&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span>&#65289;&#21477;&#23376;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;&#35821;&#35328;&#30340;<span class="emph">&#21477;&#27861;</span> (<span class="emph">syntactic</span>)
&#25110;<span class="emph">&#35821;&#27861;</span> (<span class="emph">grammatical</span>) &#32467;&#26500;&#12290;&#35299;&#26512;&#22120;&#21462;&#19968;&#35789;&#29260;&#24207;&#21015;&#65288;&#30001;&#25195;&#25551;&#22120;&#32473;&#20986;&#65289;&#65292;&#29983;&#25104;&#19968;&#26869;
&#25277;&#35937;&#35821;&#27861;&#26641;&#12290;<a name="(idx._(gentag._355))"></a></p><p><a name="(idx._(gentag._356))"></a>
&#35774;&#35745;&#21069;&#31471;&#30340;&#26631;&#20934;&#26041;&#24335;&#26159;&#20351;&#29992;<span class="emph">&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;</span> (<span class="emph">parser generator</span>)&#12290;&#35299;&#26512;&#22120;&#29983;
&#25104;&#22120;&#26159;&#19968;&#31243;&#24207;&#65292;&#21462;&#19968;&#35789;&#27861;&#35268;&#33539;&#21644;&#35821;&#27861;&#65292;&#29983;&#25104;&#19968;&#20010;&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
 </div><div class="SIntrapara"><blockquote class="EoplSubfigure"><blockquote class="SCentered"><p><img src="exe-via-interpreter.svg" alt="由解释器执行" width="300.6pt" height="108.0pt"/></p></blockquote><blockquote class="caption"><p>&#30001;&#35299;&#37322;&#22120;&#25191;&#34892;<a name="(elem._fig-3..1-a)"></a></p></blockquote></blockquote></div></p><blockquote class="EoplSubfigure"><blockquote class="SCentered"><p><img src="exe-via-compiler.svg" alt="由编译器执行" width="408.6pt" height="187.2pt"/></p></blockquote><blockquote class="caption"><p>&#30001;&#32534;&#35793;&#22120;&#25191;&#34892;<a name="(elem._fig-3..1-b)"></a></p></blockquote></blockquote><blockquote class="caption"><p>&#35821;&#35328;&#22788;&#29702;&#31995;&#32479;&#22359;&#29366;&#22270;<a name="(elem._fig-3..1)"></a></p></blockquote></blockquote><p>&#22823;&#22810;&#25968;&#20027;&#27969;&#35821;&#35328;&#37117;&#26377;&#35299;&#26512;&#22120;&#29983;&#25104;&#31995;&#32479;&#12290;&#22914;&#26524;&#27809;&#26377;&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#65292;&#25110;&#32773;&#27809;&#26377;&#21512;&#36866;&#30340;&#65292;&#21487;&#20197;&#25163;&#20889;
&#25195;&#25551;&#22120;&#21644;&#35299;&#26512;&#22120;&#12290;&#32534;&#35793;&#22120;&#25945;&#26448;&#25551;&#36848;&#20102;&#36825;&#19968;&#36807;&#31243;&#12290;&#26412;&#20070;&#20351;&#29992;&#30340;&#35299;&#26512;&#25216;&#26415;&#21450;&#30456;&#20851;&#35821;&#27861;&#35774;&#35745;&#20174;&#31616;&#65292;
&#19987;&#20026;&#28385;&#36275;&#25105;&#20204;&#30340;&#38656;&#27714;&#12290;
<a name="(idx._(gentag._357))"></a></p><p>&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#24573;&#30053;&#20855;&#20307;&#35821;&#27861;&#30340;&#32454;&#33410;&#65292;&#25226;&#34920;&#36798;&#24335;&#20889;&#25104;&#21015;&#34920;&#32467;&#26500;&#65292;
&#23601;&#20687;<a href="da.html#%28part._s2..5%29" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a>&#21644;<span class="EoplExerciseRef"></span>&#20013;&#65292;&#22788;&#29702; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#37027;&#26679;&#12290;
<a name="(idx._(gentag._358))"></a>
<a name="(idx._(gentag._359))"></a></p><h4>3.2<tt>&nbsp;</tt><a name="(part._s3..2)"></a>LET&#65306;&#19968;&#38376;&#31616;&#21333;&#35821;&#35328;</h4><p><a name="(idx._(gentag._360))"></a>
&#25105;&#20204;&#20808;&#26469;&#23450;&#20041;&#19968;&#31181;&#38750;&#24120;&#31616;&#21333;&#30340;&#35821;&#35328;&#65292;&#26681;&#25454;&#23427;&#26368;&#26377;&#36259;&#30340;&#29305;&#24615;&#65292;&#23558;&#20854;&#21629;&#21517;&#20026; LET&#12290;</p><h5>3.2.1<tt>&nbsp;</tt><a name="(part._s3..2..1)"></a>&#23450;&#20041;&#35821;&#27861;</h5><p><span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#25105;&#20204;&#36825;&#38376;&#31616;&#21333;&#35821;&#35328;&#30340;&#35821;&#27861;&#12290;&#22312;&#36825;&#31181;&#35821;&#35328;&#20013;&#65292;&#31243;&#24207;&#21482;&#33021;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#12290;&#34920;&#36798;&#24335;&#26159;
&#20010;&#25972;&#25968;&#24120;&#37327;&#12289;&#24046;&#20540;&#34920;&#36798;&#24335;&#12289;&#21028;&#38646;&#34920;&#36798;&#24335;&#12289;&#26465;&#20214;&#34920;&#36798;&#24335;&#12289;&#21464;&#37327;&#12289;&#25110; <span class="stt">let</span> &#34920;&#36798;&#24335;&#12290;</p><p>&#36825;&#37324;&#26159;&#26412;&#38376;&#35821;&#35328;&#20889;&#25104;&#30340;&#19968;&#20010;&#31616;&#21333;&#34920;&#36798;&#24335;&#65292;&#21450;&#20854;&#25277;&#35937;&#35821;&#27861;&#34920;&#31034;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktVal">"-(55, -(x,11))"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">55</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">x</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">11</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p>[!ht]
<br/>
<span class="Iidentity">\begin{align*}\mathit{Program} &amp;::= \mathit{Expression} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">a-program (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= \mathit{Number} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">const-exp (num)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">(- </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> , </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">diff-exp (exp1 exp2)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">(zero? </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">zero?-exp (exp1)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">if </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> then </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> else </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">if-exp (exp1 exp2 exp3)</span>} \\[5pt]
\mathit{Expression} &amp;::= \mathit{Identifier} \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">let </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> = </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">let-exp (var exp1 body)</span>}\end{align*}</span></p><blockquote class="caption"><p>LET&#35821;&#35328;&#30340;&#35821;&#27861;<a name="(elem._fig-3..2)"></a></p></blockquote></blockquote><h5>3.2.2<tt>&nbsp;</tt><a name="(part._s3..2..2)"></a>&#23450;&#20041;&#20540;</h5><p>&#20219;&#20309;&#32534;&#31243;&#35821;&#35328;&#30340;&#35268;&#33539;&#20043;&#20013;&#65292;&#26368;&#37325;&#35201;&#30340;&#19968;&#37096;&#20998;&#23601;&#26159;&#35821;&#35328;&#33021;&#22788;&#29702;&#30340;&#20540;&#30340;&#38598;&#21512;&#12290;&#27599;&#31181;&#35821;&#35328;&#33267;&#23569;&#26377;&#20004;
&#20010;&#36825;&#26679;&#30340;&#38598;&#21512;&#65306;<span class="emph">&#34920;&#36798;&#20540;</span> (<span class="emph">expressed values</span>) &#21644;<span class="emph">&#25351;&#20195;&#20540;</span> (<span class="emph">denoted values</span>)&#12290;
<a name="(idx._(gentag._361))"></a>
<a name="(idx._(gentag._362))"></a>
&#34920;&#36798;&#20540;&#26159;&#25351;&#34920;&#36798;&#24335;&#21487;&#33021;&#30340;&#21462;&#20540;&#65292;&#25351;&#20195;&#20540;&#26159;&#25351;&#21487;&#20197;&#32465;&#23450;&#21040;&#21464;&#37327;&#30340;&#20540;&#12290;</p><p>&#26412;&#31456;&#30340;&#35821;&#35328;&#20013;&#65292;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#24635;&#26159;&#30456;&#21516;&#12290;&#23427;&#20204;&#26159;&#65306;</p><blockquote class="SubFlow"><p><a name="(elem._pass-by-value)"></a><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} \\
\mathit{DenVal} &amp;= \mathit{Int} + \mathit{Bool}\end{align*}</span></p><p><a href="state.html" data-pltdoc="x">&#29366;&#24577;</a>&#23637;&#31034;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#19981;&#21516;&#30340;&#35821;&#35328;&#12290;</p></blockquote><p>&#35201;&#20351;&#29992;&#36825;&#20010;&#23450;&#20041;&#65292;&#25105;&#20204;&#35201;&#26377;&#34920;&#36798;&#20540;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;&#12290;&#25105;&#20204;&#26377;&#36825;&#20960;&#20010;&#25509;&#21475;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">num-val</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{Int} \to \mathit{ExpVal}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">bool-val</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{Bool} \to \mathit{ExpVal}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">expval-&gt;num</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{ExpVal} \to \mathit{Int}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">expval-&gt;bool</span></span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">: \mathit{ExpVal} \to \mathit{Bool}</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#20551;&#23450;&#65292;&#24403;&#20256;&#32473; <span class="stt">expval-&gt;num</span> &#30340;&#21442;&#25968;&#19981;&#26159;&#25972;&#25968;&#20540;&#65292;&#25110;&#20256;&#32473; <span class="stt">expval-&gt;bool</span> &#30340;
&#21442;&#25968;&#19981;&#26159;&#24067;&#23572;&#20540;&#26102;&#65292;&#20108;&#32773;&#34892;&#20026;&#26410;&#23450;&#20041;&#12290;</p><h5>3.2.3<tt>&nbsp;</tt><a name="(part._s3..2..3)"></a>&#29615;&#22659;</h5><p><a name="(idx._(gentag._363))"></a>
&#33509;&#35201;&#27714;&#21462;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;&#27599;&#20010;&#21464;&#37327;&#30340;&#20540;&#12290;&#25105;&#20204;&#38752;&#29615;&#22659;&#35760;&#24405;&#36825;&#20123;&#20540;&#65292;&#23601;&#20687;<a href="da.html#%28part._s2..2%29" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a>&#37027;&#26679;&#12290;</p><p>&#29615;&#22659;&#26159;&#19968;&#20989;&#25968;&#65292;&#23450;&#20041;&#22495;&#20026;&#21464;&#37327;&#30340;&#26377;&#38480;&#38598;&#21512;&#65292;&#20540;&#22495;&#20026;&#25351;&#20195;&#20540;&#12290;&#25105;&#20204;&#29992;&#19968;&#20123;&#32553;&#20889;&#34920;&#31034;&#29615;&#22659;&#12290;</p><ul><li><p><span class="texMathInline">\rho</span> &#34920;&#31034;&#20219;&#19968;&#29615;&#22659;&#12290;</p></li><li><p><span class="texMathInline">\textnormal{[]}</span> &#34920;&#31034;&#31354;&#29615;&#22659;&#12290;</p></li><li><p><span class="texMathInline">\text{[}var = val\text{]}\rho</span> &#34920;&#31034; <span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">val</span><span class="stt">
</span><span class="texMathInline">\rho</span><span class="stt">)</span>&#12290;</p></li><li><p><span class="texMathInline">\text{[}var_1 = val_1, var_2 = val2\text{]}\rho</span> &#26159; <span class="texMathInline">var_1 =
val_1(\text{[}var_2 = val_2\text{]}\rho)</span> &#30340;&#32553;&#20889;&#65292;&#20854;&#20313;&#21516;&#29702;&#12290;</p></li><li><p><span class="texMathInline">\text{[}var_1 = val_1, var_2 = val2,\dots\text{]}</span> &#34920;&#31034;&#30340;&#29615;&#22659;&#20013;&#65292;
<span class="texMathInline">var_1</span> &#30340;&#20540;&#20026; <span class="texMathInline">val_1</span>&#65292;&#20854;&#20313;&#21516;&#29702;&#12290;</p></li></ul><p>&#25105;&#20204;&#20598;&#23572;&#29992;&#19981;&#21516;&#32553;&#36827;&#34920;&#31034;&#22797;&#26434;&#29615;&#22659;&#65292;&#20197;&#20415;&#38405;&#35835;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#33021;&#25226;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">u</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="texMathInline">\rho</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#32553;&#20889;&#20026;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">[</span><span class="RktSym">x=3</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y=7</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">u=5</span><span class="RktPn">]</span><span class="texMathInline">\rho</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._364))"></a></div></p></blockquote><h5>3.2.4<tt>&nbsp;</tt><a name="(part._s3..2..4)"></a>&#23450;&#20041;&#34920;&#36798;&#24335;&#30340;&#34892;&#20026;</h5><p><a name="(idx._(gentag._365))"></a>
<a name="(idx._(gentag._366))"></a>
<a name="(idx._(gentag._367))"></a>
&#25105;&#20204;&#35821;&#35328;&#20013;&#30340;&#20845;&#31181;&#34920;&#36798;&#24335;&#21508;&#23545;&#24212;&#19968;&#20010;&#24038;&#36793;&#20026; <span class="texMathInline">\mathit{Expression}</span> &#30340;&#29983;&#25104;&#24335;&#12290;&#34920;&#36798;&#24335;
&#25509;&#21475;&#21253;&#21547;&#19971;&#20010;&#36807;&#31243;&#65292;&#20845;&#20010;&#26159;&#26500;&#36896;&#22120;&#65292;&#19968;&#20010;&#26159;&#35266;&#27979;&#22120;&#12290;&#25105;&#20204;&#29992; <span class="texMathInline">\mathit{ExpVal}</span> &#34920;&#31034;&#34920;
&#36798;&#20540;&#30340;&#38598;&#21512;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">&#26500;&#36896;&#22120;&#65306;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">const-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Int} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">zero?-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">if-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">diff-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">var-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">let-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Exp} \to \mathit{Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#35266;&#27979;&#22120;&#65306;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">value-of</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Exp} \times \mathit{Env} \to \mathit{ExpVal}</span></p></td></tr></table></blockquote><p>&#23454;&#29616;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#20889;&#20986;&#36825;&#20123;&#36807;&#31243;&#30340;&#34892;&#20026;&#35268;&#33539;&#12290;&#20381;&#29031;&#35299;&#37322;&#22120;&#31192;&#26041;&#65292;&#25105;&#20204;&#24076;&#26395; <span class="stt">value-of</span>
&#26597;&#30475;&#34920;&#36798;&#24335;&#65292;&#21028;&#26029;&#20854;&#31867;&#21035;&#65292;&#28982;&#21518;&#36820;&#22238;&#24688;&#24403;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = (num-val </span><span class="texMathInline">n</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = (apply-env </span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (num-val</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(expval-&gt;num (value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(expval-&gt;num (value-of </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))))</span></p></td></tr></table></blockquote><p>&#20219;&#20309;&#29615;&#22659;&#20013;&#65292;&#24120;&#37327;&#34920;&#36798;&#24335;&#30340;&#20540;&#37117;&#26159;&#36825;&#20010;&#24120;&#37327;&#12290;&#21464;&#37327;&#24341;&#29992;&#30340;&#20540;&#20174;&#26576;&#19968;&#29615;&#22659;&#20013;&#26597;&#35810;&#32780;&#24471;&#12290;&#24046;&#20540;&#34920;
&#36798;&#24335;&#30340;&#20540;&#20026;&#31532;&#19968;&#20010;&#25805;&#20316;&#25968;&#22312;&#26576;&#19968;&#29615;&#22659;&#20013;&#30340;&#20540;&#20943;&#21435;&#31532;&#20108;&#20010;&#25805;&#20316;&#25968;&#22312;&#21516;&#19968;&#29615;&#22659;&#20013;&#30340;&#20540;&#12290;&#24403;&#28982;&#65292;&#20934;
&#30830;&#26469;&#35828;&#65292;&#25105;&#20204;&#24471;&#30830;&#20445;&#25805;&#20316;&#25968;&#30340;&#20540;&#26159;&#25968;&#23383;&#65292;&#19988;&#32467;&#26524;&#26159;&#34920;&#31034;&#20026;&#34920;&#36798;&#20540;&#30340;&#25968;&#23383;&#12290;</p><p><span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#22914;&#20309;&#32467;&#21512;&#36825;&#20123;&#35268;&#21017;&#27714;&#21462;&#26500;&#36896;&#22120;&#29983;&#25104;&#30340;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#22312;&#26412;&#20363;&#20197;
&#21450;&#20854;&#20182;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#29992; <span class="texMathInline">\textnormal{\guillemotleft} exp
\textnormal{\guillemotright}</span> &#34920;&#31034;&#34920;&#36798;&#24335; <span class="texMathInline">exp</span> &#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#29992; <span class="texMathInline">\lceil n
\rceil</span> &#34920;&#31034; <span class="stt">(num-val </span><span class="texMathInline">n</span><span class="stt">)</span>&#65292;&#29992; <span class="texMathInline">\lfloor val \rfloor</span> &#34920;&#31034;
<span class="stt">(expval-&gt;num </span><span class="texMathInline">val</span><span class="stt">)</span>&#12290;&#25105;&#20204;&#36824;&#36816;&#29992;&#20102;&#19968;&#28857;&#20107;&#23454;&#65306;<span class="texMathInline">\lfloor \lceil n \rceil
\rfloor = n</span>&#12290;
<a name="(idx._(gentag._368))"></a>
<a name="(idx._(gentag._369))"></a>
<a name="(idx._(gentag._370))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex3..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21015;&#20986;<span class="EoplFigureRef"></span> &#20013;&#25152;&#26377;&#24212;&#29992; <span class="texMathInline">\lfloor \lceil n \rceil \rfloor = n</span> &#30340;&#22320;&#26041;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#20986;&#19968;&#20010;&#34920;&#36798;&#20540; <span class="texMathInline">val \in \mathit{ExpVal}</span>&#65292;&#19988; <span class="texMathInline">\lceil \lfloor val \rfloor
\rceil \neq val</span>&#12290;</p></blockquote><h5>3.2.5<tt>&nbsp;</tt><a name="(part._s3..2..5)"></a>&#23450;&#20041;&#31243;&#24207;&#30340;&#34892;&#20026;</h5><p>&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#25972;&#20010;&#31243;&#24207;&#21482;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#12290;&#35201;&#25214;&#20986;&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#65292;&#25105;&#20204;&#35201;&#23450;&#20041;&#31243;&#24207;&#20013;&#33258;
&#30001;&#21464;&#37327;&#30340;&#20540;&#12290;&#25152;&#20197;&#31243;&#24207;&#30340;&#20540;&#23601;&#26159;&#22312;&#36866;&#24403;&#30340;&#21021;&#22987;&#29615;&#22659;&#20013;&#27714;&#20986;&#30340;&#35813;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#25105;&#20204;&#25226;&#21021;&#22987;&#29615;&#22659;
&#35774;&#20026; <span class="stt">[i=1,v=5,x=10]</span>&#12290;</p><blockquote class="EoplEquationInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">value-of-program</span><span class="hspace">&nbsp;</span><span class="texMathInline">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">=</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="texMathInline">exp</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="stt">i=</span><span class="texMathInline">\lceil \tt{1} \rceil</span>,<span class="stt">v=</span><span class="texMathInline">\lceil \tt{5} \rceil</span>,<span class="stt">x=</span><span class="texMathInline">\lceil \tt{10} \rceil</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><h5>3.2.6<tt>&nbsp;</tt><a name="(part._s3..2..6)"></a>&#23450;&#20041;&#26465;&#20214;</h5><p><a name="(idx._(gentag._371))"></a>
&#25509;&#19979;&#26469;&#26159;&#36825;&#38376;&#35821;&#35328;&#30340;&#24067;&#23572;&#20540;&#25509;&#21475;&#12290;&#36825;&#38376;&#35821;&#35328;&#26377;&#19968;&#20010;&#24067;&#23572;&#20540;&#26500;&#36896;&#22120; <span class="stt">zero?</span>&#65292;&#19968;&#20010;&#24067;&#23572;&#20540;
&#35266;&#27979;&#22120; <span class="stt">if</span> &#34920;&#36798;&#24335;&#12290;</p><p>&#24403;&#19988;&#20165;&#24403;&#25805;&#20316;&#25968;&#30340;&#20540;&#20026;0&#65292;<span class="stt">zero?</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#20026;&#30495;&#12290;&#20687;<span class="EoplDefinitionRef"></span> &#37027;&#26679;&#65292;
&#21487;&#23558;&#20854;&#20889;&#25104;&#19968;&#26465;&#25512;&#29702;&#35268;&#21017;&#12290;&#25105;&#20204;&#20197; <span class="stt">bool-val</span> &#20026;&#26500;&#36896;&#22120;&#65292;&#25226;&#24067;&#23572;&#20540;&#36716;&#25442;&#20026;&#34920;&#36798;&#20540;&#65307;&#20197;
<span class="stt">expval-&gt;num</span> &#20026;&#25552;&#21462;&#22120;&#65292;&#21028;&#26029;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;&#21542;&#20026;&#25972;&#25968;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238;&#35813;&#25972;&#25968;&#12290;</p><blockquote class="EoplFigure"><p>&#20196; <span class="texMathInline">\rho =</span> <span class="stt">[i=1,v=5,x=10]</span>&#12290;<br/></p><blockquote class="TwoColumns"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,3), -(v,i))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(x,3)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;x&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;3&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">10</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;-(v,i)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="texMathInline">\columnbreak</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;v&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;i&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lfloor</span><span class="stt">(value-of &lt;&lt;i&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">1))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">4)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">3</span><span class="texMathInline">\rceil</span></p></td></tr></table></blockquote><blockquote class="caption"><p>&#25353;&#29031;&#35268;&#33539;&#20570;&#31616;&#21333;&#36816;&#31639;<a name="(elem._fig-3..3)"></a></p></blockquote></blockquote><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
         &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\
         &amp;\hphantom{xx}= \begin{cases}
                           <span class="stt">(bool-val #t)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> = 0 \\
                           <span class="stt">(bool-val #f)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> \neq 0 \hphantom{x}
                         \end{cases}
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p>&#19968;&#20010; <span class="stt">if</span> &#34920;&#36798;&#24335;&#23601;&#26159;&#19968;&#20010;&#24067;&#23572;&#20540;&#35266;&#27979;&#22120;&#12290;&#27442;&#27714; <span class="stt">if</span> &#34920;&#36798;&#24335; <span class="stt">(if-exp</span><span class="stt">
</span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">)</span> &#30340;&#20540;&#65292;&#39318;&#20808;&#21028;&#26029;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#30340;&#20540;&#65307;&#33509;&#35813;&#20540;&#20026;
&#30495;&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#24212;&#20026;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#65292;&#21542;&#21017;&#20026;&#23376;&#34920;&#36798;&#24335; <span class="texMathInline">exp_3</span> &#30340;&#20540;&#12290;&#36825;
&#20063;&#24456;&#23481;&#26131;&#20889;&#25104;&#25512;&#29702;&#35268;&#21017;&#12290;&#23601;&#20687;&#22312;&#21069;&#19968;&#20010;&#20363;&#23376;&#20013;&#20351;&#29992; <span class="stt">expval-&gt;num</span> &#19968;&#26679;&#65292;&#25105;&#20204;&#29992;
<span class="stt">expval-&gt;bool</span> &#25552;&#21462;&#34920;&#36798;&#20540;&#30340;&#24067;&#23572;&#37096;&#20998;&#12290;</p><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
         &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) </span> \\
         &amp;\hphantom{xx}= \begin{cases}
                          <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#t</span> \\
                          <span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#f</span> \hphantom{x}
                        \end{cases}
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p><a name="(idx._(gentag._372))"></a>
&#29992;&#36825;&#31181;&#25512;&#29702;&#35268;&#21017;&#24456;&#23481;&#26131;&#25351;&#23450;&#20219;&#24847;&#34920;&#36798;&#24335;&#30340;&#26399;&#26395;&#34892;&#20026;&#65292;&#20294;&#21364;&#19981;&#36866;&#21512;&#23637;&#31034;&#25512;&#29702;&#36807;&#31243;&#12290;&#20687;
<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#36825;&#26679;&#30340;&#21069;&#20214;&#34920;&#31034;&#19968;&#37096;&#20998;&#35745;&#31639;&#65292;&#25152;&#20197;&#19968;&#20010;&#35745;&#31639;&#36807;&#31243;&#24212;
&#35813;&#26159;&#19968;&#26869;&#26641;&#65292;&#23601;&#20687;<span class="stt">deriv-tree</span>&#37027;&#31181;&#12290;&#24456;&#19981;&#24184;&#30340;&#26159;&#65292;&#36825;&#26679;&#30340;&#26641;&#26497;&#20026;&#26214;&#28073;&#12290;&#22240;&#27492;&#65292;&#25105;
&#20204;&#32463;&#24120;&#25226;&#35268;&#21017;&#36716;&#20026;&#26041;&#31243;&#65292;&#28982;&#21518;&#23601;&#33021;&#29992;&#30456;&#31561;&#20195;&#25442;&#23637;&#31034;&#35745;&#31639;&#36807;&#31243;&#12290;</p><p><a name="(idx._(gentag._373))"></a>
<span class="stt">if-exp</span> &#30340;&#26041;&#31243;&#24335;&#35268;&#33539;&#26159;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._374))"></a>
<span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#29992;&#36825;&#20123;&#35268;&#21017;&#36827;&#34892;&#31616;&#21333;&#36816;&#31639;&#30340;&#36807;&#31243;&#12290;</p><blockquote class="EoplFigure"><p>[!t]&#20196; <span class="texMathInline">\rho =</span> <span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">33</span><span class="texMathInline">\rceil</span><span class="stt">,y=</span><span class="texMathInline">\lceil</span><span class="stt">22</span><span class="texMathInline">\rceil</span><span class="stt">]</span>&#12290;<br/></p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(-(x,11)) then -(y,2) else -(y,4)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (value-of &lt;&lt;zero?(-(x,11))&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if (expval-&gt;bool (bool-val #f))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (if #f</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,2)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;-(y,4)&gt;&gt; </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">18</span><span class="texMathInline">\rceil</span></p></td></tr></table><blockquote class="caption"><p>&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#31616;&#21333;&#35745;&#31639;&#36807;&#31243;<a name="(elem._fig-3..4)"></a></p></blockquote></blockquote><h5>3.2.7<tt>&nbsp;</tt><a name="(part._s3..2..7)"></a>&#23450;&#20041; <span class="stt">let</span></h5><p><a name="(idx._(gentag._375))"></a>
<a name="(idx._(gentag._376))"></a>
<a name="(idx._(gentag._377))"></a>
<a name="(idx._(gentag._378))"></a>
&#25509;&#19979;&#26469;&#25105;&#20204;&#22788;&#29702;&#29992; <span class="stt">let</span> &#34920;&#36798;&#24335;&#21019;&#24314;&#26032;&#21464;&#37327;&#32465;&#23450;&#30340;&#38382;&#39064;&#12290;&#25105;&#20204;&#32473;&#36825;&#38376;&#35299;&#37322;&#24615;&#35821;&#35328;&#28155;&#21152;&#35821;
&#27861;&#65292;&#20197;&#20851;&#38190;&#23383; <span class="stt">let</span> &#36215;&#22987;&#65292;&#28982;&#21518;&#26159;&#19968;&#20010;&#22768;&#26126;&#65292;&#20851;&#38190;&#23383; <span class="stt">in</span>&#65292;&#21450;&#20854;&#20027;&#20307;&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 5</span></p></td></tr><tr><td><p><span class="stt">in -(x, 3)</span></p></td></tr></table></blockquote><p>&#20687; <span class="stt">lambda</span> &#21464;&#37327;&#32465;&#23450;&#19968;&#26679;&#65288;&#35265;<a href="isd.html#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#65289;&#65292;<span class="stt">let</span> &#21464;&#37327;&#32465;&#23450;&#20110;&#20027;&#20307;&#20043;&#20013;&#12290;</p></blockquote><p>&#22914;&#21516;&#20854;&#20027;&#20307;&#65292;&#25972;&#20010; <span class="stt">let</span> &#24418;&#24335;&#20063;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#25152;&#20197; <span class="stt">let</span> &#34920;&#36798;&#24335;&#21487;&#20197;&#23884;&#22871;&#65292;&#20363;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let z = 5</span></p></td></tr><tr><td><p><span class="stt">in let x = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = -(x, 1)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">% &#36825;&#37324; x = 3</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 4</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(z, -(x,y)) % &#36825;&#37324; x = 4</span></p></td></tr></table></blockquote><p>&#22312;&#26412;&#20363;&#20013;&#65292;&#31532;&#19968;&#20010;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#30340; <span class="stt">x</span> &#25351;&#20195;&#22806;&#23618;&#22768;&#26126;&#65292;&#21478;&#19968;&#20010;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;&#30340;
<span class="stt">x</span> &#25351;&#20195;&#20869;&#23618;&#22768;&#26126;&#65292;&#25152;&#20197;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;3&#12290;</p></blockquote><p><span class="stt">let</span> &#22768;&#26126;&#30340;&#21491;&#36793;&#20063;&#26159;&#19968;&#20010;&#34920;&#36798;&#24335;&#65292;&#25152;&#20197;&#23427;&#21487;&#20197;&#20219;&#24847;&#22797;&#26434;&#12290;&#20363;&#22914;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 7</span></p></td></tr><tr><td><p><span class="stt">in let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8), y)</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#31532;&#19977;&#34892;&#22768;&#26126;&#30340; <span class="stt">x</span> &#32465;&#23450;&#21040; 6&#65292;&#25152;&#20197; <span class="stt">y</span> &#30340;&#20540;&#26159; 4&#65292;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#26159;
<span class="texMathInline">((-1)-4) = -5</span>&#12290;</p></blockquote><p>&#21487;&#20197;&#23558;&#35268;&#33539;&#20889;&#25104;&#19968;&#26465;&#35268;&#21017;&#12290;</p><p><span class="texMathDisplay">\infer{\begin{alignedat}{-1}
        &amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) </span> \\
        &amp;\hphantom{xx}= <span class="stt">(value-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">) </span>
       \end{alignedat}}
      {<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}</span></p><p>&#20687;&#20043;&#21069;&#37027;&#26679;&#65292;&#23558;&#20854;&#36716;&#20026;&#26041;&#31243;&#36890;&#24120;&#26356;&#26041;&#20415;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[var=(value-of </span><span class="texMathInline">exp_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p><span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#19968;&#20010;&#20363;&#23376;&#65292;&#20854;&#20013; <span class="texMathInline">\rho_0</span> &#34920;&#31034;&#20219;&#24847;&#29615;&#22659;&#12290;</p></blockquote><p><div class="SIntrapara"><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 7</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = 2</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = let x = -(x,1) in -(x,y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">\lceil</span><span class="stt">2</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">&#20196; </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">= [y=</span><span class="texMathInline">\lceil</span><span class="stt">2</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_0</span><span class="stt">&#12290;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;let x = -(x,1) in -(x,y)&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;-(x,2)&gt;&gt; [x=(value-of &lt;&lt;-(x,1)&gt;&gt; </span><span class="texMathInline">\rho_1</span><span class="stt">)]</span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=(value-of &lt;&lt;-(x,2)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_1</span><span class="stt">)]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(-(x,8),y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">\lceil</span><span class="stt">4</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho_1</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(- (- 7 8) 4)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">-5</span><span class="texMathInline">\rceil</span></p></td></tr></table><blockquote class="caption"><p><span class="stt">let</span> &#19968;&#20363;<a name="(elem._fig-3..5)"></a></p></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._379))"></a>
<a name="(idx._(gentag._380))"></a>
<a name="(idx._(gentag._381))"></a>
<a name="(idx._(gentag._382))"></a></div></p><h5>3.2.8<tt>&nbsp;</tt><a name="(part._s3..2..8)"></a>&#23454;&#29616; LET &#35268;&#33539;</h5><p>&#25509;&#19979;&#26469;&#30340;&#20219;&#21153;&#26159;&#29992;&#19968;&#32452;Scheme&#36807;&#31243;&#23454;&#29616;&#36825;&#19968;&#35268;&#33539;&#12290;&#25105;&#20204;&#30340;&#23454;&#29616;&#20197; SLLGEN<span class="NoteBox"><span class="NoteContent">&#35265;
<a href="sllgen-parsing-system.html#%28elem._sllgen%29" data-pltdoc="x">&#38468;&#24405;B</a>&#12290;&#8212;&#8212;<span class="emph">&#35793;&#27880;</span></span></span> &#20026;&#21069;&#31471;&#65292;&#34920;&#36798;&#24335;&#29992;<span class="EoplFigureRef"></span>
&#20013;&#30340;&#25968;&#25454;&#31867;&#22411;&#34920;&#31034;&#12290;&#22312;&#25105;&#20204;&#30340;&#23454;&#29616;&#20013;&#65292;&#34920;&#36798;&#20540;&#30340;&#34920;&#31034;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;&#25968;&#25454;
&#31867;&#22411;&#22768;&#26126;&#20102;&#26500;&#36896;&#22120; <span class="stt">num-val</span> &#21644; <span class="stt">bool-val</span>&#65292;&#29992;&#26469;&#23558;&#25972;&#25968;&#20540;&#21644;&#24067;&#23572;&#20540;&#36716;&#25442;&#20026;&#34920;&#36798;&#20540;&#12290;
&#25105;&#20204;&#36824;&#23450;&#20041;&#20102;&#25552;&#21462;&#22120;&#65292;&#29992;&#26469;&#23558;&#34920;&#36798;&#20540;&#36716;&#20026;&#25972;&#25968;&#25110;&#24067;&#23572;&#20540;&#12290;&#22914;&#26524;&#34920;&#36798;&#20540;&#31867;&#22411;&#19981;&#31526;&#39044;&#26399;&#65292;&#25552;&#21462;&#22120;
&#25253;&#38169;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">program?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35821;&#27861;&#25968;&#25454;&#31867;&#22411;<a name="(elem._fig-3..6)"></a></p></blockquote></blockquote><p>&#21482;&#35201;&#28385;&#36275;<a href="da.html#%28part._s2..2%29" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a>&#20013;&#30340;&#23450;&#20041;&#65292;&#20219;&#24847;&#19968;&#31181;&#29615;&#22659;&#23454;&#29616;&#37117;&#21487;&#20351;&#29992;&#12290;&#36807;&#31243; <span class="stt">init-env</span> &#21019;&#24314;
&#25351;&#23450;&#30340;&#21021;&#22987;&#29615;&#22659;&#65292;&#20379; <span class="stt">value-of-program</span> &#20351;&#29992;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">init-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span style="font-weight: bold">&#29992;&#27861;</span> : <span class="stt">(init-env)</span> = <span class="stt">[i=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">,v=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">,x=</span><span class="texMathInline">\lceil</span><span class="stt">10</span><span class="texMathInline">\rceil</span><span class="stt">]</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool</span><span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">expval-&gt;num</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Int}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expval-&gt;num</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-expval-extractor-error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">num</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">expval-&gt;bool</span></span> : <span class="texMathInline">\mathit{ExpVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">expval-&gt;bool</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expval</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">bool</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-expval-extractor-error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bool</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#34920;&#36798;&#20540;<a name="(elem._fig-3..7)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._383))"></a></div></p></blockquote><p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#35299;&#26512;&#22120;&#65292;&#22914;<span class="EoplFigureRef"></span> &#21644;<span class="stt">fig-3.9</span> &#25152;&#31034;&#12290;&#20027;&#36807;&#31243;
&#26159; <span class="stt">run</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#35299;&#26512;&#23427;&#65292;&#25226;&#32467;&#26524;&#20256;&#32473; <span class="stt">value-of-program</span>&#12290;&#26368;&#20196;&#20154;&#24863;
&#20852;&#36259;&#30340;&#36807;&#31243;&#26159; <span class="stt">value-of</span>&#65292;&#23427;&#21462;&#19968;&#34920;&#36798;&#24335;&#21644;&#19968;&#29615;&#22659;&#65292;&#29992;&#35299;&#37322;&#22120;&#31192;&#26041;&#35745;&#31639;&#35268;&#33539;&#25152;&#35201;&#27714;&#30340;&#31572;
&#26696;&#12290;&#22312;&#20195;&#30721;&#20013;&#65292;&#25105;&#20204;&#25554;&#20837;&#20102;&#30456;&#20851;&#30340;&#25512;&#29702;&#35268;&#21017;&#23450;&#20041;&#65292;&#20197;&#20415;&#35266;&#23519; <span class="stt">value-of</span> &#30340;&#20195;&#30721;&#22914;&#20309;&#19982;
&#35268;&#33539;&#23545;&#24212;&#12290;
<a name="(idx._(gentag._384))"></a></p><blockquote class="SubFlow"><p><span class="Smaller"><br/><a name="(elem._ex-note)"></a>&#22312;&#19979;&#38754;&#30340;&#32451;&#20064;&#20197;&#21450;&#20840;&#20070;&#20043;&#20013;&#65292;&#30701;&#35821;
&#8220;&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#8230;&#8230;&#8221;&#34920;&#31034;&#21521;&#35821;&#35328;&#35268;&#33539;&#28155;&#21152;&#35268;&#21017;&#25110;&#32773;&#26041;&#31243;&#65292;
&#24182;&#22686;&#25913;&#30456;&#24212;&#30340;&#35299;&#37322;&#22120;&#65292;&#23454;&#29616;&#25351;&#23450;&#29305;&#24615;&#12290;</span></p></blockquote><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">run</span></span> : <span class="texMathInline">\mathit{String} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">run</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{ExpVal} \times \mathit{Env} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="hspace">&nbsp;</span><span class="stt">(value-of (const-exp </span><span class="texMathInline">n</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = n</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{<span class="hspace">&nbsp;</span><span class="stt">(value-of (var-exp </span><span class="texMathInline">var</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="stt">(apply-env </span><span class="texMathInline">\rho</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span>}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\begin{math}\begin{alignedat}{-1}&amp;<span class="hspace">&nbsp;</span><span class="stt">(value-of (diff-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">) =</span> \\ &amp;\hphantom{xxx}<span class="texMathInline">\lceil</span><span class="stt">(- </span><span class="texMathInline">\lfloor</span><span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt"> </span><span class="texMathInline">\lfloor</span><span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span><span class="texMathInline">\rfloor</span><span class="stt">)</span><span class="texMathInline">\rceil</span>\end{alignedat}\end{math}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktSym">num2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\begin{comment}</td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td>\end{comment}
\smallskip</td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35299;&#37322;&#22120;<a name="(elem._fig-3..8)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._385))"></a></div></p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td>\smallskip
\begin{comment}</td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">...</span></td></tr><tr><td>\end{comment}</td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (zero?-exp </span><span class="texMathInline">exp_1</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= \begin{cases} <span class="stt">(bool-val #t)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> = 0 \\ <span class="stt">(bool-val #f)</span> &amp; &#33509; <span class="stt">(expval-&gt;num </span><span class="texMathInline">val_1</span><span class="stt">)</span> \neq 0 \end{cases} \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;num</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">num1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (if-exp </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">exp_3</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= \begin{cases} <span class="stt">(value-of </span><span class="texMathInline">exp_2</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#t</span> \\ <span class="stt">(value-of </span><span class="texMathInline">exp_3</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &amp; &#33509; <span class="stt">(expval-&gt;bool </span><span class="texMathInline">val_1</span><span class="stt">)</span> = <span class="stt">#f</span> \end{cases} \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expval-&gt;bool</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="texMathInline">\fbox{\infer{\begin{alignedat}{-1}&amp;<span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span> \\ &amp;\hphantom{x}= <span class="stt">(value-of </span><span class="texMathInline">body</span><span class="stt"> [</span><span class="texMathInline">var</span><span class="stt">=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span> \end{alignedat}}{<span class="stt">(value-of </span><span class="texMathInline">exp_1</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">) = </span><span class="texMathInline">val_1</span>}}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val1</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>LET &#35821;&#35328;&#30340;&#35299;&#37322;&#22120;&#65292;&#32493;<a name="(elem._fig-3..9)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._386))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..3)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25105;&#20204;&#21482;&#26377;&#19968;&#20010;&#31639;&#26415;&#25805;&#20316;&#65292;&#36873;&#20943;&#27861;&#20026;&#20160;&#20040;&#27604;&#21152;&#27861;&#22909;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..4)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._387))"></a>
<a name="(idx._(gentag._388))"></a>
&#25226;<span class="EoplFigureRef"></span> &#20013;&#30340;&#25512;&#23548;&#20889;&#25104;<span class="stt">deriv-tree</span>&#37027;&#26679;&#30340;&#25512;&#29702;&#26641;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25226;<span class="EoplFigureRef"></span> &#20013;&#30340;&#25512;&#23548;&#20889;&#25104;<span class="stt">deriv-tree</span>&#37027;&#26679;&#30340;&#25512;&#29702;&#26641;&#12290;
<a name="(idx._(gentag._389))"></a>
<a name="(idx._(gentag._390))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#26032;&#25805;&#20316;&#31526; <span class="stt">minus</span>&#65292;&#23427;&#21462;&#19968;&#21442;&#25968; <span class="texMathInline">n</span>&#65292;&#36820;&#22238; <span class="texMathInline">-n</span>&#12290;&#20363;&#22914;&#65292;
<span class="stt">minus(- (minus(5), 9))</span> &#30340;&#20540;&#24212;&#20026;14&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#21152;&#27861;&#12289;&#20056;&#27861;&#21644;&#25972;&#25968;&#38500;&#27861;&#25805;&#20316;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#31561;&#20540;&#27604;&#36739;&#35859;&#35789; <span class="stt">equal?</span>&#65292;&#20197;&#21450;&#39034;&#24207;&#27604;&#36739;&#35859;&#35789; <span class="stt">greater?</span> &#21644;
<span class="stt">less?</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..9)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._391))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#21015;&#34920;&#22788;&#29702;&#25805;&#20316;&#65292;&#21253;&#25324; <span class="stt">cons</span>&#12289;<span class="stt">car</span>&#12289;<span class="stt">cdr</span>&#12289;<span class="stt">null?</span> &#21644;
<span class="stt">emptylist</span>&#12290;&#21015;&#34920;&#21487;&#20197;&#21253;&#21547;&#20219;&#20309;&#34920;&#36798;&#20540;&#65292;&#21253;&#25324;&#20854;&#20182;&#21015;&#34920;&#12290;&#20687;<a href="#%28part._s3..2..2%29" data-pltdoc="x">&#23450;&#20041;&#20540;</a>&#37027;&#26679;&#65292;&#32473;
&#20986;&#35821;&#35328;&#34920;&#36798;&#20540;&#21644;&#25351;&#20195;&#20540;&#30340;&#23450;&#20041;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 4</span></p></td></tr><tr><td><p><span class="stt">in cons(x,</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">cons(cons(-(x,1),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">emptylist),</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">emptylist))</span></p></td></tr></table></blockquote><p>&#24212;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#34920;&#31034;&#21015;&#34920; <span class="stt">(4 (3))</span>&#12290;
<a name="(idx._(gentag._392))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..10)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._393))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#25805;&#20316; <span class="stt">list</span>&#12290;&#35813;&#25805;&#20316;&#21462;&#20219;&#24847;&#25968;&#37327;&#30340;&#21442;&#25968;&#65292;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#21253;&#21547;&#30001;&#21442;&#25968;&#20540;&#32452;
&#25104;&#30340;&#21015;&#34920;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 4</span></p></td></tr><tr><td><p><span class="stt">in list(x, -(x,1), -(x,3))</span></p></td></tr></table></blockquote><p>&#24212;&#36820;&#22238;&#19968;&#34920;&#36798;&#20540;&#65292;&#34920;&#31034;&#21015;&#34920; <span class="stt">(4 3 1)</span>&#12290;
<a name="(idx._(gentag._394))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..11)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#30495;&#27491;&#30340;&#35821;&#35328;&#21487;&#33021;&#26377;&#24456;&#22810;&#19978;&#36848;&#32451;&#20064;&#37027;&#26679;&#30340;&#25805;&#20316;&#31526;&#12290;&#35843;&#25972;&#35299;&#37322;&#22120;&#20195;&#30721;&#65292;&#20197;&#20415;&#28155;&#21152;&#26032;&#25805;&#20316;&#31526;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._395))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152; <span class="stt">cond</span> &#34920;&#36798;&#24335;&#12290;&#35821;&#27861;&#20026;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">cond </span><span class="texMathInline">\{}<span class="texMathInline">\mathit{Expression}</span> <span class="hspace">&nbsp;</span><span class="stt">==&gt; </span> <span class="texMathInline">\mathit{Expression}</span><span class="texMathInline">\</span>^{*}</span><span class="stt"> end</span></span></p><p>&#22312;&#36825;&#31181;&#34920;&#36798;&#24335;&#37324;&#65292;<span class="stt">==&gt;</span> &#24038;&#36793;&#30340;&#34920;&#36798;&#24335;&#25353;&#24207;&#27714;&#20540;&#65292;&#30452;&#21040;&#20854;&#20013;&#19968;&#20010;&#36820;&#22238;&#30495;&#12290;&#25972;&#20010;&#34920;&#36798;&#24335;&#30340;
&#20540;&#26159;&#30495;&#20540;&#34920;&#36798;&#24335;&#21491;&#36793;&#23545;&#24212;&#34920;&#36798;&#24335;&#30340;&#20540;&#12290;&#22914;&#26524;&#27809;&#26377;&#26465;&#20214;&#20026;&#30495;&#65292;&#35813;&#34920;&#36798;&#24335;&#24212;&#25253;&#38169;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..13)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._396))"></a>
&#20462;&#25913;&#35821;&#35328;&#65292;&#25226;&#25972;&#25968;&#20316;&#20026;&#21807;&#19968;&#30340;&#34920;&#36798;&#20540;&#12290;&#20462;&#25913; <span class="stt">if</span>&#65292;&#20197; 0 &#20026;&#20551;&#65292;&#20197;&#25152;&#26377;&#20854;&#20182;&#20540;&#20026;&#30495;&#12290;&#30456;
&#24212;&#22320;&#20462;&#25913;&#35859;&#35789;&#12290;
<a name="(idx._(gentag._397))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._398))"></a>
&#21069;&#19968;&#39064;&#30340;&#21478;&#19968;&#20570;&#27861;&#26159;&#32473;&#35821;&#35328;&#28155;&#21152;&#26032;&#30340;&#38750;&#32456;&#32467;&#31526; <span class="texMathInline">\mathit{Bool\mbox{-}exp}</span>&#65292;&#20316;&#20026;&#24067;&#23572;
&#20540;&#34920;&#36798;&#24335;&#12290;&#20462;&#25913;&#26465;&#20214;&#34920;&#36798;&#24335;&#30340;&#29983;&#25104;&#24335;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">if </span><span class="texMathInline">\mathit{Bool\mbox{-}exp}</span><span class="stt"> then </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> else </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#20026; <span class="texMathInline">\mathit{Bool\mbox{-}exp}</span> &#20889;&#20986;&#36866;&#24403;&#30340;&#29983;&#25104;&#24335;&#65292;&#23454;&#29616; <span class="stt">value-of-bool-exp</span>&#12290;
&#25353;&#36825;&#31181;&#26041;&#24335;&#65292;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#35859;&#35789;&#24212;&#25918;&#22312;&#21738;&#37324;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._399))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#26032;&#25805;&#20316; <span class="stt">print</span>&#65292;&#23427;&#21462;&#19968;&#21442;&#25968;&#65292;&#25171;&#21360;&#20986;&#26469;&#65292;&#36820;&#22238;&#25972;&#25968;1&#12290;&#22312;&#25105;&#20204;&#30340;&#35268;&#33539;&#26694;
&#26550;&#19979;&#65292;&#20026;&#20160;&#20040;&#19981;&#33021;&#34920;&#31034;&#36825;&#19968;&#25805;&#20316;&#65311;
<a name="(idx._(gentag._400))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..16)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._401))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#20801;&#35768; <span class="stt">let</span> &#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#21464;&#37327;&#65292;&#35821;&#27861;&#20026;&#65306;<br/></p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">let </span><span class="texMathInline">\{}<span class="texMathInline">\mathit{Identifier}</span> = <span class="texMathInline">\mathit{Expression}\</span>^*</span><span class="stt"> in </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#20687; Scheme &#20013;&#30340; <span class="stt">let</span> &#37027;&#26679;&#65292;&#22768;&#26126;&#21491;&#36793;&#22312;&#24403;&#21069;&#29615;&#22659;&#20013;&#27714;&#20540;&#65292;&#27599;&#20010;&#26032;&#21464;&#37327;&#32465;&#23450;&#21040;&#23545;&#24212;&#22768;&#26126;
&#21491;&#36793;&#30340;&#20540;&#65292;&#28982;&#21518;&#27714;&#20027;&#20307;&#30340;&#20540;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 30</span></p></td></tr><tr><td><p><span class="stt">in let x = -(x,1)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">y = -(x,2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;1&#12290;
<a name="(idx._(gentag._402))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..17)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._403))"></a>
&#25193;&#23637;&#35821;&#35328;&#65292;&#28155;&#21152;&#34920;&#36798;&#24335; <span class="stt">let*</span>&#65292;&#20687; Scheme &#30340; <span class="stt">let*</span> &#37027;&#26679;&#12290;&#21017;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 30</span></p></td></tr><tr><td><p><span class="stt">in let* x = -(x,1) y = -(x,2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;2&#12290;
<a name="(idx._(gentag._404))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..18)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._405))"></a>
&#21521;&#35813;&#35821;&#35328;&#28155;&#21152;&#34920;&#36798;&#24335;&#65306;</p><p><span class="texMathDisplay">\mathit{Expression} ::= <span class="stt">unpack </span><span class="texMathInline">\{\mathit{Identifier}\}^*</span><span class="stt"> = </span><span class="texMathInline">\mathit{Expression}</span><span class="stt"> in </span><span class="texMathInline">\mathit{Expression}</span></span></p><p>&#21017;&#65306;&#22914;&#26524; <span class="stt">lst</span> &#24688;&#22909;&#26159;&#19977;&#20803;&#32032;&#30340;&#21015;&#34920;&#65292;<span class="stt">unpack x y z = lst in ...</span> &#23558; <span class="stt">x</span>&#12289;
<span class="stt">y</span> &#21644; <span class="stt">z</span> &#32465;&#23450;&#21040; <span class="stt">lst</span> &#30340;&#21508;&#20803;&#32032;&#65307;&#21542;&#21017;&#25253;&#38169;&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let u = 7</span></p></td></tr><tr><td><p><span class="stt">in unpack x y = cons(u,cons(3,emptylist))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#20540;&#24212;&#20026;4&#12290;
<a name="(idx._(gentag._406))"></a></p></blockquote><h4>3.3<tt>&nbsp;</tt><a name="(part._s3..3)"></a>PROC&#65306;&#26377;&#36807;&#31243;&#30340;&#35821;&#35328;</h4><p><a name="(idx._(gentag._407))"></a>
&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#30340;&#35821;&#35328;&#21482;&#33021;&#36827;&#34892;&#23450;&#20041;&#22909;&#30340;&#25805;&#20316;&#12290;&#35201;&#24819;&#35753;&#36825;&#31181;&#35299;&#37322;&#24615;&#35821;&#35328;&#26356;&#26377;&#29992;&#65292;&#24517;&#39035;&#33021;&#21019;&#24314;
&#26032;&#36807;&#31243;&#12290;&#25105;&#20204;&#25226;&#26032;&#35821;&#35328;&#21483;&#20570; PROC&#12290;</p><p><a name="(idx._(gentag._408))"></a>
&#25353;&#29031; Scheme &#30340;&#35774;&#35745;&#65292;&#25105;&#20204;&#25226;&#36807;&#31243;&#20316;&#20026;&#35821;&#35328;&#30340;&#34920;&#36798;&#20540;&#65292;&#21017;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{ExpVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc} \\
\mathit{DenVal} &amp;= \mathit{Int} + \mathit{Bool} + \mathit{Proc}\end{align*}</span></p><p>&#20854;&#20013;&#65292;<span class="texMathInline">\mathit{Proc}</span> &#26159;&#19968;&#20540;&#38598;&#21512;&#65292;&#34920;&#31034;&#36807;&#31243;&#12290;&#25105;&#20204;&#25226; <span class="texMathInline">\mathit{Proc}</span> &#20316;&#20026;&#19968;&#31181;
&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;&#12290;&#19979;&#38754;&#25105;&#20204;&#32771;&#34385;&#23427;&#30340;&#25509;&#21475;&#21644;&#35268;&#33539;&#12290;</p></blockquote><p><a name="(idx._(gentag._409))"></a>
<a name="(idx._(gentag._410))"></a>
<a name="(idx._(gentag._411))"></a>
<a name="(idx._(gentag._412))"></a>
&#25105;&#20204;&#36824;&#38656;&#35201;&#35821;&#27861;&#26469;&#21019;&#24314;&#21644;&#35843;&#29992;&#36807;&#31243;&#12290;&#23545;&#24212;&#30340;&#29983;&#25104;&#24335;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">proc-exp (var body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">letrec(</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{Expression}</span><span class="stt">)</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">call-exp (rator rand)</span>}\end{align*}</span></p><p><a name="(idx._(gentag._413))"></a>
<a name="(idx._(gentag._414))"></a>
<a name="(idx._(gentag._415))"></a>
<a name="(idx._(gentag._416))"></a>
<a name="(idx._(gentag._417))"></a>
<a name="(idx._(gentag._418))"></a>
&#22312; <span class="stt">(proc </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">body</span><span class="stt">)</span> &#20013;&#65292;&#21464;&#37327; <span class="texMathInline">var</span> &#26159;<span class="emph">&#32465;&#23450;
&#21464;&#37327;</span> (<span class="emph">bound variable</span>) &#25110;<span class="emph">&#24418;&#21442;</span> (<span class="emph">formal parameter</span>)&#12290;&#22312;&#36807;&#31243;&#35843;&#29992; <span class="stt">(call-exp </span><span class="texMathInline">exp_1</span><span class="stt">
</span><span class="texMathInline">exp_2</span><span class="stt">)</span> &#20013;&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp_1</span> &#26159;<span class="emph">&#25805;&#20316;&#31526;</span> (<span class="emph">operator</span>)&#65292;&#34920;&#36798;&#24335; <span class="texMathInline">exp_2</span>
&#26159;<span class="emph">&#25805;&#20316;&#25968;</span> (<span class="emph">operand</span>) &#25110;<a name="(idx._(gentag._419))"></a><span class="emph">&#23454;&#38469;&#21442;&#25968;</span> (<span class="emph">actual
parameter</span>)&#12290;&#25105;&#20204;&#29992;<a name="(idx._(gentag._420))"></a><span class="emph">&#23454;&#21442;</span> (<span class="emph">argument</span>) &#25351;&#20195;&#23454;
&#38469;&#21442;&#25968;&#30340;&#20540;&#12290;</p><p>&#36825;&#26159;&#36825;&#31181;&#35821;&#35328;&#30340;&#20004;&#20010;&#23567;&#20363;&#23376;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let f = proc (x) -(x,11)</span></p></td></tr><tr><td><p><span class="stt">in (f (f 77))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(proc (f) (f (f 77))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">proc (x) -(x,11))</span></p></td></tr></table></blockquote><p>&#31532;&#19968;&#20010;&#31243;&#24207;&#21019;&#24314;&#36807;&#31243; <span class="stt">f</span>&#65292;&#23558;&#23454;&#21442;&#20943;11&#65292;&#28982;&#21518;&#29992; 77 &#20004;&#27425;&#35843;&#29992; <span class="stt">f</span>&#65292;&#24471;&#21040;&#30340;&#31572;&#26696;&#20026;55&#12290;
&#31532;&#20108;&#20010;&#31243;&#24207;&#21019;&#24314;&#30340;&#36807;&#31243;&#21462;&#19968;&#21442;&#25968;&#65292;&#36830;&#32493;&#20004;&#27425;&#29992; 77 &#35843;&#29992;&#35813;&#21442;&#25968;&#65307;&#28982;&#21518;&#23558;&#20943; 11 &#30340;&#36807;&#31243;&#20256;&#32473;&#21019;
&#24314;&#30340;&#36807;&#31243;&#65292;&#32467;&#26524;&#20173;&#20026; 55&#12290;</p><p>&#29616;&#22312;&#25105;&#20204;&#26469;&#30475;&#25968;&#25454;&#31867;&#22411; <span class="texMathInline">\mathit{Proc}</span>&#12290;&#23427;&#30340;&#25509;&#21475;&#21253;&#21547;&#26500;&#36896;&#22120; <span class="stt">procedure</span>&#65292;&#29992;&#20110;
&#21019;&#24314;&#36807;&#31243;&#20540;&#65307;&#35266;&#27979;&#22120; <span class="stt">apply-procedure</span>&#65292;&#29992;&#20110;&#35843;&#29992;&#36807;&#31243;&#20540;&#12290;</p><p>&#25509;&#19979;&#26469;&#30340;&#20219;&#21153;&#26159;&#65292;&#26126;&#30830;&#34920;&#31034;&#36807;&#31243;&#30340;&#20540;&#38656;&#35201;&#21253;&#21547;&#21738;&#20123;&#20449;&#24687;&#12290;&#27442;&#30693;&#27492;&#65292;&#25105;&#20204;&#32771;&#34385;&#22312;&#31243;&#24207;&#20013;&#20219;&#24847;&#20301;
&#32622;&#20889; <span class="stt">proc</span> &#34920;&#36798;&#24335;&#26102;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;</p><p>&#35789;&#27861;&#20316;&#29992;&#22495;&#35268;&#21017;&#21578;&#35785;&#25105;&#20204;&#65292;&#35843;&#29992;&#19968;&#20010;&#36807;&#31243;&#26102;&#65292;&#36807;&#31243;&#30340;&#24418;&#21442;&#32465;&#23450;&#21040;&#35843;&#29992;&#26102;&#30340;&#23454;&#21442;&#65292;&#28982;&#21518;&#22312;&#35813;&#29615;
&#22659;&#20869;&#27714;&#20540;&#36807;&#31243;&#30340;&#20027;&#20307;&#12290;&#36807;&#31243;&#20013;&#20986;&#29616;&#30340;&#33258;&#30001;&#21464;&#37327;&#20063;&#24212;&#35813;&#36981;&#23432;&#35789;&#27861;&#32465;&#23450;&#35268;&#21017;&#12290;&#32771;&#34385;&#34920;&#36798;&#24335;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 200</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._421))"></a>
<a name="(idx._(gentag._422))"></a>
&#36825;&#37324;&#25105;&#20204;&#20004;&#27425;&#27714;&#20540;&#34920;&#36798;&#24335; <span class="stt">proc (z) -(z,x)</span>&#12290;&#31532;&#19968;&#27425;&#27714;&#20540;&#26102;&#65292;<span class="stt">x</span> &#32465;&#23450;&#21040; 200&#65292;&#25152;
&#20197;&#26681;&#25454;&#35789;&#27861;&#32465;&#23450;&#35268;&#21017;&#65292;&#24471;&#21040;&#30340;&#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 200&#65292;&#25105;&#20204;&#23558;&#20854;&#21629;&#21517;&#20026; <span class="stt">f</span>&#12290;&#31532;&#20108;&#27425;&#27714;&#20540;&#26102;&#65292;
<span class="stt">x</span> &#32465;&#23450;&#21040; 100&#65292;&#24471;&#20986;&#30340;&#36807;&#31243;&#24212;&#23558;&#23454;&#21442;&#20943; 100&#65292;&#25105;&#20204;&#23558;&#35813;&#36807;&#31243;&#21629;&#21517;&#20026; <span class="stt">g</span>&#12290;</p><p><a name="(idx._(gentag._423))"></a>
&#36825;&#20004;&#20010;&#36807;&#31243;&#30001;&#21516;&#19968;&#20010;&#34920;&#36798;&#24335;&#29983;&#25104;&#65292;&#32780;&#34892;&#20026;&#19981;&#21516;&#12290;&#30001;&#27492;&#21487;&#24471;&#65292;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#19968;&#23450;&#20197;&#26576;
&#31181;&#26041;&#24335;&#20381;&#36182;&#27714;&#20540;&#29615;&#22659;&#12290;&#22240;&#27492;&#65292;&#26500;&#36896;&#22120; <span class="stt">procedure</span> &#24517;&#23450;&#21462;&#19977;&#20010;&#21442;&#25968;&#65306;&#32465;&#23450;&#21464;&#37327;&#12289;&#20027;&#20307;&#20197;
&#21450;&#29615;&#22659;&#12290;<span class="stt">proc</span> &#34920;&#36798;&#24335;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (proc-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#20687; <span class="stt">bool-val</span> &#21644; <span class="stt">num-val</span> &#19968;&#26679;&#65292;<span class="stt">proc-val</span> &#26159;&#19968;&#26500;&#36896;&#22120;&#65292;&#29983;&#25104;&#19968;&#20010;
<span class="texMathInline">\mathit{Proc}</span> &#30340;&#34920;&#36798;&#20540;&#12290;</p></blockquote><p>&#35843;&#29992;&#36807;&#31243;&#26102;&#65292;&#25105;&#20204;&#35201;&#25214;&#20986;&#25805;&#20316;&#31526;&#21644;&#25805;&#20316;&#25968;&#30340;&#20540;&#12290;&#22914;&#26524;&#25805;&#20316;&#31526;&#26159;&#19968;&#20010; <span class="stt">proc-val</span>&#65292;&#37027;&#20040;&#25105;
&#20204;&#35201;&#20197;&#25805;&#20316;&#25968;&#30340;&#20540;&#35843;&#29992;&#23427;&#12290;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (call-exp </span><span class="texMathInline">rator</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">rand</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (let ((proc (expval-&gt;proc (value-of </span><span class="texMathInline">rator</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(arg (value-of </span><span class="texMathInline">rand</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure proc arg))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#25105;&#20204;&#29992;&#20102;&#19968;&#20010;&#21028;&#26029;&#24335; <span class="stt">expval-&gt;proc</span>&#65292;&#20687; <span class="stt">expval-&gt;num</span>&#65292;&#23427;&#21028;&#26029;&#34920;&#36798;&#20540;
<span class="stt">(value-of </span><span class="texMathInline">rator</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#26159;&#21542;&#30001; <span class="stt">proc-val</span> &#29983;&#25104;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#20174;&#20013;&#25552;&#21462;
&#20986;&#21253;&#21547;&#30340;&#36807;&#31243;&#12290;</p></blockquote><p>&#26368;&#21518;&#65292;&#25105;&#20204;&#32771;&#34385;&#35843;&#29992; <span class="stt">apply-procedure</span> &#26102;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;&#35789;&#27861;&#20316;&#29992;&#22495;&#35268;&#21017;&#21578;&#35785;&#25105;&#20204;&#65292;&#35843;
&#29992;&#36807;&#31243;&#26102;&#65292;&#36807;&#31243;&#20027;&#20307;&#30340;&#27714;&#20540;&#29615;&#22659;&#23558;&#20854;&#24418;&#21442;&#32465;&#23450;&#21040;&#35843;&#29992;&#26102;&#30340;&#23454;&#21442;&#65307;&#32780;&#19988;&#65292;&#20219;&#20309;&#20854;&#20182;&#21464;&#37327;&#30340;&#20540;&#24517;
&#39035;&#21644;&#36807;&#31243;&#21019;&#24314;&#26102;&#30456;&#21516;&#12290;&#22240;&#27492;&#65292;&#36825;&#20123;&#36807;&#31243;&#24212;&#28385;&#36275;&#26465;&#20214;</p><blockquote class="EoplEquationInset"><p><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">[</span><span class="texMathInline">var=val</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></div><div class="SIntrapara"><a name="(idx._(gentag._424))"></a>
<a name="(idx._(gentag._425))"></a>
<a name="(idx._(gentag._426))"></a>
<a name="(idx._(gentag._427))"></a>
<a name="(idx._(gentag._428))"></a>
<a name="(idx._(gentag._429))"></a>
<a name="(idx._(gentag._430))"></a></div></p></blockquote><h5>3.3.1<tt>&nbsp;</tt><a name="(part._s3..3..1)"></a>&#19968;&#20010;&#20363;&#23376;</h5><p>&#25105;&#20204;&#29992;&#19968;&#20010;&#20363;&#23376;&#23637;&#31034;&#23450;&#20041;&#30340;&#21508;&#37096;&#20998;&#26159;&#22914;&#20309;&#37197;&#21512;&#30340;&#12290;&#30001;&#20110;&#25105;&#20204;&#36824;&#27809;&#26377;&#20889;&#20986;&#36807;&#31243;&#30340;&#23454;&#29616;&#65292;&#36825;&#20010;&#35745;
&#31639;&#36807;&#31243;&#29992;<span class="emph">&#35268;&#33539;</span>&#34920;&#31034;&#12290;&#20196; <span class="texMathInline">\rho</span> &#20026;&#20219;&#19968;&#29615;&#22659;&#12290;</p><blockquote class="Small"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 200</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let f = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = 100</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let g = proc (z) -(z,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -((f 1), (g 1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;(f 1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;(g 1)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[g=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[f=(proc-val (procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))]</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure z &lt;&lt;-(z,x)&gt;&gt; [x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(z,x)&gt;&gt; [z=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;-(z,x)&gt;&gt; [z=</span><span class="texMathInline">\lceil</span><span class="stt">1</span><span class="texMathInline">\rceil</span><span class="stt">][x=</span><span class="texMathInline">\lceil</span><span class="stt">100</span><span class="texMathInline">\rceil</span><span class="stt">][f=...][x=</span><span class="texMathInline">\lceil</span><span class="stt">200</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">(- -199 -99)</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= </span><span class="texMathInline">\lceil</span><span class="stt">-100</span><span class="texMathInline">\rceil</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr></table></blockquote><p>&#20854;&#20013;&#65292;&#32465;&#23450;&#21040;&#30340; <span class="stt">f</span> &#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 200&#65292;&#32465;&#23450;&#21040; <span class="stt">g</span> &#30340;&#36807;&#31243;&#23558;&#23454;&#21442;&#20943; 100&#65292;&#25152;&#20197;
<span class="stt">(f 1)</span> &#30340;&#20540;&#26159; -199&#65292;<span class="stt">(g 1)</span> &#30340;&#20540;&#26159; -99&#12290;</p><h5>3.3.2<tt>&nbsp;</tt><a name="(part._s3..3..2)"></a>&#34920;&#31034;&#36807;&#31243;</h5><p><a name="(idx._(gentag._431))"></a>
<a name="(idx._(gentag._432))"></a>
&#26681;&#25454;<a href="da.html#%28part._s2..2..3%29" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a>&#20013;&#20171;&#32461;&#30340;&#26041;&#27861;&#65292;&#25105;&#20204;&#21487;&#20197;&#25353;&#29031;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#29992;&#36807;&#31243;&#22312;
<span class="stt">apply-procedure</span> &#20013;&#30340;&#21160;&#20316;&#34920;&#31034;&#23427;&#20204;&#12290;&#27442;&#22914;&#27492;&#65292;&#25105;&#20204;&#23558; <span class="stt">procedure</span> &#30340;&#20540;&#23450;&#20041;&#20026;
&#23454;&#29616;&#35821;&#35328;&#30340;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#23454;&#21442;&#65292;&#36820;&#22238;&#19979;&#38754;&#35268;&#33539;&#35201;&#27714;&#30340;&#20540;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#22240;&#27492;&#65292;&#23436;&#25972;&#30340;&#23454;&#29616;&#26159;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">proc?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#23450;&#20041;&#30340;&#20989;&#25968; <span class="stt">proc?</span> &#19981;&#23436;&#20840;&#20934;&#30830;&#65292;&#22240;&#20026;&#19981;&#26159;&#27599;&#20010; Scheme &#36807;&#31243;&#37117;&#33021;&#20316;&#20026;&#25105;&#20204;&#35821;&#35328;&#20013;
&#30340;&#36807;&#31243;&#12290;&#25105;&#20204;&#38656;&#35201;&#23427;&#65292;&#21482;&#26159;&#20026;&#20102;&#23450;&#20041;&#25968;&#25454;&#31867;&#22411; <span class="stt">expval</span>&#12290;
<a name="(idx._(gentag._433))"></a>
<a name="(idx._(gentag._434))"></a></p></blockquote><p><a name="(idx._(gentag._435))"></a>
<a name="(idx._(gentag._436))"></a>
&#21478;&#19968;&#31181;&#26041;&#24335;&#26159;&#29992;<a href="da.html#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#37027;&#26679;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">proc?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Exp} \times \mathit{Env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._437))"></a>
&#36825;&#20123;&#25968;&#25454;&#32467;&#26500;&#24120;&#31216;&#20026;<span class="emph">&#38381;&#21253;</span> (<span class="emph">closure</span>)&#65292;&#22240;&#20026;&#23427;&#20204;&#33258;&#32473;&#33258;&#36275;&#65292;&#21253;&#21547;&#36807;&#31243;&#35843;&#29992;&#25152;&#38656;&#35201;&#30340;
&#19968;&#20999;&#12290;&#26377;&#26102;&#65292;&#25105;&#20204;&#35828;&#36807;&#31243;<span class="emph">&#38381;&#21512;&#20110;</span> (<span class="emph">closed over</span>, <span class="emph">closed in</span>) &#21019;&#24314;&#26102;&#30340;&#29615;&#22659;&#12290;</p><p>&#26174;&#28982;&#65292;&#36825;&#20123;&#23454;&#29616;&#37117;&#28385;&#36275;&#36807;&#31243;&#25509;&#21475;&#30340;&#23450;&#20041;&#12290;</p><p>&#19981;&#35770;&#21738;&#31181;&#23454;&#29616;&#65292;&#25105;&#20204;&#37117;&#35201;&#32473;&#25968;&#25454;&#31867;&#22411; <span class="stt">expval</span> &#28155;&#21152;&#21464;&#20307;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">number?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bool-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">boolean?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#21516;&#26102;&#32473; <span class="stt">value-of</span> &#28155;&#21152;&#20004;&#26465;&#26032;&#35821;&#21477;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">body</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta">&#160;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">expval-&gt;proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">apply-procedure</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">proc</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#35760;&#20303;&#65306;&#19968;&#23450;&#35201;&#32473;&#35821;&#35328;&#30340;&#27599;&#20010;&#25193;&#23637;&#20889;&#20986;&#35268;&#33539;&#12290;&#21442;&#35265;<span class="stt">ex-note</span>&#30340;&#35828;&#26126;&#12290;
<a name="(idx._(gentag._438))"></a>
<a name="(idx._(gentag._439))"></a>
<a name="(idx._(gentag._440))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._441))"></a>
<a name="(idx._(gentag._442))"></a>
&#22312;&#24456;&#22810;&#35821;&#35328;&#20013;&#65292;&#36807;&#31243;&#21019;&#24314;&#21644;&#21629;&#21517;&#24517;&#39035;&#21516;&#26102;&#36827;&#34892;&#12290;&#20462;&#25913;&#26412;&#33410;&#30340;&#35821;&#35328;&#65292;&#29992; <span class="stt">letproc</span> &#26367;&#25442;
<span class="stt">proc</span>&#65292;&#20197;&#25903;&#25345;&#27492;&#24615;&#36136;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..20)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._443))"></a>
<a name="(idx._(gentag._444))"></a>
&#22312;PROC&#20013;&#65292;&#36807;&#31243;&#21482;&#33021;&#26377;&#19968;&#20010;&#21442;&#25968;&#65292;&#20294;&#26159;&#21487;&#20197;&#29992;&#36820;&#22238;&#20854;&#20182;&#36807;&#31243;&#30340;&#36807;&#31243;&#26469;&#27169;&#25311;&#22810;&#21442;&#25968;&#36807;&#31243;&#12290;&#20363;&#22914;&#65292;
&#21487;&#20197;&#20889;&#20986;&#36825;&#26679;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let f = proc (x) proc (y) ...</span></p></td></tr><tr><td><p><span class="stt">in ((f 3) 4)</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#23567;&#25216;&#24039;&#21483;&#20570;<a name="(elem._curry)"></a><span class="emph">&#21654;&#21737;&#21270;</span> (<span class="emph">Currying</span>)&#65292;&#35813;&#36807;&#31243;&#21017;
&#31216;&#20316;<span class="emph">&#21654;&#21937;&#24335;</span> (<span class="emph">Curried</span>) &#30340;&#12290;&#20889;&#20986;&#19968;&#20010;&#21654;&#21937;&#24335;&#30340;&#36807;&#31243;&#65292;&#23427;&#21462;&#20004;&#20010;&#21442;&#25968;&#65292;&#36820;&#22238;
&#20108;&#32773;&#20043;&#21644;&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#21487;&#20197;&#25226; <span class="texMathInline">x+y</span> &#20889;&#25104; <span class="stt">-(x,-(0,y))</span>&#12290;</p><p><a name="(idx._(gentag._445))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..21)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#26412;&#33410;&#30340;&#35821;&#35328;&#65292;&#28155;&#21152;&#22810;&#21442;&#25968;&#36807;&#31243;&#21450;&#20854;&#35843;&#29992;&#65292;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">proc (</span><span class="Iidentity">\{\mathit{Identifier}\}^{*(,)}</span><span class="stt">) </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
\mathit{Expression} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> </span><span class="Iidentity">\mathit{\{Expression\}^{*}}</span><span class="stt">)</span>\end{align*}</span>
<a name="(idx._(gentag._446))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..22)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#26412;&#33410;&#30340;&#20869;&#32622;&#25805;&#20316;&#65288;&#22914;&#24046;&#20540;&#65289;&#21644;&#36807;&#31243;&#35843;&#29992;&#20351;&#29992;&#19981;&#21516;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#20462;&#25913;&#20855;&#20307;&#35821;&#27861;&#65292;&#19981;&#35201;&#35753;&#35821;&#35328;&#30340;
&#29992;&#25143;&#21306;&#20998;&#21738;&#20123;&#26159;&#20869;&#32622;&#25805;&#20316;&#65292;&#21738;&#20123;&#26159;&#33258;&#23450;&#20041;&#30340;&#36807;&#31243;&#12290;&#26681;&#25454;&#25152;&#20351;&#29992;&#30340;&#35299;&#26512;&#25216;&#26415;&#65292;&#36825;&#36947;&#32451;&#20064;&#21487;&#33021;&#24456;
&#23481;&#26131;&#65292;&#20063;&#21487;&#33021;&#38750;&#24120;&#38590;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..23)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._447))"></a>
<a name="(idx._(gentag._448))"></a>
&#19979;&#38754;&#30340;PROC&#31243;&#24207;&#20540;&#26159;&#20160;&#20040;&#65311;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let makemult = proc (maker)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -(((maker maker) -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt">in let times4 = proc (x) ((makemult makemult) x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote><p>&#29992;&#36825;&#20010;&#31243;&#24207;&#37324;&#30340;&#23567;&#25216;&#24039;&#20889;&#20986;PROC&#38454;&#20056;&#36807;&#31243;&#12290;&#25552;&#31034;&#65306;&#20320;&#21487;&#20197;&#20351;&#29992;<a href="#%28elem._curry%29" data-pltdoc="x">&#21654;
&#21937;&#21270;</a>&#65288;<span class="EoplExerciseRef"></span>&#65289;&#23450;&#20041;&#21452;&#21442;&#25968;&#36807;&#31243; <span class="stt">times</span>&#12290;
<a name="(idx._(gentag._449))"></a>
<a name="(idx._(gentag._450))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..24)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._451))"></a>
<a name="(idx._(gentag._452))"></a>
&#29992;&#19978;&#36848;&#31243;&#24207;&#37324;&#30340;&#23567;&#25216;&#24039;&#20889;&#20986;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#20114;&#36882;&#24402;&#31243;&#24207; <span class="stt">odd</span> &#21644; <span class="stt">even</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..25)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._453))"></a>
&#25552;&#28860;&#19978;&#36848;&#32451;&#20064;&#20013;&#30340;&#25216;&#24039;&#65292;&#29992;&#23427;&#22312; PROC &#20013;&#23450;&#20041;&#20219;&#24847;&#36882;&#24402;&#36807;&#31243;&#12290;&#32771;&#34385;&#19979;&#38754;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let makerec = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let d = proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (z) ((f (x x)) z)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in proc (n) ((f (d d)) n)</span></p></td></tr><tr><td><p><span class="stt">in let maketimes4 = proc (f)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">proc (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((f -(x,1)), -4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let times4 = (makerec maketimes4)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (times4 3)</span></p></td></tr></table></blockquote><p>&#35777;&#26126;&#23427;&#36820;&#22238;12&#12290;
<a name="(idx._(gentag._454))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._455))"></a>
<a name="(idx._(gentag._456))"></a>
&#25105;&#20204;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#36807;&#31243;&#26102;&#65292;&#22312;&#38381;&#21253;&#20013;&#35760;&#24405;&#20102;&#25972;&#20010;&#29615;&#22659;&#12290;&#20294;&#26159;&#26174;&#28982;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#33258;&#30001;&#21464;&#37327;&#30340;
&#32465;&#23450;&#12290;&#20462;&#25913;&#36807;&#31243;&#30340;&#34920;&#31034;&#65292;&#21482;&#20445;&#30041;&#33258;&#30001;&#21464;&#37327;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..27)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#35821;&#35328;&#28155;&#21152;&#21478;&#19968;&#31181;&#36807;&#31243; <span class="stt">traceproc</span>&#12290;<span class="stt">traceproc</span> &#31867;&#20284; <span class="stt">proc</span>&#65292;&#20294;&#20250;&#22312;&#20837;&#21475;&#21644;
&#20986;&#21475;&#22788;&#25171;&#21360;&#36319;&#36394;&#28040;&#24687;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..28)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._457))"></a>
<a name="(idx._(gentag._458))"></a>
<a name="(idx._(gentag._459))"></a>
<a name="(idx._(gentag._460))"></a>
<a name="(idx._(gentag._461))"></a>
<a name="(idx._(gentag._462))"></a>
&#35774;&#35745;&#36807;&#31243;&#30340;&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;<span class="emph">&#21160;&#24577;&#32465;&#23450;</span> (<span class="emph">dynamic binding</span>)&#65288;&#25110;&#31216;<span class="emph">&#21160;&#24577;&#23450;&#30028;</span> (<span class="emph">dynamic
scoping</span>)&#65289;&#65306;&#27714;&#20540;&#36807;&#31243;&#20027;&#20307;&#30340;&#29615;&#22659;&#30001;&#35843;&#29992;&#22788;&#30340;&#29615;&#22659;&#25193;&#23637;&#32780;&#24471;&#12290;&#20363;&#22914;&#65292;&#22312;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 3</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (x) -(x,a)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">a = 5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(a, (p 2))</span></p></td></tr></table></blockquote><p>&#20013;&#65292;&#36807;&#31243;&#20027;&#20307;&#20869;&#30340; <span class="stt">a</span> &#32465;&#23450;&#21040; 5&#65292;&#32780;&#19981;&#26159; 3&#12290;&#20462;&#25913;&#35821;&#35328;&#65292;&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#12290;&#20570;&#20004;&#27425;&#65292;&#19968;&#27425;
&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#34920;&#31034;&#36807;&#31243;&#65292;&#19968;&#27425;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#12290;
<a name="(idx._(gentag._463))"></a>
<a name="(idx._(gentag._464))"></a>
<a name="(idx._(gentag._465))"></a>
<a name="(idx._(gentag._466))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..29)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#24456;&#19981;&#24184;&#30340;&#26159;&#65292;&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#30340;&#31243;&#24207;&#24456;&#21487;&#33021;&#24322;&#24120;&#26214;&#28073;&#12290;&#20363;&#22914;&#65292;&#22312;&#35789;&#27861;&#32465;&#23450;&#20013;&#65292;&#25209;&#37327;&#26367;&#25442;&#36807;&#31243;&#30340;
&#32465;&#23450;&#21464;&#37327;&#65292;&#20915;&#19981;&#20250;&#25913;&#21464;&#31243;&#24207;&#30340;&#34892;&#20026;&#65306;&#25105;&#20204;&#29978;&#33267;&#21487;&#20197;&#20687;<a href="#%28part._s3..6%29" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a>&#37027;&#26679;&#65292;&#21024;&#38500;&#25152;&#26377;&#21464;&#37327;&#65292;
&#23558;&#23427;&#20204;&#26367;&#25442;&#20026;&#35789;&#27861;&#22320;&#22336;&#12290;&#20294;&#22312;&#21160;&#24577;&#32465;&#23450;&#20013;&#65292;&#36825;&#31181;&#36716;&#25442;&#23601;&#21361;&#38505;&#20102;&#12290;</p><p>&#20363;&#22914;&#65292;&#22312;&#21160;&#24577;&#32465;&#23450;&#20013;&#65292;&#36807;&#31243; <span class="stt">proc (z) a</span> &#36820;&#22238;&#35843;&#29992;&#32773;&#29615;&#22659;&#20013;&#30340;&#21464;&#37327; <span class="stt">a</span>&#12290;&#37027;&#20040;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 3</span></p></td></tr><tr><td><p><span class="stt">in let p = proc (z) a</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in let f = proc (x) (p 0)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let a = 5</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f 2)</span></p></td></tr></table></blockquote><p>&#36820;&#22238; 5&#65292;&#22240;&#20026;&#35843;&#29992;&#22788; <span class="stt">a</span> &#30340;&#20540;&#20026; 5&#12290;&#22914;&#26524; <span class="stt">f</span> &#30340;&#24418;&#21442;&#20026; <span class="stt">a</span> &#21602;&#65311;
<a name="(idx._(gentag._467))"></a>
<a name="(idx._(gentag._468))"></a></p></blockquote><h4>3.4<tt>&nbsp;</tt><a name="(part._s3..4)"></a>LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</h4><p><a name="(idx._(gentag._469))"></a>
<a name="(idx._(gentag._470))"></a>
<a name="(idx._(gentag._471))"></a>
&#29616;&#22312;&#25105;&#20204;&#26469;&#23450;&#20041;&#25903;&#25345;&#36882;&#24402;&#30340;&#26032;&#35821;&#35328; LETREC&#12290;&#22240;&#20026;&#25105;&#20204;&#30340;&#35821;&#35328;&#21482;&#26377;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#25152;&#20197;&#25105;&#20204;&#38477;
&#20302;&#38590;&#24230;&#65292;&#21482;&#35753; <span class="stt">letrec</span> &#34920;&#36798;&#24335;&#22768;&#26126;&#19968;&#20010;&#21333;&#21442;&#25968;&#36807;&#31243;&#65292;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec double (x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else -((double -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt">in (double 6)</span></p></td></tr></table></blockquote><p>&#36882;&#24402;&#22768;&#26126;&#30340;&#24038;&#36793;&#26159;&#36882;&#24402;&#36807;&#31243;&#30340;&#21517;&#23383;&#21644;&#32465;&#23450;&#21464;&#37327;&#65292;<span class="stt">=</span> &#21491;&#36793;&#26159;&#36807;&#31243;&#20027;&#20307;&#65292;&#20854;&#29983;&#25104;&#24335;&#20026;&#65306;</p><blockquote class="Small"><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">letrec </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) = </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">letrec-exp (p-name b-var p-body letrec-body)</span>}\end{align*}</span></p></blockquote><p><span class="stt">letrec</span> &#34920;&#36798;&#24335;&#30340;&#20540;&#26159;&#20854;&#20027;&#20307;&#30340;&#20540;&#65292;&#22312;&#31526;&#21512;&#26399;&#26395;&#34892;&#20026;&#30340;&#29615;&#22659;&#20013;&#27714;&#20986;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(letrec-exp </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._472))"></a>
&#36825;&#37324;&#65292;&#25105;&#20204;&#32473;&#29615;&#22659;&#25509;&#21475;&#26032;&#22686;&#19968;&#20010;&#36807;&#31243; <span class="stt">extend-env-rec</span>&#12290;&#20294;&#25105;&#20204;&#20173;&#28982;&#24471;&#22238;&#31572;&#36825;&#20010;&#38382;&#39064;&#65306;
<span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"> </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt">
</span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#30340;&#26399;&#26395;&#34892;&#20026;&#26159;&#20160;&#20040;&#65311;</p></blockquote><p><a name="(idx._(gentag._473))"></a>
&#25105;&#20204;&#23450;&#20041;&#35813;&#29615;&#22659;&#30340;&#34892;&#20026;&#22914;&#19979;&#65306;&#35774; <span class="texMathInline">\rho_1</span> &#20026; <span class="stt">(extend-env-rec</span><span class="stt">
</span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"> </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"> </span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"> </span><span class="texMathInline">\rho</span><span class="stt">)</span> &#20135;&#29983;&#30340;
&#29615;&#22659;&#12290;&#37027;&#20040; <span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span> &#24212;&#36820;&#22238;&#20160;&#20040;&#65311;</p><ol><li><p>&#22914;&#26524;&#21464;&#37327; <span class="texMathInline">var</span> &#19982; <span class="texMathInline">proc\mbox{-}name</span> &#30456;&#21516;&#65292;&#37027;&#20040; <span class="stt">(apply-env</span><span class="stt">
</span><span class="texMathInline">\rho_1</span><span class="stt"> </span><span class="texMathInline">var</span><span class="stt">)</span> &#24212;&#36820;&#22238;&#19968;&#20010;&#38381;&#21253;&#65292;&#20854;&#32465;&#23450;&#21464;&#37327;&#20026; <span class="texMathInline">bound\mbox{-}var</span>&#65292;&#20027;&#20307;&#20026;
<span class="texMathInline">proc\mbox{-}body</span>&#65292;&#29615;&#22659;&#20026;&#32465;&#23450; <span class="texMathInline">proc\mbox{-}name</span> &#26102;&#25152;&#22312;&#30340;&#29615;&#22659;&#12290;&#32780;&#25105;&#20204;&#24050;&#32463;
&#26377;&#36825;&#20010;&#29615;&#22659;&#20102;&#65306;&#23601;&#26159; <span class="texMathInline">\rho_1</span>&#65281;&#25152;&#20197;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}name</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure </span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho_1</span><span class="stt">))</span></p></td></tr></table></blockquote></li><li><p>&#22914;&#26524; <span class="texMathInline">var</span> &#19982; <span class="texMathInline">proc\mbox{-}name</span> &#19981;&#21516;&#65292;&#37027;&#20040;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-env </span><span class="texMathInline">\rho_1</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">) = (apply-env </span><span class="texMathInline">\rho</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">var</span><span class="stt">)</span></p></td></tr></table></blockquote></li></ol><p><span class="EoplFigureRef"></span> &#21644; <span class="stt">fig-3.11</span> &#23637;&#31034;&#20102;&#19968;&#20010;&#20363;&#23376;&#12290;
<span class="EoplFigureRef"></span> &#30340;&#26368;&#21518;&#19968;&#34892;&#36882;&#24402;&#35843;&#29992; <span class="stt">double</span>&#65292;&#25214;&#20986;&#20102;&#21407;&#26469;&#30340; <span class="stt">double</span>&#65292;
&#27491;&#21512;&#25152;&#24895;&#12290;</p><p>&#28385;&#36275;&#36825;&#20123;&#35201;&#27714;&#30340;&#20219;&#20309;&#26041;&#27861;&#37117;&#33021;&#22815;&#29992;&#26469;&#23454;&#29616; <span class="stt">extend-env-rec</span>&#12290;&#36825;&#37324;&#25105;&#20204;&#20351;&#29992;&#23545;&#24212;&#20110;&#25277;&#35937;
&#35821;&#27861;&#34920;&#31034;&#30340;&#26041;&#27861;&#12290;&#32451;&#20064;&#35752;&#35770;&#20102;&#20854;&#20182;&#23454;&#29616;&#31574;&#30053;&#12290;</p><p>&#22914;<span class="EoplFigureRef"></span>&#65292;&#22312;&#25277;&#35937;&#35821;&#27861;&#34920;&#31034;&#20013;&#65292;&#25105;&#20204;&#20026; <span class="stt">extend-env-rec</span> &#26032;&#22686;&#19968;&#31181;&#21464;
&#20307;&#12290;<span class="stt">apply-env</span> &#20498;&#25968;&#31532;&#20108;&#34892;&#30340; <span class="stt">env</span> &#23545;&#24212;&#19978;&#36848; <span class="texMathInline">\rho_1</span>&#12290;
<a name="(idx._(gentag._474))"></a></p><blockquote class="EoplFigure"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">(value-of &lt;&lt;letrec double(x) = if zero?(x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 0</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else -((double -(x,1)), -2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in (double 6)&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;(double 6)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;double&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;6&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of &lt;&lt;double&gt;&gt; (extend-env-rec double x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;if zero?(x) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">...</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(double -(x,1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr></table><blockquote class="caption"><p><span class="stt">extend-env-rec</span> &#35745;&#31639;&#36807;&#31243;<a name="(elem._fig-3..10)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;double&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;&lt;(double -(x,1))&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">6</span><span class="texMathInline">\rceil</span><span class="stt">](extend-env-rec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (-</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(procedure x &lt;&lt;if zero?(x) ...&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec double x &lt;&lt;if zero?(x) ...&gt;&gt; </span><span class="texMathInline">\rho_0</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">-2)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= ...</span></p></td></tr></table></div></p><blockquote class="caption"><p><span class="stt">extend-env-rec</span> &#35745;&#31639;&#36807;&#31243;&#65292;&#32493;<a name="(elem._fig-3..11)"></a></p></blockquote></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">environment</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">expval?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">environment</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env-rec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-name</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-name</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">p-body</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#21521;&#29615;&#22659;&#28155;&#21152; <span class="stt">extend-env-rec</span><a name="(elem._fig-3..12)"></a></p></blockquote></blockquote><p><a name="(idx._(gentag._475))"></a>
<a name="(idx._(gentag._476))"></a>
<a name="(idx._(gentag._477))"></a>
<a name="(idx._(gentag._478))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex3..30)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><span class="stt">apply-env</span> &#20498;&#25968;&#31532;&#20108;&#34892;&#35843;&#29992; <span class="stt">proc-val</span> &#30340;&#30446;&#30340;&#26159;&#20160;&#20040;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..31)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._479))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#21442;&#25968;&#30340;&#36807;&#31243;&#65292;&#20687;<span class="EoplExerciseRef"></span> &#37027;&#26679;&#12290;
<a name="(idx._(gentag._480))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..32)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._481))"></a>
<a name="(idx._(gentag._482))"></a>
<a name="(idx._(gentag._483))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#21333;&#21442;&#25968;&#20114;&#36882;&#24402;&#36807;&#31243;&#65292;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">letrec</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">even(x) = if zero?(x) then 1 else (odd -(x,1))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">odd(x)</span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">= if zero?(x) then 0 else (even -(x,1))</span></p></td></tr><tr><td><p><span class="stt">in (odd 13)</span></p></td></tr></table></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..33)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._484))"></a>
&#25193;&#23637;&#19978;&#38754;&#30340;&#35821;&#35328;&#65292;&#20801;&#35768;&#22768;&#26126;&#20219;&#24847;&#25968;&#37327;&#30340;&#20114;&#36882;&#24402;&#36807;&#31243;&#65292;&#27599;&#20010;&#36807;&#31243;&#30340;&#21442;&#25968;&#25968;&#37327;&#20063;&#20219;&#24847;&#65292;&#23601;
&#20687;<span class="EoplExerciseRef"></span> &#37027;&#26679;&#12290;
<a name="(idx._(gentag._485))"></a>
<a name="(idx._(gentag._486))"></a>
<a name="(idx._(gentag._487))"></a>
<a name="(idx._(gentag._488))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..34)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._489))"></a>
<a name="(idx._(gentag._490))"></a>
&#29992;<a href="da.html#%28part._s2..2..3%29" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a>&#20013;&#29615;&#22659;&#30340;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616; <span class="stt">extend-env-rec</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..35)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._491))"></a>
<a name="(idx._(gentag._492))"></a>
&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#30475;&#21040;&#30340;&#34920;&#31034;&#27861;&#37117;&#24456;&#20302;&#25928;&#65292;&#22240;&#20026;&#27599;&#27425;&#26597;&#25214;&#36807;&#31243;&#26102;&#65292;&#23427;&#20204;&#37117;&#35201;&#26032;&#21019;&#24314;&#19968;&#20010;&#38381;&#21253;&#65292;
&#20294;&#27599;&#27425;&#30340;&#38381;&#21253;&#37117;&#30456;&#21516;&#12290;&#25105;&#20204;&#21487;&#20197;&#21482;&#21019;&#24314;&#19968;&#27425;&#38381;&#21253;&#65292;&#25226;&#20540;&#25918;&#20837;&#38271;&#24230;&#20026; 1 &#30340;&#21521;&#37327;&#65292;&#20877;&#23558;&#20854;&#25918;&#20837;
&#19968;&#20010;&#26174;&#24335;&#24490;&#29615;&#32467;&#26500;&#20013;&#65292;&#20687;&#36825;&#26679;&#65306;</p><blockquote class="SCentered"><p><img src="vector-env.svg" alt="vector环境" width="799.2pt" height="174.6pt"/></p></blockquote><p>&#36825;&#37324;&#26159;&#21019;&#24314;&#36825;&#31181;&#25968;&#25454;&#32467;&#26500;&#30340;&#20195;&#30721;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env-rec</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">b-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">bodies</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">make-vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">length</span><span class="hspace">&nbsp;</span><span class="RktSym">p-names</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">new-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">p-names</span><span class="hspace">&nbsp;</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vector-set!</span><span class="hspace">&nbsp;</span><span class="RktSym">vec</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">b-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">new-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20462;&#25913;&#29615;&#22659;&#25968;&#25454;&#31867;&#22411;&#21644; <span class="stt">apply-env</span> &#30340;&#23450;&#20041;&#65292;&#23436;&#25104;&#36825;&#31181;&#34920;&#31034;&#30340;&#23454;&#29616;&#12290;&#30830;&#20445;
<span class="stt">apply-env</span> &#24635;&#26159;&#36820;&#22238;&#34920;&#36798;&#20540;&#12290;
<a name="(idx._(gentag._493))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..36)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._494))"></a>
<a name="(idx._(gentag._495))"></a>
<a name="(idx._(gentag._496))"></a>
&#25193;&#23637;&#36825;&#31181;&#23454;&#29616;&#65292;&#22788;&#29702;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#35821;&#35328;&#12290;
<a name="(idx._(gentag._497))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..37)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._498))"></a>
<a name="(idx._(gentag._499))"></a>
<a name="(idx._(gentag._500))"></a>
<a name="(idx._(gentag._501))"></a>
&#20351;&#29992;&#21160;&#24577;&#32465;&#23450;&#65288;<span class="EoplExerciseRef"></span>&#65289;&#65292;&#19981;&#38656;&#35201;&#20219;&#20309;&#29305;&#27530;&#26426;&#21046;&#65292;&#38752; <span class="stt">let</span> &#23601;&#33021;&#21019;&#24314;
&#36882;&#24402;&#36807;&#31243;&#12290;&#36825;&#26159;&#20986;&#20110;&#21382;&#21490;&#20852;&#36259;&#12290;&#22312;&#26089;&#24180;&#30340;&#32534;&#31243;&#35821;&#35328;&#35774;&#35745;&#20013;&#65292;<a href="#%28part._s3..4%29" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#35752;&#35770;&#30340;&#37027;&#20123;&#26041;&#27861;
&#36824;&#40092;&#20026;&#20154;&#30693;&#12290;&#35201;&#39564;&#35777;&#21160;&#24577;&#32465;&#23450;&#23454;&#29616;&#30340;&#36882;&#24402;&#65292;&#35797;&#35797;&#31243;&#24207;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let fact = proc (n) add1(n)</span></p></td></tr><tr><td><p><span class="stt">in let fact = proc (n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">if zero?(n)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">then 1</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else *(n, (fact -(n,1)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (fact 5)</span></p></td></tr></table></blockquote><p>&#35797;&#35797;&#35789;&#27861;&#32465;&#23450;&#65292;&#20877;&#35797;&#35797;&#21160;&#24577;&#32465;&#23450;&#12290;&#29992;&#21160;&#24577;&#32465;&#23450;&#30340;&#34987;&#23450;&#35821;&#35328;&#20889;&#20986;<a href="#%28part._s3..4%29" data-pltdoc="x">LETREC&#65306;&#25903;&#25345;&#36882;&#24402;&#36807;&#31243;&#30340;&#35821;&#35328;</a>&#20013;&#30340;&#20114;&#36882;&#24402;&#36807;
&#31243; <span class="stt">even</span> &#21644; <span class="stt">odd</span>&#12290;
<a name="(idx._(gentag._502))"></a>
<a name="(idx._(gentag._503))"></a>
<a name="(idx._(gentag._504))"></a>
<a name="(idx._(gentag._505))"></a>
<a name="(idx._(gentag._506))"></a>
<a name="(idx._(gentag._507))"></a>
<a name="(idx._(gentag._508))"></a></p></blockquote><h4>3.5<tt>&nbsp;</tt><a name="(part._s3..5)"></a>&#23450;&#30028;&#21644;&#21464;&#37327;&#32465;&#23450;</h4><p><a name="(idx._(gentag._509))"></a>
<a name="(idx._(gentag._510))"></a>
<a name="(idx._(gentag._511))"></a>
<a name="(idx._(gentag._512))"></a>
<a name="(idx._(gentag._513))"></a>
&#25105;&#20204;&#24050;&#32463;&#22312;&#24456;&#22810;&#22320;&#26041;&#35265;&#21040;&#36807;&#21464;&#37327;&#30340;&#22768;&#26126;&#21644;&#20351;&#29992;&#65292;&#29616;&#22312;&#25105;&#20204;&#26469;&#31995;&#32479;&#35752;&#35770;&#36825;&#20123;&#24605;&#24819;&#12290;</p><p>&#22312;&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#20013;&#65292;&#21464;&#37327;&#21482;&#33021;&#20197;&#20004;&#31181;&#26041;&#24335;&#20986;&#29616;&#65306;<span class="emph">&#24341;&#29992;</span> (<span class="emph">reference</span>)
&#25110;<span class="emph">&#22768;&#26126;</span> (<span class="emph">declaration</span>)&#12290;&#21464;&#37327;&#24341;&#29992;&#23601;&#26159;&#20351;&#29992;&#21464;&#37327;&#12290;&#20363;&#22914;&#65292;&#22312; Scheme &#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">f</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20013;&#20986;&#29616;&#30340;&#21464;&#37327; <span class="stt">f</span>&#12289;<span class="stt">x</span> &#21644; <span class="stt">y</span> &#22343;&#20026;&#24341;&#29992;&#12290;&#20294;&#22312;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#25110;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">let</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">y</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">+</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">x</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#31532;&#19968;&#20010;&#20986;&#29616;&#30340; <span class="stt">x</span> &#26159;&#22768;&#26126;&#65306;&#24341;&#20837;&#19968;&#20010;&#21464;&#37327;&#65292;&#20316;&#20026;&#26576;&#20010;&#20540;&#30340;&#21517;&#23383;&#12290;&#22312; <span class="stt">lambda</span>
&#34920;&#36798;&#24335;&#20013;&#65292;&#21464;&#37327;&#30340;&#20540;&#22312;&#36807;&#31243;&#35843;&#29992;&#26102;&#25552;&#20379;&#12290;&#22312; <span class="stt">let</span> &#34920;&#36798;&#24335;&#20013;&#65292;&#21464;&#37327;&#30340;&#20540;&#30001;&#34920;&#36798;&#24335;
<span class="stt">(+ y z)</span> &#27714;&#24471;&#12290;</p></blockquote><p>&#25105;&#20204;&#35828;&#21464;&#37327;&#24341;&#29992;&#30001;&#23545;&#24212;&#30340;&#22768;&#26126;<span class="emph">&#32465;&#23450;</span> (<span class="emph">bound</span>)&#65292;&#19988;<span class="emph">&#32465;&#23450;</span>&#21040;&#23427;&#30340;&#20540;&#12290;
&#22312;<a href="isd.html#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#65292;&#25105;&#20204;&#24050;&#32463;&#35265;&#36807;&#29992;&#22768;&#26126;&#32465;&#23450;&#21464;&#37327;&#30340;&#20363;&#23376;&#12290;</p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="simple-contour.svg" alt="简单等深线" width="535.5pt" height="198.0pt"/></p></blockquote></div></p><blockquote class="caption"><p>&#31616;&#21333;&#31561;&#28145;&#32447;<a name="(elem._fig-3..13)"></a></p></blockquote></blockquote><p>&#22823;&#22810;&#25968;&#32534;&#31243;&#35821;&#35328;&#20013;&#30340;&#22768;&#26126;&#37117;&#26377;&#26377;&#38480;&#30340;&#20316;&#29992;&#22495;&#65292;&#25152;&#20197;&#21516;&#19968;&#20010;&#21464;&#37327;&#21517;&#22312;&#31243;&#24207;&#30340;&#19981;&#21516;&#37096;&#20998;&#21487;&#29992;&#20110;&#19981;
&#21516;&#30340;&#30446;&#30340;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21453;&#22797;&#25226; <span class="stt">lst</span> &#29992;&#20316;&#32465;&#23450;&#21464;&#37327;&#65292;&#23427;&#30340;&#20316;&#29992;&#22495;&#27599;&#27425;&#37117;&#38480;&#21046;&#22312;&#23545;&#24212;&#30340;
<span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20027;&#20307;&#20869;&#12290;</p><p>&#27599;&#31181;&#32534;&#31243;&#35821;&#35328;&#37117;&#26377;&#19968;&#20123;&#35268;&#21017;&#26469;&#21028;&#26029;&#21508;&#20010;&#21464;&#37327;&#24341;&#29992;&#25351;&#20195;&#21738;&#19968;&#22768;&#26126;&#12290;&#36825;&#20123;&#35268;&#21017;&#36890;&#24120;
&#21483;&#20570;<span class="emph">&#23450;&#30028;</span> (<span class="emph">scoping</span>) &#35268;&#21017;&#12290;&#22768;&#26126;&#22312;&#31243;&#24207;&#20013;&#29983;&#25928;&#30340;&#37096;&#20998;&#21483;&#20570;&#22768;&#26126;
&#30340;<span class="emph">&#20316;&#29992;&#22495;</span> (<span class="emph">scope</span>)&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#19981;&#21152;&#25191;&#34892;&#22320;&#21028;&#26029;&#31243;&#24207;&#20013;&#30340;&#21508;&#20010;&#21464;&#37327;&#24341;&#29992;&#23545;&#24212;&#20110;&#21738;&#20010;&#22768;&#26126;&#12290;&#36825;&#26679;&#30340;&#24615;&#36136;&#19981;&#24517;&#25191;&#34892;&#31243;&#24207;
&#23601;&#33021;&#35745;&#31639;&#20986;&#26469;&#65292;&#21517;&#20026;<span class="emph">&#38745;&#24577;</span> (<span class="emph">static</span>) &#24615;&#36136;&#12290;
<a name="(idx._(gentag._514))"></a></p><p>&#35201;&#25214;&#20986;&#26576;&#20010;&#21464;&#37327;&#24341;&#29992;&#23545;&#24212;&#20110;&#21738;&#19968;&#22768;&#26126;&#65292;&#25105;&#20204;<span class="emph">&#21521;&#22806;</span> (<span class="emph">outward</span>) &#26597;&#25214;&#65292;&#30452;&#21040;&#25214;
&#20986;&#21464;&#37327;&#30340;&#22768;&#26126;&#12290;&#36825;&#37324;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340; Scheme &#31034;&#20363;&#12290;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(let ((x 3)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#31216;&#20043;&#20026; <span class="stt">x1</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(y 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(+ (let ((x</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#31216;&#20043;&#20026; <span class="stt">x2</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ y 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x y))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#36825;&#20010; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x2</span></span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x))</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="emph">&#36825;&#20010; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x1</span></span></p></td></tr></table></blockquote><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#20869;&#23618;&#30340; <span class="stt">x</span> &#32465;&#23450;&#21040; 9&#65292;&#25152;&#20197;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(let ((x 3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(y 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(+ (let ((x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ y 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x y))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">x))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ (let ((x</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(+ 4 5)))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ (let ((x 9))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(* x 4))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= (+ 36</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt">= 39</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._515))"></a>
&#36825;&#26679;&#30340;&#23450;&#30028;&#35268;&#21017;&#21483;&#20570;<span class="emph">&#35789;&#27861;&#23450;&#30028;</span> (<span class="emph">lexical scoping</span>) &#35268;&#21017;&#65292;&#36825;&#26679;&#22768;&#26126;&#30340;&#21464;&#37327;
&#21483;&#20570;<span class="emph">&#35789;&#27861;&#21464;&#37327;</span> (<span class="emph">lexical variable</span>)&#12290;
<a name="(idx._(gentag._516))"></a>
<a name="(idx._(gentag._517))"></a></p><p>&#20351;&#29992;&#35789;&#27861;&#23450;&#30028;&#65292;&#25105;&#20204;&#21487;&#20197;&#37325;&#26032;&#22768;&#26126;&#19968;&#20010;&#21464;&#37327;&#65292;&#32473;&#20316;&#29992;&#22495;&#25139;&#20010;&#8220;&#27934;
&#8221;&#12290;&#36825;&#26679;&#30340;&#20869;&#23618;&#22768;&#26126;<span class="emph">&#36974;&#34109;</span> (<span class="emph">shadow</span>) <a name="(idx._(gentag._518))"></a>
<a name="(idx._(gentag._519))"></a>
&#22806;&#23618;&#22768;&#26126;&#12290; &#20363;&#22914;&#65292;&#22312;&#19978;&#20363;&#30340;&#20056;&#24335; <span class="stt">(* x y)</span> &#20013;&#65292;&#20869;&#23618;&#30340; <span class="stt">x</span> &#36974;&#34109;&#20102;&#22806;&#23618;&#30340;&#12290;</p><p><a name="(idx._(gentag._520))"></a>
&#35789;&#27861;&#20316;&#29992;&#22495;&#26159;&#23884;&#22871;&#24335;&#30340;&#65306;&#27599;&#20010;&#20316;&#29992;&#22495;&#23436;&#20840;&#21253;&#35065;&#22312;&#21478;&#19968;&#20010;&#37324;&#38754;&#12290;&#25105;&#20204;&#29992;<span class="emph">&#31561;&#28145;&#32447;</span> (<span class="emph">contour
diagram</span>) &#35299;&#37322;&#36825;&#28857;&#12290;<span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#19978;&#20363;&#30340;&#31561;&#28145;&#32447;&#12290;&#27599;&#20010;&#20316;&#29992;&#22495;
&#29992;&#19968;&#20010;&#26694;&#22280;&#36215;&#26469;&#65292;&#31661;&#22836;&#36830;&#25509;&#22768;&#26126;&#19982;&#20854;&#20316;&#29992;&#22495;&#12290;</p><p><span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#19968;&#20010;&#26356;&#22797;&#26434;&#30340;&#31243;&#24207;&#21644;&#23427;&#30340;&#31561;&#28145;&#32447;&#12290;&#20854;&#20013;&#30340;&#31532; 5 &#34892;&#12289;&#31532; 7 &#34892;
&#21644;&#31532; 8 &#34892;&#65292;&#34920;&#36798;&#24335; <span class="stt">(+ x y z)</span> &#20986;&#29616;&#20102;&#19977;&#27425;&#12290;&#31532; 5 &#34892;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;
&#22495;&#20869;&#65292;<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312;
<span class="stt">x1</span> &#21644; <span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;5&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x2</span>&#65292;<span class="stt">y</span> &#25351;&#20195;
<span class="stt">y1</span>&#65292;<span class="stt">z</span> &#25351;&#20195; <span class="stt">z2</span>&#12290;&#31532; 7 &#34892;&#22312; <span class="stt">x4</span> &#21644; <span class="stt">y2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x4</span>
&#21644;<span class="stt">y2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;
&#22312;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x1</span> &#21644; <span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;
7&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x4</span>&#65292;<span class="stt">y</span> &#25351;&#20195; <span class="stt">y2</span>&#65292;<span class="stt">z</span> &#25351;&#20195; <span class="stt">z2</span>&#12290;&#26368;&#21518;&#65292;&#31532; 8
&#34892;&#22312; <span class="stt">x3</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">x3</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;
<span class="stt">x2</span> &#21644; <span class="stt">z2</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#65292;<span class="stt">z1</span> &#30340;&#20316;&#29992;&#22495;&#22312; <span class="stt">x1</span> &#21644;
<span class="stt">y1</span> &#30340;&#20316;&#29992;&#22495;&#20869;&#12290;&#25152;&#20197;&#65292;&#31532;8&#34892;&#30340; <span class="stt">x</span> &#25351;&#20195; <span class="stt">x3</span>&#65292;<span class="stt">y</span> &#25351;&#20195; <span class="stt">y1</span>&#65292;
<span class="stt">z</span> &#25351;&#20195;<span class="stt">z2</span>&#12290;</p><blockquote class="EoplFigure"><blockquote class="SCentered"><p><img src="complicated-contour.svg" alt="较复杂的等深线" width="598.5pt" height="213.0pt"/></p></blockquote><blockquote class="caption"><p>&#36739;&#22797;&#26434;&#30340;&#31561;&#28145;&#32447;<a name="(elem._fig-3..14)"></a></p></blockquote></blockquote><p>&#21464;&#37327;&#19982;&#20540;&#30340;&#23545;&#24212;&#20851;&#31995;&#21483;&#20570;<span class="emph">&#32465;&#23450;</span> (<span class="emph">binding</span>)&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#35268;&#33539;&#26469;&#29702;&#35299;&#22914;&#20309;&#21019;
&#24314;&#32465;&#23450;&#12290;</p><p><a name="(idx._(gentag._521))"></a>
<a name="(idx._(gentag._522))"></a>
&#30001; <span class="stt">proc</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#22312;&#36807;&#31243;&#35843;&#29992;&#26102;&#32465;&#23450;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._523))"></a>
<a name="(idx._(gentag._524))"></a>
<span class="stt">let</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#32465;&#23450;&#21040;&#22768;&#26126;&#21491;&#36793;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of (let-exp </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt">) </span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._525))"></a>
<a name="(idx._(gentag._526))"></a>
<span class="stt">letrec</span> &#22768;&#26126;&#30340;&#21464;&#37327;&#20063;&#35201;&#32465;&#23450;&#21040;&#22768;&#26126;&#21491;&#36793;&#30340;&#20540;&#12290;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(letrec-exp </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">letrec\mbox{-}body</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env-rec </span><span class="texMathInline">proc\mbox{-}name</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">bound\mbox{-}var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">proc\mbox{-}body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._527))"></a>
<a name="(idx._(gentag._528))"></a>
<a name="(idx._(gentag._529))"></a>
<a name="(idx._(gentag._530))"></a>
<a name="(idx._(gentag._531))"></a>
&#32465;&#23450;&#30340;<span class="emph">&#26399;&#38480;</span> (<span class="emph">extent</span>) &#25351;&#32465;&#23450;&#20445;&#25345;&#30340;&#26102;&#38271;&#12290;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;&#23601;&#20687;&#22312;
Scheme &#20013;&#19968;&#26679;&#65292;&#25152;&#26377;&#30340;&#32465;&#23450;&#37117;&#26159;<span class="emph">&#21322;&#26080;&#38480;</span> (<span class="emph">semi-infinite</span>) &#30340;&#65292;&#24847;&#24605;&#26159;&#21464;&#37327;
&#19968;&#26086;&#32465;&#23450;&#65292;&#35813;&#32465;&#23450;&#23601;&#35201;&#65288;&#33267;&#23569;&#26159;&#26377;&#21487;&#33021;&#65289;&#26080;&#38480;&#26399;&#22320;&#20445;&#30041;&#12290;&#36825;&#26159;&#22240;&#20026;&#32465;&#23450;&#21487;&#33021;&#38544;&#34255;&#22312;&#24050;&#36820;&#22238;&#30340;
&#38381;&#21253;&#20043;&#20013;&#12290;&#22312;&#21322;&#26080;&#38480;&#30340;&#35821;&#35328;&#20013;&#65292;&#22403;&#22334;&#22238;&#25910;&#22120;&#25910;&#38598;&#19981;&#33021;&#20877;&#35775;&#38382;&#30340;&#32465;&#23450;&#12290;&#36825;&#21482;&#33021;&#22312;&#36816;&#34892;&#26102;&#21028;&#23450;&#65292;
&#22240;&#27492;&#25105;&#20204;&#35828;&#36825;&#26159;&#19968;&#26465;<span class="emph">&#21160;&#24577;</span> (<span class="emph">dynamic</span>) &#24615;&#36136;&#12290;</p><p>&#24456;&#21487;&#24796;&#30340;&#26159;&#65292;&#8220;&#21160;&#24577;&#8221;&#26377;&#26102;&#34920;&#31034;&#8220;&#22312;&#34920;&#36798;&#24335;&#27714;
&#20540;&#26399;&#38388;&#8221;&#65292;&#26377;&#26102;&#21448;&#34920;&#31034;&#8220;&#26080;&#27861;&#20107;&#20808;&#35745;&#31639;&#8221;&#12290;&#22914;
&#26524;&#25105;&#20204;&#19981;&#20801;&#35768; <span class="stt">let</span> &#30340;&#20540;&#20026;&#36807;&#31243;&#65292;&#37027;&#20040; let &#32465;&#23450;&#20250;&#22312; <span class="stt">let</span> &#20027;&#20307;&#27714;&#20540;&#32467;&#26463;&#26102;&#21040;&#26399;&#12290;
&#36825;&#21483;&#20570;<span class="emph">&#21160;&#24577;</span>&#26399;&#38480;&#65292;&#32780;&#23427;&#26159;&#19968;&#26465;<span class="emph">&#38745;&#24577;</span>&#24615;&#36136;&#12290;
<a name="(idx._(gentag._532))"></a>
&#22240;&#20026;&#36825;&#31181;&#26399;&#38480;&#26159;&#19968;&#26465;&#38745;&#24577;&#24615;&#36136;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20934;&#30830;&#39044;&#27979;&#32465;&#23450;&#20309;&#26102;&#21487;&#20197;&#25243;&#24323;&#12290;
<span class="stt">ex3.28</span> &#31561;&#20960;&#36947;&#32451;&#20064;&#20013;&#30340;&#21160;&#24577;&#32465;&#23450;&#34920;&#29616;&#31867;&#20284;&#12290;
<a name="(idx._(gentag._533))"></a>
<a name="(idx._(gentag._534))"></a>
<a name="(idx._(gentag._535))"></a>
<a name="(idx._(gentag._536))"></a>
<a name="(idx._(gentag._537))"></a>
<a name="(idx._(gentag._538))"></a></p><h4>3.6<tt>&nbsp;</tt><a name="(part._s3..6)"></a>&#28040;&#38500;&#21464;&#37327;&#21517;</h4><p><a name="(idx._(gentag._539))"></a>
<a name="(idx._(gentag._540))"></a>
<a name="(idx._(gentag._541))"></a>
<a name="(idx._(gentag._542))"></a>
<a name="(idx._(gentag._543))"></a>
&#23450;&#30028;&#31639;&#27861;&#30340;&#25191;&#34892;&#36807;&#31243;&#21487;&#20197;&#30475;&#20316;&#22987;&#33258;&#21464;&#37327;&#24341;&#29992;&#30340;&#22806;&#20986;&#26053;&#34892;&#12290;&#22312;&#26053;&#36884;&#20013;&#65292;&#21040;&#36798;&#23545;&#24212;&#30340;&#22768;&#26126;&#20043;&#21069;&#21487;
&#33021;&#20250;&#36328;&#36234;&#22810;&#26465;&#31561;&#28145;&#32447;&#12290;&#36328;&#36234;&#30340;&#31561;&#28145;&#32447;&#25968;&#30446;&#21483;&#20570;&#21464;&#37327;&#24341;&#29992;&#30340;<span class="emph">&#35789;&#28145;</span> (<span class="emph">lexical
depth</span>)&#65288;&#25110;<span class="emph">&#38745;&#28145;</span> (<span class="emph">static depth</span>)&#65289;&#12290;&#30001;&#20110;&#24815;&#29992;&#8220;&#20174;0&#24320;&#22987;&#30340;
&#32034;&#24341;&#8221;&#65292;&#25152;&#20197;&#19981;&#35745;&#26368;&#21518;&#36328;&#36807;&#30340;&#31561;&#28145;&#32447;&#12290;&#20363;&#22914;&#65292;&#22312; Scheme &#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20013;&#65292;&#26368;&#21518;&#19968;&#34892; <span class="stt">x</span> &#30340;&#24341;&#29992;&#20197;&#21450; <span class="stt">a</span> &#30340;&#24341;&#29992;&#35789;&#28145;&#22343;&#20026; 0&#65292;&#32780;&#31532;&#19977;&#34892; <span class="stt">x</span> &#30340;&#24341;&#29992;&#35789;
&#28145;&#20026; 1&#12290;</p></blockquote><p>&#22240;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#23436;&#20840;&#28040;&#38500;&#21464;&#37327;&#21517;&#65292;&#20889;&#25104;&#36825;&#26679;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(nameless-lambda</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">((nameless-lambda</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(#1 #0))</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">#0))</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#27599;&#20010; <span class="stt">nameless-lambda</span> &#37117;&#22768;&#26126;&#20102;&#19968;&#20010;&#26032;&#30340;&#26080;&#21517;&#21464;&#37327;&#65292;&#27599;&#20010;&#21464;&#37327;&#24341;&#29992;&#30001;&#20854;&#35789;&#28145;&#26367;
&#20195;&#65307;&#36825;&#20010;&#25968;&#23383;&#20934;&#30830;&#26631;&#31034;&#20102;&#35201;&#20351;&#29992;&#30340;&#22768;&#26126;&#12290;&#36825;&#20123;&#25968;&#23383;&#21483;&#20570;<span class="emph">&#35789;&#27861;&#22320;&#22336;</span> (<span class="emph">lexical
address</span>) &#25110;<span class="emph">&#24503;&#24067;&#40065;&#37329;&#32034;&#24341;</span> (<span class="emph">de Bruijn index</span>)&#12290;&#32534;&#35793;&#22120;&#20363;&#34892;&#35745;&#31639;&#27599;&#20010;&#21464;&#37327;
&#24341;&#29992;&#30340;&#35789;&#27861;&#22320;&#22336;&#12290;&#38500;&#38750;&#29992;&#26469;&#25552;&#20379;&#35843;&#35797;&#20449;&#24687;&#65292;&#35745;&#31639;&#19968;&#26086;&#23436;&#25104;&#65292;&#21464;&#37327;&#21517;&#21363;&#21487;&#20002;&#24323;&#12290;</p></blockquote><p>&#36825;&#26679;&#35760;&#24405;&#20449;&#24687;&#26377;&#29992;&#65292;&#22240;&#20026;&#35789;&#27861;&#22320;&#22336;<span class="emph">&#39044;&#27979;</span>&#20102;&#24590;&#26679;&#20174;&#29615;&#22659;&#20013;&#25214;&#20986;&#26576;&#20010;&#21464;&#37327;&#12290;</p><p>&#32771;&#34385;&#25105;&#20204;&#35821;&#35328;&#20013;&#30340;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = </span><span class="texMathInline">exp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt">in let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#22312;&#24046;&#20540;&#34920;&#36798;&#24335;&#20013;&#65292;<span class="stt">y</span> &#21644; <span class="stt">x</span> &#30340;&#35789;&#28145;&#20998;&#21035;&#20026;0&#21644;1&#12290;</p></blockquote><p>&#29616;&#22312;&#20551;&#35774;&#22312;&#26576;&#20010;&#36866;&#24403;&#29615;&#22659;&#20013;&#27714;&#24471; <span class="texMathInline">exp_1</span> &#21644; <span class="texMathInline">exp_2</span> &#30340;&#20540;&#65292;&#20998;&#21035;&#20026; <span class="texMathInline">val_1</span> &#21644;
<span class="texMathInline">val_2</span>&#65292;&#37027;&#20040;&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;</p><blockquote class="SubFlow"><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let x = </span><span class="texMathInline">exp_1</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let y = </span><span class="texMathInline">exp_2</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">=</span></p></td></tr><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;-(x,y)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">[y=</span><span class="texMathInline">val_2</span><span class="stt">][x=</span><span class="texMathInline">val_1</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#25152;&#20197;&#65292;&#27714;&#24046;&#20540;&#34920;&#36798;&#24335;&#30340;&#20540;&#26102;&#65292;<span class="stt">y</span> &#28145;&#24230;&#20026; 0&#65292;<span class="stt">x</span> &#28145;&#24230;&#20026; 1&#65292;&#27491;&#22914;&#35789;&#28145;&#39044;&#27979;&#30340;&#37027;&#26679;&#12290;</p></blockquote><p>&#22914;&#26524;&#29992;&#20851;&#32852;&#21015;&#34920;&#34920;&#31034;&#29615;&#22659;&#65288;&#35265;<span class="EoplExerciseRef"></span>&#65289;&#65292;&#37027;&#20040;&#29615;&#22659;&#30475;&#36215;&#26469;&#20687;&#26159;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><img src="lexical-addr-env.svg" alt="关联列表表示的词法地址环境" width="289.8pt" height="165.6pt"/></p></blockquote><p>&#25152;&#20197;&#19981;&#35770; <span class="texMathInline">val_1</span> &#21644; <span class="texMathInline">val_2</span> &#20540;&#20026;&#20309;&#65292;<span class="stt">x</span> &#21644; <span class="stt">y</span> &#30340;&#20540;&#37117;&#26159;&#21462;&#29615;&#22659;&#20013;&#31532; 1 &#20010;
&#20803;&#32032;&#30340;&#20313;&#39033;&#21644;&#31532; 0 &#20010;&#20803;&#32032;&#30340;&#20313;&#39033;&#12290;</p></blockquote><p>&#36807;&#31243;&#30340;&#20027;&#20307;&#20063;&#26159;&#36825;&#26679;&#12290;&#32771;&#34385;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let a = 5</span></p></td></tr><tr><td><p><span class="stt">in proc (x) -(x,1)</span></p></td></tr></table></blockquote><p>&#22312;&#36807;&#31243;&#30340;&#20027;&#20307;&#20013;&#65292;<span class="stt">x</span> &#30340;&#35789;&#28145;&#26159; 0&#65292;<span class="stt">a</span> &#30340;&#35789;&#28145;&#26159; 1&#12290;</p></blockquote><p>&#36825;&#20010;&#34920;&#36798;&#24335;&#30340;&#20540;&#20026;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(value-of</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;&lt;let a = 5 in proc (x) -(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;proc (x) -(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(extend-env a </span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr><tr><td><p><span class="stt">= (proc-val (procedure x &lt;&lt;-(x,a)&gt;&gt; [a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><p>&#36825;&#20010;&#36807;&#31243;&#30340;&#20027;&#20307;&#21482;&#33021;&#36890;&#36807; <span class="stt">apply-procedure</span> &#27714;&#20540;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(procedure x &lt;&lt;-(x,a)&gt;&gt; [a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of &lt;&lt;-(x,a)&gt;&gt;</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[x=</span><span class="texMathInline">\lceil</span><span class="stt">7</span><span class="texMathInline">\rceil</span><span class="stt">][a=</span><span class="texMathInline">\lceil</span><span class="stt">5</span><span class="texMathInline">\rceil</span><span class="stt">]</span><span class="texMathInline">\rho</span><span class="stt">)</span></p></td></tr></table></blockquote><p>&#27599;&#20010;&#21464;&#37327;&#21448;&#19968;&#27425;&#20986;&#29616;&#22312;&#35789;&#28145;&#39044;&#27979;&#30340;&#29615;&#22659;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._544))"></a>
<a name="(idx._(gentag._545))"></a></p><h4>3.7<tt>&nbsp;</tt><a name="(part._s3..7)"></a>&#23454;&#29616;&#35789;&#27861;&#22320;&#22336;</h4><p><a name="(idx._(gentag._546))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#26469;&#23454;&#29616;&#19978;&#36848;&#35789;&#27861;&#22320;&#22336;&#20998;&#26512;&#12290;&#25105;&#20204;&#20889;&#20986;&#36807;&#31243; <span class="stt">translation-of-program</span>&#65292;&#23427;&#21462;
&#19968;&#31243;&#24207;&#65292;&#20174;&#22768;&#26126;&#20013;&#31227;&#38500;&#25152;&#26377;&#21464;&#37327;&#65292;&#24182;&#23558;&#27599;&#20010;&#21464;&#37327;&#24341;&#29992;&#26367;&#25442;&#20026;&#35789;&#28145;&#12290;</p><p>&#20363;&#22914;&#65292;&#31243;&#24207;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><a name="(elem._s3..7-eg)"></a><span class="stt">let x = 37</span></p></td></tr><tr><td><p><span class="stt">in proc (y)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">let z = -(y,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">in -(x,y)</span></p></td></tr></table></blockquote><p>&#23558;&#32763;&#35793;&#20026;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">37</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-proc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">struct:nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktVal">)</span></td></tr></table></blockquote></blockquote><p>&#28982;&#21518;&#65292;&#25105;&#20204;&#20889;&#20986;&#26032;&#29256;&#30340; <span class="stt">value-of-program</span> &#26469;&#27714;&#26080;&#21517;&#31243;&#24207;&#30340;&#20540;&#65292;&#23427;&#19981;&#38656;&#35201;&#25226;&#21464;&#37327;&#25918;&#20837;
&#29615;&#22659;&#20013;&#12290;</p></blockquote><h5>3.7.1<tt>&nbsp;</tt><a name="(part._s3..7..1)"></a>&#32763;&#35793;&#22120;</h5><p>&#22240;&#20026;&#26159;&#20889;&#32763;&#35793;&#22120;&#65292;&#25105;&#20204;&#24471;&#30693;&#36947;&#28304;&#35821;&#35328;&#21644;&#30446;&#26631;&#35821;&#35328;&#12290;&#30446;&#26631;&#35821;&#35328;&#20013;&#30340;&#26576;&#20123;&#37096;&#20998;&#28304;&#35821;&#35328;&#20013;&#27809;&#26377;&#65292;&#20363;
&#22914; <span class="stt">nameless-var-exp</span> &#21644; <span class="stt">nameless-let-exp</span>&#65307;&#28304;&#35821;&#35328;&#20013;&#30340;&#26576;&#20123;&#37096;&#20998;&#30446;&#26631;&#35821;&#35328;&#20013;
&#27809;&#26377;&#65292;&#23427;&#20204;&#30001;&#21518;&#32773;&#20013;&#30340;&#23545;&#24212;&#32467;&#26500;&#21462;&#20195;&#65292;&#20363;&#22914; <span class="stt">var-exp</span> &#21644; <span class="stt">let-exp</span>&#12290;</p><p>&#25105;&#20204;&#21487;&#20197;&#20026;&#27599;&#31181;&#35821;&#35328;&#20889;&#19968;&#20010; <span class="stt">define-datatype</span>&#65292;&#20063;&#21487;&#20197;&#35753;&#20108;&#32773;&#20849;&#29992;&#19968;&#20010;&#12290;&#22240;&#20026;&#25105;&#20204;&#20351;
&#29992;&#30340;&#21069;&#31471;&#26159; SLLGEN&#65292;&#21518;&#32773;&#26356;&#23481;&#26131;&#12290;&#25105;&#20204;&#32473; SLLGEN &#30340;&#35821;&#27861;&#28155;&#21152;&#29983;&#25104;&#24335;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Expression} &amp;::= <span class="stt">%lexref </span><span class="Iidentity">\mathit{number}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-var-exp (num)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">%let </span><span class="Iidentity">\mathit{Expression}</span><span class="stt"> in </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-let-exp (exp1 body)</span>} \\[5pt]
\mathit{Expression} &amp;::= <span class="stt">%lexproc </span><span class="Iidentity">\mathit{Expression}</span> \\[-3pt]
  &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">nameless-proc-exp (body)</span>}\end{align*}</span></p><p>&#26032;&#30340;&#26500;&#36896;&#22120;&#21517;&#23383;&#29992; <span class="stt">%</span> &#24320;&#22836;&#65292;&#22240;&#20026;&#22312;&#25105;&#20204;&#30340;&#35821;&#35328;&#20013;&#65292;<span class="stt">%</span> &#36890;&#24120;&#26159;&#27880;&#37322;&#23383;&#31526;&#12290;</p><p>&#25105;&#20204;&#30340;&#32763;&#35793;&#22120;&#23558;&#25298;&#32477;&#20219;&#20309;&#21547;&#26377;&#26080;&#21517;&#32467;&#26500;&#65288;<span class="stt">nameless-var-exp</span>&#12289;<span class="stt">nameless-let-exp</span>
&#25110; <span class="stt">nameless-proc-exp</span>&#65289;&#30340;&#31243;&#24207;&#12290;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#23558;&#25298;&#32477;&#20219;&#20309;&#21547;&#26377;&#21407;&#20808;&#20855;&#21517;&#32467;&#26500;
&#65288;<span class="stt">var-exp</span>&#12289;<span class="stt">let-exp</span> &#25110; <span class="stt">proc-exp</span>&#65289;&#30340;&#31243;&#24207;&#65292;&#22240;&#20026;&#23427;&#20204;&#29702;&#24212;&#34987;&#26367;&#25442;&#12290;</p><p>&#35201;&#35745;&#31639;&#20219;&#20309;&#21464;&#37327;&#24341;&#29992;&#30340;&#35789;&#27861;&#22320;&#22336;&#65292;&#25105;&#20204;&#38656;&#35201;&#23427;&#25152;&#22312;&#30340;&#20316;&#29992;&#22495;&#12290;&#36825;&#26159;&#19968;&#31181;<span class="emph">&#19978;&#19979;&#25991;</span> (<span class="emph">context</span>) &#20449;&#24687;&#65292;&#25152;&#20197;&#23427;&#21644;<a href="isd.html#%28part._s1..3%29" data-pltdoc="x">&#36741;&#21161;&#36807;&#31243;&#21644;&#19978;&#19979;&#25991;&#21442;&#25968;</a>&#30340;&#32487;&#25215;&#23646;&#24615;&#31867;&#20284;&#12290;</p><p><a name="(idx._(gentag._547))"></a>
<a name="(idx._(gentag._548))"></a>
&#25152;&#20197; <span class="stt">translation-of-program</span> &#23558;&#21462;&#20004;&#20010;&#21442;&#25968;&#65306;&#19968;&#20010;&#34920;&#36798;&#24335;&#21644;&#19968;&#20010;<span class="emph">&#38745;&#24577;&#29615;&#22659;</span> (<span class="emph">static
environment</span>)&#12290;&#38745;&#24577;&#29615;&#22659;&#26159;&#19968;&#20010;&#21464;&#37327;&#21015;&#34920;&#65292;&#34920;&#31034;&#24403;&#21069;&#34920;&#36798;&#24335;&#25152;&#22312;&#30340;&#20316;&#29992;&#22495;&#12290;&#26368;
&#20869;&#37096;&#20316;&#29992;&#22495;&#22768;&#26126;&#30340;&#21464;&#37327;&#25104;&#20026;&#21015;&#34920;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#12290;</p><p>&#20363;&#22914;&#65292;&#32763;&#35793;&#19978;&#20363;&#20013;&#30340;&#26368;&#21518;&#19968;&#34892;&#26102;&#65292;&#38745;&#24577;&#29615;&#22659;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><span class="stt">(z y x)</span></p></blockquote><p>&#25152;&#20197;&#65292;&#22312;&#38745;&#24577;&#29615;&#22659;&#20013;&#25628;&#32034;&#21464;&#37327;&#23601;&#26159;&#26597;&#25214;&#23427;&#22312;&#38745;&#24577;&#29615;&#22659;&#20013;&#30340;&#20301;&#32622;&#65292;&#20063;&#23601;&#26159;&#35789;&#27861;&#22320;&#22336;&#65306;&#26597;&#24471;
<span class="stt">x</span> &#20026; 2&#65292;<span class="stt">y</span> &#20026; 1&#65292;<span class="stt">z</span> &#20026; 0&#12290;</p></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Senv}</span> = <span class="texMathInline">\mathit{Listof}</span><span class="stt">(</span><span class="texMathInline">\mathit{Sym}</span><span class="stt">)</span></td></tr><tr><td><span class="texMathInline">\mathit{Lexaddr}</span> = <span class="texMathInline">\mathit{N}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-senv</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-senv</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{Senv} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-senv</span></span> : <span class="texMathInline">\mathit{Senv} \times \mathit{Var} \to \mathit{Lexaddr}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-senv</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#23454;&#29616;&#38745;&#24577;&#29615;&#22659;<a name="(elem._fig-3..15)"></a></p></blockquote></blockquote><p>&#36827;&#20837;&#26032;&#30340;&#20316;&#29992;&#22495;&#23601;&#35201;&#32473;&#38745;&#24577;&#29615;&#22659;&#28155;&#21152;&#19968;&#20010;&#26032;&#20803;&#32032;&#12290;&#25105;&#20204;&#28155;&#21152;&#36807;&#31243; <span class="stt">extend-senv</span> &#26469;&#23436;&#25104;
&#36825;&#19968;&#27493;&#12290;</p><p>&#30001;&#20110;&#38745;&#24577;&#29615;&#22659;&#21482;&#26159;&#21464;&#37327;&#21015;&#34920;&#65292;&#36825;&#20123;&#36807;&#31243;&#24456;&#23481;&#26131;&#23454;&#29616;&#65292;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;</p><p>&#32763;&#35793;&#22120;&#26377;&#20004;&#20010;&#36807;&#31243;&#65306;<span class="stt">translation-of</span> &#22788;&#29702;&#34920;&#36798;&#24335;&#65292;<span class="stt">translation-of-program</span> &#22788;
&#29702;&#31243;&#24207;&#12290;</p><p><span class="stt">senv</span> &#34920;&#31034;&#19968;&#20123;&#22768;&#26126;&#65292;&#25105;&#20204;&#20174;&#20013;&#32763;&#35793;&#34920;&#36798;&#24335; <span class="stt">e</span>&#12290;&#35201;&#23436;&#25104;&#36825;&#28857;&#65292;&#25105;&#20204;&#20687;<span class="EoplExerciseRef"></span> &#25110;
<span class="stt">ex2.26</span> &#37027;&#26679;&#36882;&#24402;&#22797;&#21046;&#35821;&#27861;&#26641;&#65292;&#38500;&#20102;<br/></p><blockquote class="SubFlow"><ol><li><p>&#35843;&#29992; <span class="stt">apply-senv</span>&#65292;&#29992;&#27491;&#30830;&#30340;&#35789;&#27861;&#22320;&#22336;&#65292;&#25226;&#27599;&#20010; <span class="stt">var-exp</span> &#26367;&#25442;&#20026;
<span class="stt">nameless-var-exp</span>&#12290;</p></li><li><p>&#25226;&#27599;&#20010; <span class="stt">let-exp</span> &#26367;&#25442;&#20026;&#19968;&#20010; <span class="stt">nameless-let-exp</span>&#12290;&#26032;&#34920;&#36798;&#24335;&#30340;&#21491;&#20391;&#30001;&#26087;
&#34920;&#36798;&#24335;&#30340;&#21491;&#20391;&#35793;&#24471;&#12290;&#23427;&#19982;&#21407;&#24335;&#30340;&#20316;&#29992;&#22495;&#30456;&#21516;&#65292;&#25152;&#20197;&#25105;&#20204;&#22312;&#21516;&#26679;&#30340;&#38745;&#24577;&#29615;&#22659; <span class="stt">senv</span> &#20013;&#32763;
&#35793;&#23427;&#12290;&#26032;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#30001;&#26087;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#35793;&#24471;&#12290;&#20294;&#26159;&#20027;&#20307;&#20301;&#20110;&#26032;&#30340;&#20316;&#29992;&#22495;&#20869;&#65292;&#22810;&#20102;&#19968;&#20010;&#32465;
&#23450;&#21464;&#37327; <span class="texMathInline">var</span>&#12290;&#25152;&#20197;&#25105;&#20204;&#22312;&#38745;&#24577;&#29615;&#22659; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">senv</span><span class="stt">)</span> &#20013;&#32763;&#35793;&#20027;
&#20307;&#12290;</p></li><li><p>&#25226;&#27599;&#20010; <span class="stt">proc-exp</span> &#26367;&#25442;&#20026;&#19968;&#20010; <span class="stt">nameless-proc-exp</span>&#65292;&#20027;&#20307;&#22312;&#26032;&#30340;&#20316;&#29992;&#22495;
&#20869;&#35793;&#24471;&#65292;&#35813;&#20316;&#29992;&#22495;&#30001;&#38745;&#24577;&#29615;&#22659; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> senv)</span> &#34920;&#31034;&#12290;</p></li></ol><p><span class="stt">translation-of</span> &#20195;&#30721;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;</p></blockquote><p>&#36807;&#31243; <span class="stt">translation-of-program</span> &#22312;&#36866;&#24403;&#30340;&#21021;&#22987;&#38745;&#24577;&#29615;&#22659;&#20013;&#25191;&#34892; <span class="stt">translation-of</span>&#12290;
<a name="(idx._(gentag._549))"></a>
<a name="(idx._(gentag._550))"></a></p><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{Exp} \times \mathit{Senv} \to \mathit{Nameless\mbox{-}exp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">translation-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-proc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-source-expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;
<a name="(idx._(gentag._551))"></a><a name="(elem._fig-3..16)"></a></p></blockquote></blockquote><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{Program} \to \mathit{Nameless\mbox{-}exp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">translation-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">translation-of</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Senv}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-senv</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">i</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">v</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-senv</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-senv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._552))"></a></div></p></blockquote><h5>3.7.2<tt>&nbsp;</tt><a name="(part._s3..7..2)"></a>&#26080;&#21517;&#35299;&#37322;&#22120;</h5><p>&#20973;&#20511;&#35789;&#27861;&#22320;&#22336;&#20998;&#26512;&#22120;&#30340;&#39044;&#27979;&#65292;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#19981;&#24517;&#22312;&#36816;&#34892;&#26102;&#30452;&#25509;&#25628;&#32034;&#21464;&#37327;&#12290;</p><p>&#30001;&#20110;&#25105;&#20204;&#30340;&#31243;&#24207;&#20013;&#27809;&#26377;&#20219;&#20309;&#21464;&#37327;&#65292;&#25105;&#20204;&#19981;&#33021;&#25226;&#21464;&#37327;&#25918;&#20837;&#29615;&#22659;&#20013;&#65307;&#20294;&#26159;&#22240;&#20026;&#25105;&#20204;&#26126;&#30830;&#30693;&#36947;&#22914;&#20309;
&#20174;&#29615;&#22659;&#20013;&#23547;&#25214;&#23427;&#20204;&#65292;&#25105;&#20204;&#19981;&#38656;&#35201;&#65281;</p><p>&#25105;&#20204;&#30340;&#39030;&#23618;&#36807;&#31243;&#26159; <span class="stt">run</span>&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">run</span></span> : <span class="texMathInline">\mathit{String} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">run</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">translation-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">scan&amp;parse</span><span class="hspace">&nbsp;</span><span class="RktSym">string</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._553))"></a>
<a name="(idx._(gentag._554))"></a>
&#25105;&#20204;&#19981;&#29992;&#20840;&#21151;&#33021;&#30340;&#29615;&#22659;&#65292;&#32780;&#26159;&#29992;&#26080;&#21517;&#29615;&#22659;&#65292;&#20854;&#25509;&#21475;&#22914;&#19979;&#65306;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">nameless-environment?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">empty-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{()} \to \mathit{Nameless\mbox{-}env}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">extend-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{ExpVal} \times \mathit{Nameless\mbox{-}env} \to \mathit{Nameless\mbox{-}env}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">apply-nameless-env</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Nameless\mbox{-}env} \times \mathit{Lexaddr} \to \mathit{DenVal}</span></p></td></tr></table></blockquote><p>&#25105;&#20204;&#21487;&#20197;&#29992;&#25351;&#20195;&#20540;&#21015;&#34920;&#23454;&#29616;&#26080;&#21517;&#29615;&#22659;&#65292;&#36825;&#26679; <span class="stt">apply-nameless-env</span> &#21482;&#38656;&#35843;&#29992;
<span class="stt">list-ref</span>&#12290;&#36825;&#31181;&#23454;&#29616;&#22914;<span class="EoplFigureRef"></span> &#25152;&#31034;&#12290;</p><p><span class="stt">s3.7-eg</span>&#20363;&#23376;&#20013;&#26368;&#21518;&#19968;&#34892;&#30340;&#26080;&#21517;&#29615;&#22659;&#22914;&#19979;</p><blockquote class="SCentered"><p><img src="nameless-env.svg" alt="无名环境" width="365.4pt" height="77.4pt"/></p></blockquote><p>&#30001;&#20110;&#26356;&#25913;&#20102;&#29615;&#22659;&#25509;&#21475;&#65292;&#25105;&#20204;&#38656;&#35201;&#26597;&#30475;&#20195;&#30721;&#20013;&#25152;&#26377;&#20381;&#36182;&#36825;&#22871;&#25509;&#21475;&#30340;&#22320;&#26041;&#12290;&#25105;&#20204;&#30340;&#35299;&#37322;&#22120;&#20013;&#20351;&#29992;
&#29615;&#22659;&#30340;&#21482;&#26377;&#20004;&#22788;&#65306;&#36807;&#31243;&#21644; <span class="stt">value-of</span>&#12290;</p><p>&#20462;&#25913;&#36807;&#31243;&#35268;&#33539;&#26102;&#65292;&#21482;&#38656;&#25226;&#26087;&#35268;&#33539;&#20013;&#30340;&#21464;&#37327;&#21517;&#31227;&#38500;&#65306;</p><blockquote class="EoplEquationInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">(apply-procedure (procedure </span><span class="texMathInline">var</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">) </span><span class="texMathInline">val</span><span class="stt">)</span></p></td></tr><tr><td><p><span class="stt">= (value-of </span><span class="texMathInline">body</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt">(extend-nameless-env </span><span class="texMathInline">val</span><span class="stt"></span><span class="hspace">&nbsp;</span><span class="stt"></span><span class="texMathInline">\rho</span><span class="stt">))</span></p></td></tr></table></blockquote><blockquote class="EoplFigure"><p><div class="SIntrapara">[!ht]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">nameless-environment?</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-environment?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp-val?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-nameless-env</span></span> : <span class="texMathInline">\mathit{()} \to \mathit{Nameless\mbox{-}env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-nameless-env</span></span> : <span class="texMathInline">\mathit{Expval} \times \mathit{Nameless\mbox{-}env} \to \mathit{Nameless\mbox{-}env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-nameless-env</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}env} \times \mathit{Lexaddr} \to \mathit{DenVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-nameless-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-ref</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><blockquote class="caption"><p>&#26080;&#21517;&#29615;&#22659;
<a name="(idx._(gentag._555))"></a>
<a name="(idx._(gentag._556))"></a><a name="(elem._fig-3..17)"></a></p></blockquote></blockquote><p>&#36825;&#19968;&#35268;&#33539;&#30340;&#23454;&#29616;&#21487;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">procedure</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}exp} \times \mathit{Nameless\mbox{-}env} \to \mathit{Proc}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">expression?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-environment?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-procedure</span></span> : <span class="texMathInline">\mathit{Proc} \times \mathit{ExpVal} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc1</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">proc</span><span class="hspace">&nbsp;</span><span class="RktSym">proc1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><a name="(idx._(gentag._557))"></a>
&#29616;&#22312;&#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#20986; <span class="stt">value-of</span>&#12290;&#23427;&#30340;&#22823;&#37096;&#20998;&#19982;&#21069;&#19968;&#20010;&#35299;&#37322;&#22120;&#30456;&#21516;&#65292;&#21482;&#26159;&#21407;&#20808;&#20351;&#29992;
<span class="stt">env</span> &#30340;&#22320;&#26041;&#29616;&#22312;&#29992; <span class="stt">nameless-env</span>&#12290;&#20294;&#25105;&#20204;&#35201;&#22788;&#29702;&#26032;&#30340;&#37096;&#20998;&#65306;
<span class="stt">nameless-var-exp</span>&#12289;<span class="stt">nameless-let-exp</span> &#21644; <span class="stt">nameless-proc-exp</span>&#65292;&#23427;&#20204;&#20998;&#21035;
&#21462;&#20195;&#23545;&#24212;&#30340; <span class="stt">var-exp</span>&#12289;<span class="stt">let-exp</span> &#21644; <span class="stt">proc-exp</span>&#12290;&#20854;&#23454;&#29616;&#22914;<span class="EoplFigureRef"></span>
&#25152;&#31034;&#12290;<span class="stt">nameless-var-exp</span> &#29992;&#20110;&#29615;&#22659;&#26597;&#35810;&#12290;<span class="stt">nameless-let-exp</span> &#20808;&#27714;&#20986;&#24335;&#23376;&#21491;&#36793;&#30340;
<span class="texMathInline">exp_1</span>&#65292;&#28982;&#21518;&#29992;&#24335;&#23376;&#21491;&#36793;&#30340;&#20540;&#25193;&#23637;&#29615;&#22659;&#65292;&#24182;&#22312;&#26032;&#29615;&#22659;&#20869;&#27714;&#20027;&#20307;&#30340;&#20540;&#12290;&#36825;&#21644; <span class="stt">let</span> &#25152;
&#20570;&#30456;&#21516;&#65292;&#21482;&#26159;&#27809;&#26377;&#21464;&#37327;&#12290;<span class="stt">nameless-proc</span> &#29983;&#25104;&#19968;&#20010; <span class="stt">proc</span>&#65292;&#38543;&#21518;&#21487;&#20379;
<span class="stt">apply-procedure</span> &#35843;&#29992;&#12290;
<a name="(idx._(gentag._558))"></a></p><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}exp} \times \mathit{Nameless\mbox{-}env} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">exp2</span><span class="hspace">&nbsp;</span><span class="RktSym">exp3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">call-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="texMathInline">\ldots</span> <span class="emph">&#21516;&#21069;</span> <span class="texMathInline">\ldots</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-let-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-nameless-env</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">nameless-proc-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">proc-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">procedure</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-translated-expression</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="caption"><p>&#26080;&#21517;&#35299;&#37322;&#22120;&#30340; <span class="stt">value-of</span><a name="(elem._fig-3..18)"></a></p></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._559))"></a></div></p></blockquote><p>&#26368;&#21518;&#26159;&#26032;&#30340; <span class="stt">value-of-program</span>&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">value-of-program</span></span> : <span class="texMathInline">\mathit{Nameless\mbox{-}program} \to \mathit{ExpVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">value-of-program</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pgm</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">program</span><span class="hspace">&nbsp;</span><span class="RktSym">pgm</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a-program</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">value-of</span><span class="hspace">&nbsp;</span><span class="RktSym">exp1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">init-nameless-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._560))"></a>
<a name="(idx._(gentag._561))"></a>
<a name="(idx._(gentag._562))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..38)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._563))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;<span class="EoplExerciseRef"></span> &#20013;&#30340; <span class="stt">cond</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..39)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._564))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702;<span class="EoplExerciseRef"></span> &#20013;&#30340; <span class="stt">unpack</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..40)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._565))"></a>
&#25193;&#23637;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#22788;&#29702; <span class="stt">letrec</span>&#12290;&#20462;&#25913; <span class="stt">translation-of</span> &#30340;&#19978;&#19979;&#25991;
&#21442;&#25968;&#65292;&#19981;&#20165;&#35760;&#24405;&#27599;&#20010;&#32465;&#23450;&#21464;&#37327;&#30340;&#21517;&#23383;&#65292;&#20063;&#35760;&#24405;&#21464;&#37327;&#26159;&#21542;&#30001; <span class="stt">letrec</span> &#32465;&#23450;&#12290;&#23545;
<span class="stt">letrec</span> &#32465;&#23450;&#21464;&#37327;&#30340;&#24341;&#29992;&#65292;&#29983;&#25104;&#19968;&#31181;&#26032;&#30340;&#24341;&#29992;&#65292;&#21517;&#20026; <span class="stt">nameless-letrec-var-exp</span>&#12290;
&#28982;&#21518;&#20320;&#21487;&#20197;&#32487;&#32493;&#29992;&#19978;&#38754;&#30340;&#26080;&#21517;&#29615;&#22659;&#34920;&#31034;&#65292;&#35299;&#37322;&#22120;&#21017;&#35201;&#20197;&#36866;&#24403;&#30340;&#26041;&#24335;&#22788;&#29702;<span class="Shtt">nameless-letrec-var-exp</span>&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..41)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._566))"></a>
<a name="(idx._(gentag._567))"></a>
&#20462;&#25913;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#20687;<span class="EoplExerciseRef"></span> &#37027;&#26679;&#22788;&#29702;&#22810;&#21442;&#25968;&#30340; <span class="stt">let</span> &#34920;
&#36798;&#24335;&#12289;&#36807;&#31243;&#21644;&#36807;&#31243;&#35843;&#29992;&#12290;&#29992;&#32907;&#25490;&#34920;&#31034;&#27861;&#65288;<span class="EoplExerciseRef"></span>&#65289;&#34920;&#31034;&#26080;&#21517;&#29615;&#22659;&#12290;&#22312;&#36825;&#31181;
&#34920;&#31034;&#27861;&#20013;&#65292;&#35789;&#27861;&#22320;&#22336;&#21253;&#21547;&#20004;&#20010;&#38750;&#36127;&#25968;&#65306;&#35789;&#28145;&#65292;&#25351;&#26126;&#36328;&#36234;&#30340;&#31561;&#28145;&#32447;&#25968;&#30446;&#65292;&#19982;&#20043;&#21069;&#30456;&#21516;&#65307;&#20301;&#32622;&#65292;
&#25351;&#26126;&#21464;&#37327;&#22312;&#22768;&#26126;&#20013;&#30340;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._568))"></a>
<a name="(idx._(gentag._569))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..42)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._570))"></a>
<a name="(idx._(gentag._571))"></a>
&#20462;&#25913;&#35789;&#27861;&#22320;&#22336;&#32763;&#35793;&#22120;&#21644;&#35299;&#37322;&#22120;&#65292;&#20351;&#29992;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#30246;&#36523;&#36807;&#31243;&#34920;&#31034;&#27861;&#12290;&#35201;&#22914;&#27492;&#65292;
&#20320;&#19981;&#33021;&#22312; <span class="stt">(extend-senv </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">senv</span><span class="stt">)</span> &#20013;&#32763;&#35793;&#36807;&#31243;&#30340;&#20027;&#20307;&#65292;&#32780;&#26159;&#22312;&#19968;&#20010;&#26032;&#30340;&#38745;
&#24577;&#29615;&#22659;&#20013;&#65292;&#23427;&#25351;&#26126;&#20102;&#21508;&#20010;&#21464;&#37327;&#22312;&#30246;&#36523;&#34920;&#31034;&#20013;&#30340;&#20301;&#32622;&#12290;
<a name="(idx._(gentag._572))"></a>
<a name="(idx._(gentag._573))"></a>
<a name="(idx._(gentag._574))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..43)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._575))"></a>
<a name="(idx._(gentag._576))"></a>
<a name="(idx._(gentag._577))"></a>
&#32763;&#35793;&#22120;&#19981;&#27490;&#33021;&#35760;&#24405;&#21464;&#37327;&#30340;&#21517;&#23383;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#31243;&#24207;</p><blockquote class="EoplCodeInset"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">let x = 3</span></p></td></tr><tr><td><p><span class="stt">in let f = proc (y) -(y,x)</span></p></td></tr><tr><td><p><span class="stt"></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">in (f 13)</span></p></td></tr></table></blockquote><p>&#36825;&#37324;&#65292;&#19981;&#24517;&#36816;&#34892;&#25105;&#20204;&#23601;&#33021;&#30475;&#20986;&#65306;&#22312;&#36807;&#31243;&#35843;&#29992;&#22788;&#65292;<span class="stt">f</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#36807;&#31243;&#65292;&#20854;&#20027;&#20307;&#20026;
<span class="stt">-(y,x)</span>&#65292;<span class="stt">x</span> &#30340;&#20540;&#19982;&#36807;&#31243;&#21019;&#24314;&#22788;&#30456;&#21516;&#12290;&#22240;&#27492;&#25105;&#20204;&#23436;&#20840;&#21487;&#20197;&#36991;&#20813;&#22312;&#29615;&#22659;&#20013;&#26597;&#25214;
<span class="stt">f</span>&#12290;&#25193;&#23637;&#32763;&#35793;&#22120;&#65292;&#35760;&#24405;&#8220;&#24050;&#30693;&#36807;&#31243;&#8221;&#65292;&#29983;&#25104;&#20195;&#30721;&#65292;&#36991;&#20813;&#22312;
&#35843;&#29992;&#36825;&#26679;&#30340;&#36807;&#31243;&#26102;&#25628;&#32034;&#29615;&#22659;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex3..44)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#22312;&#21069;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;<span class="stt">f</span> &#30340;&#21807;&#19968;&#29992;&#36884;&#26159;&#20316;&#20026;&#19968;&#20010;&#24050;&#30693;&#36807;&#31243;&#12290;&#22240;&#27492;&#65292;&#30001;&#34920;&#36798;&#24335; <span class="stt">proc (y)
-(y,x)</span> &#20135;&#29983;&#30340;&#36807;&#31243;&#20174;&#26410;&#20351;&#29992;&#12290;&#20462;&#25913;&#32763;&#35793;&#22120;&#65292;&#36991;&#20813;&#20135;&#29983;&#36825;&#26679;&#30340;&#36807;&#31243;&#12290;
<a name="(idx._(gentag._578))"></a>
<a name="(idx._(gentag._579))"></a>
<a name="(idx._(gentag._580))"></a></p></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="da.html" title="backward to &quot;2 数据抽象&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;编程语言要素&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="state.html" title="forward to &quot;4 状态&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>