<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>2&nbsp;数据抽象</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="tip.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {
  document.write('<link rel="stylesheet" href="katex/katex.min.css" />');
})();(function() {document.write('<scr' + 'ipt type="text/javascript" src="katex/katex.min.js"></scr' + 'ipt>');})();(function(f) {
  // A "simple" onLoad function
  if (window.document.readyState == "complete") {
    f();
  } else if (window.document.addEventListener) {
    window.document.addEventListener("DOMContentLoaded", f, false);
  } else if (window.attachEvent) {
    window.attachEvent("onreadystatechange", function() {
      if (window.document.readyState == "complete") {
        f();
      }
    });
  } else {
    var oldLoad = window.onload;
    if (typeof(oldLoad) == "function") {
      window.onload = function() {
        try {
          oldLoad();
        } finally {
          f();
        }
      };
    } else {
      window.onload = f;
    }
  }
})(function() {
  // This is an ugly way to change the doctype, in case the scribble document
  // did not use (with-html5).
  if (!(document.doctype && document.doctype.publicId == '')) {
    if (console && console.log) {
      console.log("Re-wrote the document to use the HTML5 doctype.\n"
                  + "  Consider using the following declaration:\n"
                  + "      @title[#:style (with-html5 manual-doc-style)]{…}");
    }
    var wholeDoc = '<!doctype HTML>\n' + document.documentElement.outerHTML;
    document.open();
    document.clear();
    document.write(wholeDoc);
  }
  var inlineElements = document.getElementsByClassName("texMathInline");
  for (var i = 0; i < inlineElements.length; i++) {
    var e = inlineElements[i];
    katex.render(e.textContent, e, { displayMode:false, throwOnError:false });
  }
  var displayElements = document.getElementsByClassName("texMathDisplay");
  for (var i = 0; i < displayElements.length; i++) {
    var e = displayElements[i];
    katex.render(e.textContent, e, { displayMode:true, throwOnError:false });
  }
});
</script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">&#32534;&#31243;&#35821;&#35328;&#35201;&#32032;</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="fw-trans.html" class="tocviewlink" data-pltdoc="x">&#35793;&#32773;&#30340;&#35805;</a></td></tr><tr><td align="right"></td><td><a href="glo.html" class="tocviewlink" data-pltdoc="x">&#35793;&#21517;&#34920;</a></td></tr><tr><td align="right"></td><td><a href="fw.html" class="tocviewlink" data-pltdoc="x">&#24207;</a></td></tr><tr><td align="right"></td><td><a href="pf.html" class="tocviewlink" data-pltdoc="x">&#21069;&#35328;</a></td></tr><tr><td align="right"></td><td><a href="awk.html" class="tocviewlink" data-pltdoc="x">&#33268;&#35874;</a></td></tr><tr><td align="right">1&nbsp;</td><td><a href="isd.html" class="tocviewlink" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="expr.html" class="tocviewlink" data-pltdoc="x">&#34920;&#36798;&#24335;</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="state.html" class="tocviewlink" data-pltdoc="x">&#29366;&#24577;</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="cpi.html" class="tocviewlink" data-pltdoc="x">&#20256;&#36882;&#32493;&#25991;&#30340;&#35299;&#37322;&#22120;</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="cps.html" class="tocviewlink" data-pltdoc="x">&#32493;&#25991;&#20256;&#36882;&#39118;&#26684;</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="types.html" class="tocviewlink" data-pltdoc="x">&#31867;&#22411;</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="modules.html" class="tocviewlink" data-pltdoc="x">&#27169;&#22359;</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="oac.html" class="tocviewlink" data-pltdoc="x">&#23545;&#35937;&#21644;&#31867;</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="further-reading.html" class="tocviewlink" data-pltdoc="x">&#25193;&#23637;&#38405;&#35835;</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="sllgen-parsing-system.html" class="tocviewlink" data-pltdoc="x">SLLGEN&#35299;&#26512;&#31995;&#32479;</a></td></tr><tr><td align="right"></td><td><a href="bib.html" class="tocviewlink" data-pltdoc="x">&#21442;&#32771;&#20070;&#30446;</a></td></tr><tr><td align="right"></td><td><a href="indices.html" class="tocviewlink" data-pltdoc="x">&#32034;&#24341;</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">&#25968;&#25454;&#25277;&#35937;</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._s2..1%29" class="tocviewlink" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._s2..2%29" class="tocviewlink" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._s2..3%29" class="tocviewlink" data-pltdoc="x">&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#%28part._s2..4%29" class="tocviewlink" data-pltdoc="x">&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="#%28part._s2..5%29" class="tocviewlink" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._s2..1%29" class="tocsubseclink" data-pltdoc="x">&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._s2..2%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._s2..2..1%29" class="tocsubseclink" data-pltdoc="x">&#29615;&#22659;&#30340;&#25509;&#21475;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._s2..2..2%29" class="tocsubseclink" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._s2..2..3%29" class="tocsubseclink" data-pltdoc="x">&#36807;&#31243;&#34920;&#31034;&#27861;</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._s2..3%29" class="tocsubseclink" data-pltdoc="x">&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._s2..4%29" class="tocsubseclink" data-pltdoc="x">&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;</a></td></tr><tr><td><span class="tocsublinknumber">2.5<tt>&nbsp;</tt></span><a href="#%28part._s2..5%29" class="tocsubseclink" data-pltdoc="x">&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="isd.html" title="backward to &quot;1 归纳式数据集&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;编程语言要素&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="expr.html" title="forward to &quot;3 表达式&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._da)"></a>&#25968;&#25454;&#25277;&#35937;</h3><p><a name="(idx._(gentag._175))"></a></p><h4>2.1<tt>&nbsp;</tt><a name="(part._s2..1)"></a>&#29992;&#25509;&#21475;&#23450;&#20041;&#25968;&#25454;</h4><p>&#27599;&#24403;&#25105;&#20204;&#24819;&#20197;&#26576;&#31181;&#26041;&#24335;&#34920;&#31034;&#19968;&#20123;&#37327;&#26102;&#65292;&#25105;&#20204;&#23601;&#26032;&#23450;&#20041;&#20102;&#19968;&#31181;&#25968;&#25454;&#31867;&#22411;&#65306;&#23427;&#30340;&#21462;&#20540;&#26159;&#20854;&#34920;&#31034;&#65292;
&#23427;&#30340;&#25805;&#20316;&#26159;&#22788;&#29702;&#20854;&#23454;&#20307;&#30340;&#36807;&#31243;&#12290;</p><p>&#36825;&#20123;&#23454;&#20307;&#30340;&#34920;&#31034;&#36890;&#24120;&#24456;&#22797;&#26434;&#65292;&#25152;&#20197;&#22914;&#33021;&#36991;&#20813;&#65292;&#25105;&#20204;&#19981;&#24895;&#20851;&#24515;&#20854;&#32454;&#33410;&#12290;&#25105;&#20204;&#21487;&#33021;&#24819;&#25913;&#21464;&#25968;&#25454;&#30340;
&#34920;&#31034;&#12290;&#26368;&#39640;&#25928;&#30340;&#34920;&#31034;&#24448;&#24448;&#38590;&#20197;&#23454;&#29616;&#65292;&#25152;&#20197;&#25105;&#20204;&#21487;&#33021;&#24076;&#26395;&#20808;&#31616;&#21333;&#23454;&#29616;&#65292;&#21482;&#22312;&#30830;&#30693;&#31995;&#32479;&#30340;&#25972;&#20307;&#24615;
&#33021;&#19982;&#20043;&#25912;&#20851;&#26102;&#65292;&#25165;&#25913;&#29992;&#26356;&#39640;&#25928;&#30340;&#34920;&#31034;&#12290;&#19981;&#31649;&#20986;&#20110;&#20160;&#20040;&#21407;&#22240;&#65292;&#22914;&#26524;&#25105;&#20204;&#20915;&#23450;&#25913;&#21464;&#26576;&#20123;&#25968;&#25454;&#30340;&#34920;
&#31034;&#26041;&#24335;&#65292;&#25105;&#20204;&#24471;&#33021;&#23450;&#20301;&#31243;&#24207;&#20013;&#25152;&#26377;&#20381;&#36182;&#34920;&#31034;&#26041;&#24335;&#30340;&#37096;&#20998;&#12290;&#36825;&#23601;&#38656;&#35201;
&#20511;&#21161;<span class="emph">&#25968;&#25454;&#25277;&#35937;</span> (<span class="emph">data abstraction</span>) &#25216;&#26415;&#12290;</p><p><a name="(idx._(gentag._176))"></a>
<a name="(idx._(gentag._177))"></a>
&#25968;&#25454;&#25277;&#35937;&#23558;&#25968;&#25454;&#31867;&#22411;&#20998;&#20026;&#20004;&#37096;&#20998;&#65306;<span class="emph">&#25509;&#21475;</span> (<span class="emph">interface</span>) &#21644;<span class="emph">&#23454;&#29616;</span> (<span class="emph">implementation</span>)&#12290;
<span class="emph">&#25509;&#21475;</span>&#21578;&#35785;&#25105;&#20204;&#26576;&#31867;&#22411;&#34920;&#31034;&#20160;&#20040;&#25968;&#25454;&#65292;&#33021;&#23545;&#25968;&#25454;&#20570;&#20160;&#20040;&#25805;&#20316;&#65292;&#20197;&#21450;&#21487;&#30001;&#36825;&#20123;&#25805;&#20316;&#24471;&#20986;
&#30340;&#24615;&#36136;&#12290;<span class="emph">&#23454;&#29616;</span>&#32473;&#20986;&#25968;&#25454;&#30340;&#20855;&#20307;&#34920;&#31034;&#65292;&#20197;&#21450;&#22788;&#29702;&#25968;&#25454;&#34920;&#31034;&#30340;&#20195;&#30721;&#12290;</p><p><a name="(idx._(gentag._178))"></a>
&#36825;&#26679;&#25277;&#35937;&#20986;&#30340;&#25968;&#25454;&#31867;&#22411;&#31216;&#20026;<span class="emph">&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;</span> (<span class="emph">abstract data type</span>)&#12290;&#31243;&#24207;&#30340;&#20854;&#20313;&#37096;
&#20998;&#8212;&#8212;&#25968;&#25454;&#31867;&#22411;&#30340;<span class="emph">&#23458;&#25143;</span> (<span class="emph">client</span>)<a name="(idx._(gentag._179))"></a> &#8212;&#8212;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#20013;&#25351;&#23450;&#30340;&#25805;&#20316;&#22788;&#29702;&#26032;&#25968;&#25454;&#12290;&#36825;&#26679;&#19968;
&#26469;&#65292;&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#25913;&#21464;&#25968;&#25454;&#30340;&#34920;&#31034;&#65292;&#21482;&#38656;&#25913;&#21464;&#25968;&#25454;&#22788;&#29702;&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;</p><p>&#36825;&#19968;&#24819;&#27861;&#24182;&#19981;&#38476;&#29983;&#65306;&#25105;&#20204;&#20889;&#31243;&#24207;&#22788;&#29702;&#25991;&#20214;&#26102;&#65292;&#22810;&#25968;&#26102;&#20505;&#21482;&#20851;&#24515;&#33021;&#21542;&#35843;&#29992;&#36807;&#31243;&#26469;&#25171;&#24320;&#65292;&#20851;&#38381;&#65292;
&#35835;&#21462;&#25991;&#20214;&#25110;&#23545;&#25991;&#20214;&#20570;&#20854;&#20182;&#25805;&#20316;&#12290;&#21516;&#26679;&#22320;&#65292;&#22823;&#22810;&#25968;&#26102;&#20505;&#65292;&#25105;&#20204;&#19981;&#20851;&#24515;&#25972;&#25968;&#22312;&#26426;&#22120;&#20013;&#31350;&#31455;&#24590;&#26679;&#34920;
&#31034;&#65292;&#21482;&#20851;&#24515;&#33021;&#21542;&#21487;&#38752;&#22320;&#25191;&#34892;&#31639;&#26415;&#25805;&#20316;&#12290;</p><p><a name="(idx._(gentag._180))"></a>
<a name="(idx._(gentag._181))"></a>
&#24403;&#23458;&#25143;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#25552;&#20379;&#30340;&#36807;&#31243;&#22788;&#29702;&#26576;&#31867;&#22411;&#30340;&#25968;&#25454;&#26102;&#65292;&#25105;&#20204;&#35828;&#23458;&#25143;&#20195;&#30721;
&#19982;<span class="emph">&#34920;&#31034;&#26080;&#20851;</span> (<span class="emph">representation-independent</span>)&#65292;&#22240;&#20026;&#36825;&#20123;&#20195;&#30721;&#19981;&#20381;&#36182;&#25968;&#25454;&#31867;&#22411;&#20540;&#30340;
&#34920;&#31034;&#12290;</p><p>&#37027;&#20040;&#25152;&#26377;&#20851;&#20110;&#25968;&#25454;&#34920;&#31034;&#30340;&#20449;&#24687;&#24517;&#28982;&#22312;&#23454;&#29616;&#20195;&#30721;&#20043;&#20013;&#12290;&#23454;&#29616;&#26368;&#37325;&#35201;&#30340;&#37096;&#20998;&#23601;&#26159;&#34920;&#31034;&#25968;&#25454;&#30340;&#35268;&#33539;&#12290;
&#25105;&#20204;&#29992;&#31526;&#21495; <span class="texMathInline">\lceil v \rceil</span> &#25351;&#20195;&#8220;&#25968;&#25454; <span class="texMathInline">v</span> &#30340;&#34920;&#31034;&#8221;&#12290;</p><p><a name="(idx._(gentag._182))"></a>
&#35201;&#35828;&#24471;&#26356;&#26126;&#30333;&#20123;&#65292;&#26469;&#30475;&#19968;&#20010;&#31616;&#21333;&#20363;&#23376;&#65306;&#33258;&#28982;&#25968;&#31867;&#22411;&#12290;&#24453;&#34920;&#31034;&#30340;&#25968;&#25454;&#26159;&#33258;&#28982;&#25968;&#12290;&#25509;&#21475;&#30001;&#22235;&#20010;&#36807;
&#31243;&#32452;&#25104;&#65306;<span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#12290;&#24403;&#28982;&#65292;&#19981;&#26159;
&#38543;&#20415;&#20960;&#20010;&#36807;&#31243;&#37117;&#21487;&#20197;&#20316;&#20026;&#36825;&#19968;&#25509;&#21475;&#30340;&#23454;&#29616;&#12290;&#24403;&#19988;&#20165;&#24403;&#19968;&#32452;&#36807;&#31243;&#28385;&#36275;&#22914;&#19979;&#22235;&#20010;&#26041;&#31243;&#26102;&#65292;&#21487;&#20197;&#20316;
&#20026; <span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span> &#30340;&#23454;&#29616;&#65306;</p><blockquote><p><a name="(elem._nat)"></a><span class="stt">(zero)</span> = <span class="texMathInline">\lceil 0 \rceil</span></p><p><span class="stt">(is-zero? </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span> = <span class="Iidentity">$<span class="Iidentity">\begin{cases}<span class="stt">#t</span> &amp; n = 0 \\
<span class="stt">#f</span> &amp; n \neq 0\end{cases}</span>$</span></p><p><span class="stt">(successor </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span> = <span class="texMathInline">\lceil n + 1 \rceil \quad (n \geq 0)</span></p><p><span class="stt">(predecessor </span><span class="texMathInline">\lceil n + 1 \rceil</span><span class="stt">)</span> = <span class="texMathInline">\lceil n \rceil \quad (n \geq 0)</span></p></blockquote><p>&#36825;&#19968;&#23450;&#20041;&#27809;&#26377;&#25351;&#26126;&#33258;&#28982;&#25968;&#24212;&#24403;&#22914;&#20309;&#34920;&#31034;&#65292;&#23427;&#21482;&#35201;&#27714;&#36825;&#20123;&#36807;&#31243;&#37117;&#20135;&#29983;&#25351;&#23450;&#30340;&#34892;&#20026;&#12290;&#21363;&#65292;&#36807;&#31243;
<span class="stt">zero</span> &#24517;&#39035;&#36820;&#22238; <span class="texMathInline">0</span> &#30340;&#34920;&#31034;&#65307;&#32473;&#23450;&#25968;&#23383; <span class="texMathInline">n</span> &#30340;&#34920;&#31034;&#65292;&#36807;&#31243; <span class="stt">successor</span> &#24517;&#39035;
&#36820;&#22238;&#25968;&#23383; <span class="texMathInline">n + 1</span> &#30340;&#34920;&#31034;&#65292;&#31561;&#31561;&#12290;&#36825;&#20010;&#23450;&#20041;&#27809;&#23545; <span class="stt">(predecessor (zero))</span> &#20570;&#20986;&#35828;&#26126;&#65292;
&#25152;&#20197;&#25353;&#36825;&#20010;&#23450;&#20041;&#65292;&#20219;&#20309;&#34892;&#20026;&#37117;&#26159;&#21487;&#20197;&#25509;&#21463;&#30340;&#12290;</p><p>&#29616;&#22312;&#21487;&#20197;&#20889;&#20986;&#22788;&#29702;&#33258;&#28982;&#25968;&#30340;&#23458;&#25143;&#31243;&#24207;&#65292;&#32780;&#19988;&#19981;&#35770;&#29992;&#21738;&#31181;&#34920;&#31034;&#26041;&#24335;&#65292;&#37117;&#20445;&#35777;&#33021;&#24471;&#20986;&#27491;&#30830;&#30340;&#32467;&#26524;&#12290;
&#20363;&#22914;&#65292;&#19981;&#35770;&#24590;&#26679;&#23454;&#29616;&#33258;&#28982;&#25968;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._plus)"></a><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">plus</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">y</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plus</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#37117;&#28385;&#36275; <span class="stt">(plus </span><span class="texMathInline">\lceil x \rceil</span><span class="stt"> </span><span class="texMathInline">\lceil y \rceil</span><span class="stt">) </span><span class="texMathInline">=</span><span class="stt"> </span><span class="texMathInline">\lceil x +
y\rceil</span>&#12290;</p></blockquote><p><a name="(idx._(gentag._183))"></a>
<a name="(idx._(gentag._184))"></a>
&#22823;&#22810;&#25968;&#25509;&#21475;&#37117;&#21253;&#21547;&#65306;&#33509;&#24178;<span class="emph">&#26500;&#36896;&#22120;</span> (<span class="emph">constructor</span>)&#65292;&#29992;&#26469;&#20135;&#29983;&#25968;&#25454;&#31867;&#22411;&#30340;&#20803;&#32032;&#65307;
&#33509;&#24178;<span class="emph">&#35266;&#27979;&#22120;</span> (<span class="emph">observer</span>)&#65292;&#29992;&#26469;&#20174;&#25968;&#25454;&#31867;&#22411;&#30340;&#20540;&#20013;&#25552;&#21462;&#20449;&#24687;&#12290;&#36825;&#37324;&#26377;&#19977;&#20010;&#26500;&#36896;&#22120;&#65292;
<span class="stt">zero</span>&#12289;<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#65307;&#19968;&#20010;&#35266;&#27979;&#22120;&#65292;<span class="stt">is-zero?</span>&#12290;
<a name="(idx._(gentag._185))"></a></p><p>&#21487;&#20197;&#29992;&#22810;&#31181;&#26041;&#24335;&#34920;&#31034;&#36825;&#22871;&#25509;&#21475;&#65292;&#25105;&#20204;&#32771;&#34385;&#20854;&#20013;&#19977;&#31181;&#12290;</p><ol><li><p><a name="(idx._(gentag._186))"></a>
 <a name="(idx._(gentag._187))"></a>
 <span class="emph">&#19968;&#20803;&#34920;&#31034;&#27861;</span> (<span class="emph">Unary representation</span>)&#65306;&#22312;&#19968;&#20803;&#34920;&#31034;&#27861;&#20013;&#65292;&#33258;&#28982;&#25968;<span class="texMathInline">n</span> &#30001;
 <span class="texMathInline">n</span> &#20010; <span class="stt">#t</span> &#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#12290;&#25152;&#20197;&#65292;<span class="texMathInline">0</span> &#34920;&#31034;&#20026; <span class="stt">()</span>&#65292;<span class="texMathInline">1</span> &#34920;&#31034;&#20026;
 <span class="stt">(#t)</span>&#65292;<span class="texMathInline">2</span> &#34920;&#31034;&#20026; <span class="stt">(#t #t)</span>&#65292;&#31561;&#31561;&#12290;&#21487;&#20197;&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#36825;&#31181;&#34920;&#31034;&#26041;&#24335;&#65306;</p><blockquote><p><span class="texMathInline">\lceil 0 \rceil = <span class="stt">()</span></span></p><p><span class="texMathInline">\lceil n + 1 \rceil = <span class="stt">(#t . </span><span class="texMathInline">\lceil n \rceil</span><span class="stt">)</span></span></p></blockquote><p>&#35201;&#28385;&#36275;&#35813;&#34920;&#31034;&#30340;&#23450;&#20041;&#65292;&#25968;&#25454;&#22788;&#29702;&#36807;&#31243;&#21487;&#20197;&#20889;&#25104;&#65306;</p><p><div class="SIntrapara"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">zero</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._188))"></a></div></p></li><li><p><a name="(idx._(gentag._189))"></a>
 <span class="emph">Scheme &#25968;&#23383;&#34920;&#31034;&#27861;</span> (<span class="emph">Scheme number representation</span>)&#65306;&#22312;&#36825;&#31181;&#34920;&#31034;&#20013;&#65292;
 &#21482;&#38656;&#29992; Scheme &#20869;&#32622;&#30340;&#25968;&#23383;&#34920;&#31034;&#27861;&#65288;&#26412;&#36523;&#21487;&#33021;&#21313;&#20998;&#22797;&#26434;&#65281;&#65289;&#12290;&#20196; <span class="texMathInline">\lceil n \rceil</span> &#20026;
 Scheme &#25972;&#25968; <span class="stt">n</span>&#65292;&#21017;&#25152;&#38656;&#30340;&#22235;&#20010;&#36807;&#31243;&#21487;&#20197;&#23450;&#20041;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">zero</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">is-zero?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">zero?</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">successor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">predecessor</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._190))"></a></div></p></blockquote></li><li><p><span class="emph">&#22823;&#25968;&#34920;&#31034;&#27861;</span> (<span class="emph">Bignum representation</span>)&#65306;
<a name="(idx._(gentag._191))"></a>
<a name="(idx._(gentag._192))"></a>
&#22312;&#22823;&#25968;&#34920;&#31034;&#27861;&#20013;&#65292;&#25968;&#20540;&#20197; <span class="texMathInline">N</span> &#36827;&#21046;&#34920;&#31034;&#65292;<span class="texMathInline">N</span> &#26159;&#26576;&#20010;&#22823;&#25972;&#25968;&#12290;&#35813;&#26041;&#27861;&#20197; <span class="texMathInline">0</span> &#21040;
<span class="texMathInline">N-1</span> &#20043;&#38388;&#30340;&#25968;&#23383;&#65288;&#26377;&#26102;&#19981;&#31216;&#25968;&#20301;&#65292;&#32780;&#31216;<span class="emph">&#22823;&#20301;</span> (<span class="emph">bigits</span>)&#65289;&#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#25968;&#20540;&#65292;
&#36825;&#23601;&#24456;&#23481;&#26131;&#34920;&#31034;&#36828;&#36229;&#26426;&#22120;&#23383;&#38271;&#30340;&#25972;&#25968;&#12290;&#36825;&#37324;&#65292;&#20026;&#20102;&#20415;&#20110;&#20351;&#29992;&#65292;&#25105;&#20204;&#25226;&#26368;&#20302;&#20301;&#25918;&#22312;&#21015;&#34920;&#26368;&#21069;
&#31471;&#12290;&#36825;&#31181;&#34920;&#31034;&#27861;&#21487;&#29992;&#24402;&#32435;&#27861;&#23450;&#20041;&#20026;&#65306;</p><p><span class="Iidentity">$\lceil n \rceil = <span class="Iidentity">\begin{cases}<span class="stt">()</span> &amp; n = 0 \\ <span class="stt">(</span><span class="Iidentity">r</span><span class="stt"> . </span><span class="Iidentity">\lceil q
\rceil</span><span class="stt">)</span> &amp; n = qN + r, 0 \leqslant r &lt; N\end{cases}</span>$</span></p><p>&#25152;&#20197;&#65292;&#22914;&#26524; <span class="texMathInline">N = 16</span>&#65292;&#37027;&#20040; <span class="texMathInline">\lceil 33 \rceil = <span class="stt">(1 2)</span></span>&#65292;<span class="texMathInline">\lceil 258
\rceil = <span class="stt">(2 0 1)</span></span>&#65292;&#22240;&#20026;&#65306;</p><p><span class="texMathDisplay">258 = 2 \times 16^0 + 0 \times 16^1 + 1 \times 16^2</span>
<a name="(idx._(gentag._193))"></a></p></li></ol><p><a name="(idx._(gentag._194))"></a>&#36825;&#20123;&#23454;&#29616;&#37117;&#27809;&#26377;&#24378;&#21046;&#25968;&#25454;&#25277;&#35937;&#65306;&#26080;&#27861;&#38450;&#27490;&#23458;&#25143;&#31243;&#24207;&#26597;&#39564;&#34920;&#31034;&#29992;
&#30340;&#26159;&#21015;&#34920;&#36824;&#26159; Scheme &#25972;&#25968;&#12290;&#19982;&#20043;&#30456;&#23545;&#65292;&#26377;&#20123;&#35821;&#35328;&#30452;&#25509;&#25903;&#25345;&#25968;&#25454;&#25277;&#35937;&#65306;&#23427;&#20204;&#20801;&#35768;&#31243;&#24207;&#21592;&#21019;&#24314;
&#26032;&#30340;&#25509;&#21475;&#65292;&#30830;&#20445;&#21482;&#33021;&#36890;&#36807;&#25509;&#21475;&#25552;&#20379;&#30340;&#36807;&#31243;&#22788;&#29702;&#26032;&#25968;&#25454;&#12290;&#22914;&#26524;&#31867;&#22411;&#30340;&#34920;&#31034;&#38544;&#34255;&#36215;&#26469;&#65292;&#19981;&#20250;&#22240;&#20219;
&#20309;&#25805;&#20316;&#32780;&#26292;&#38706;&#65288;&#21253;&#25324;&#25171;&#21360;&#65289;&#65292;&#37027;&#23601;&#35828;&#35813;&#31867;&#22411;&#26159;<span class="emph">&#27169;&#31946;</span> (<span class="emph">opaque</span>) &#30340;&#65292;&#21542;&#21017;&#31216;&#20043;
&#20026;<span class="emph">&#36879;&#26126;</span> (<span class="emph">transparent</span>) &#30340;&#12290;
<a name="(idx._(gentag._195))"></a>
<a name="(idx._(gentag._196))"></a>
<a name="(idx._(gentag._197))"></a>
<a name="(idx._(gentag._198))"></a></p><p>Scheme &#27809;&#26377;&#25552;&#20379;&#26631;&#20934;&#26426;&#21046;&#26469;&#21019;&#24314;&#26032;&#30340;&#27169;&#31946;&#31867;&#22411;&#65292;&#25152;&#20197;&#25105;&#20204;&#36864;&#32780;&#27714;&#20854;&#27425;&#65306;&#23450;&#20041;&#25509;&#21475;&#65292;&#38752;&#23458;&#25143;
&#31243;&#24207;&#30340;&#20316;&#32773;&#23567;&#24515;&#34892;&#20107;&#65292;&#21482;&#20351;&#29992;&#25509;&#21475;&#20013;&#23450;&#20041;&#30340;&#36807;&#31243;&#12290;</p><p>&#22312;<a href="modules.html" data-pltdoc="x">&#27169;&#22359;</a>&#20013;&#65292;&#25105;&#20204;&#35752;&#35770;&#19968;&#20123;&#26041;&#27861;&#65292;&#20197;&#20415;&#24378;&#21270;&#35821;&#35328;&#30340;&#36825;&#31181;&#21327;&#35758;&#12290;</p><blockquote class="EoplExercise"><p><a name="(elem._ex2..1)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._199))"></a>
&#23454;&#29616;&#22823;&#25968;&#34920;&#31034;&#27861;&#30340;&#22235;&#31181;&#25805;&#20316;&#12290;&#28982;&#21518;&#29992;&#20320;&#30340;&#23454;&#29616;&#35745;&#31639;10&#30340;&#38454;&#20056;&#12290;&#38543;&#30528;&#21442;&#25968;&#25913;&#21464;&#65292;&#25191;&#34892;&#26102;&#38388;&#22914;
&#20309;&#21464;&#21270;&#65311;&#38543;&#30528;&#36827;&#21046;&#25913;&#21464;&#65292;&#25191;&#34892;&#26102;&#38388;&#22914;&#20309;&#21464;&#21270;&#65311;&#35299;&#37322;&#21407;&#22240;&#12290;
<a name="(idx._(gentag._200))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..2)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#35814;&#21152;&#20998;&#26512;&#19978;&#36848;&#34920;&#31034;&#12290;&#20174;&#28385;&#36275;&#25968;&#25454;&#31867;&#22411;&#23450;&#20041;&#30340;&#35282;&#24230;&#26469;&#35828;&#65292;&#23427;&#20204;&#22312;&#20309;&#31181;&#31243;&#24230;&#19978;&#26159;&#25104;&#21151;&#25110;&#22833;&#36133;&#30340;&#65311;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..3)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._201))"></a>
&#29992;&#24046;&#20998;&#26641;&#34920;&#31034;&#25152;&#26377;&#25972;&#25968;&#65288;&#36127;&#25968;&#21644;&#38750;&#36127;&#25968;&#65289;&#12290;&#24046;&#20998;&#26641;&#26159;&#19968;&#21015;&#34920;&#65292;&#21487;&#29992;&#35821;&#27861;&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="SubFlow"><p><span class="texMathDisplay">\mathit{Diff\mbox{-}tree} ::= <span class="stt">(one)</span> \mid <span class="stt">(diff</span><span class="stt">
</span><span class="texMathInline">\mathit{Diff\mbox{-}tree}</span><span class="stt"> </span><span class="texMathInline">\mathit{Diff\mbox{-}tree}</span><span class="stt">)</span></span>
<a name="(idx._(gentag._202))"></a></p><p>&#21015;&#34920; <span class="stt">(one)</span> &#34920;&#31034; 1&#12290;&#22914;&#26524; <span class="texMathInline">t_1</span> &#34920;&#31034; <span class="texMathInline">n_1</span>&#65292;<span class="texMathInline">t_2</span> &#34920;&#31034; <span class="texMathInline">n_2</span>&#65292;&#37027;&#20040;
<span class="stt">(diff </span><span class="texMathInline">n_1</span><span class="stt"> </span><span class="texMathInline">n_2</span><span class="stt">)</span> &#34920;&#31034; <span class="texMathInline">n_1 - n_2</span>&#12290;</p><p>&#25152;&#20197;&#65292;<span class="stt">(one)</span> &#21644; <span class="stt">(diff</span> <span class="stt">(one)</span> <span class="stt">(diff</span> <span class="stt">(one)</span>
<span class="stt">(one)))</span> &#37117;&#34920;&#31034;1&#65307;<span class="stt">(diff</span> <span class="stt">(diff</span> <span class="stt">(one)</span> <span class="stt">(one))</span>
<span class="stt">(one))</span> &#34920;&#31034; <span class="texMathInline">-1</span>&#12290;</p><ol><li><p>&#35777;&#26126;&#27492;&#31995;&#32479;&#20013;&#65292;&#27599;&#20010;&#25968;&#37117;&#26377;&#26080;&#38480;&#31181;&#34920;&#31034;&#26041;&#24335;&#12290;</p></li><li><p>&#23454;&#29616;&#36825;&#31181;&#25972;&#25968;&#34920;&#31034;&#27861;&#65306;&#20889;&#20986;<span class="stt">nat</span>&#23450;&#20041;&#30340; <span class="stt">zero</span>&#12289;<span class="stt">is-zero?</span>&#12289;
<span class="stt">successor</span> &#21644; <span class="stt">predecessor</span>&#65292;&#27492;&#22806;&#36824;&#35201;&#33021;&#34920;&#31034;&#36127;&#25968;&#12290;&#36825;&#31181;&#26041;&#24335;&#19979;&#65292;&#25972;&#25968;&#30340;&#20219;
&#20309;&#21512;&#27861;&#34920;&#31034;&#37117;&#24212;&#35813;&#33021;&#20316;&#20026;&#20320;&#36807;&#31243;&#30340;&#21442;&#25968;&#12290;&#20363;&#22914;&#65292;&#20320;&#30340;&#36807;&#31243; <span class="stt">successor</span> &#21487;&#20197;&#25509;&#21463;&#26080;
&#38480;&#22810;&#31181; <span class="texMathInline">1</span> &#30340;&#21512;&#27861;&#34920;&#31034;&#65292;&#19988;&#37117;&#24212;&#32473;&#20986;&#19968;&#20010; <span class="texMathInline">2</span>&#30340;&#21512;&#27861;&#34920;&#31034;&#12290;&#23545; <span class="texMathInline">1</span> &#30340;&#19981;&#21516;&#21512;&#27861;
&#34920;&#31034;&#65292;&#21487;&#20197;&#32473;&#20986;&#19981;&#21516;&#30340; <span class="texMathInline">2</span> &#30340;&#21512;&#27861;&#34920;&#31034;&#12290;</p></li><li><p>&#20889;&#20986;&#36807;&#31243; <span class="stt">diff-tree-plus</span>&#65292;&#29992;&#36825;&#31181;&#34920;&#31034;&#20570;&#21152;&#27861;&#12290;&#20320;&#30340;&#36807;&#31243;&#24212;&#38024;&#23545;&#19981;&#21516;&#30340;&#24046;
&#20998;&#26641;&#36827;&#34892;&#20248;&#21270;&#65292;&#24182;&#22312;&#24120;&#25968;&#26102;&#38388;&#20869;&#24471;&#20986;&#32467;&#26524;&#65288;&#21363;&#19982;&#36755;&#20837;&#22823;&#23567;&#26080;&#20851;&#65289;&#12290;&#27880;&#24847;&#65292;&#19981;&#21487;&#20351;&#29992;&#36882;&#24402;&#12290;
<a name="(idx._(gentag._203))"></a></p></li></ol></blockquote></blockquote><h4>2.2<tt>&nbsp;</tt><a name="(part._s2..2)"></a>&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;</h4><p><a name="(idx._(gentag._204))"></a>
<a name="(idx._(gentag._205))"></a>
&#20351;&#29992;&#25968;&#25454;&#25277;&#35937;&#30340;&#31243;&#24207;&#20855;&#26377;&#34920;&#31034;&#26080;&#20851;&#24615;&#65306;&#19982;&#29992;&#26469;&#23454;&#29616;&#25277;&#35937;&#25968;&#25454;&#31867;&#22411;&#30340;&#20855;&#20307;&#34920;&#31034;&#26041;&#24335;&#26080;&#20851;&#65292;&#29978;&#33267;
&#21487;&#20197;&#36890;&#36807;&#37325;&#26032;&#23450;&#20041;&#25509;&#21475;&#20013;&#30340;&#19968;&#23567;&#37096;&#20998;&#36807;&#31243;&#26469;&#25913;&#21464;&#34920;&#31034;&#12290;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#25105;&#20204;&#24120;&#20250;&#29992;&#21040;&#36825;&#26465;&#24615;
&#36136;&#12290;</p><p><a name="(idx._(gentag._206))"></a>
<a name="(idx._(gentag._207))"></a>
&#26412;&#33410;&#20171;&#32461;&#20960;&#31181;&#25968;&#25454;&#31867;&#22411;&#30340;&#34920;&#31034;&#31574;&#30053;&#12290;&#25105;&#20204;&#29992;&#25968;&#25454;&#31867;&#22411;<span class="emph">&#29615;&#22659;</span> (<span class="emph">environment</span>) &#35299;&#37322;&#36825;
&#20123;&#36873;&#25321;&#12290;&#23545;&#26377;&#38480;&#20010;&#21464;&#37327;&#32452;&#25104;&#30340;&#38598;&#21512;&#65292;&#29615;&#22659;&#23558;&#20540;&#19982;&#20854;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#20851;&#32852;&#36215;&#26469;&#12290;&#22312;&#32534;&#31243;&#35821;&#35328;&#30340;&#23454;
&#29616;&#20043;&#20013;&#65292;&#29615;&#22659;&#21487;&#29992;&#26469;&#32500;&#31995;&#21464;&#37327;&#19982;&#20540;&#30340;&#20851;&#31995;&#12290;&#32534;&#35793;&#22120;&#20063;&#33021;&#29992;&#29615;&#22659;&#23558;&#21464;&#37327;&#21517;&#19982;&#21464;&#37327;&#20449;&#24687;&#20851;&#32852;&#36215;&#26469;&#12290;</p><p>&#21482;&#35201;&#33021;&#22815;&#26816;&#26597;&#20004;&#20010;&#21464;&#37327;&#26159;&#21542;&#30456;&#31561;&#65292;&#21464;&#37327;&#33021;&#22815;&#29992;&#25105;&#20204;&#21916;&#27426;&#30340;&#20219;&#20309;&#26041;&#24335;&#34920;&#31034;&#12290;&#25105;&#20204;&#36873;&#29992; Scheme
&#31526;&#21495;&#34920;&#31034;&#21464;&#37327;&#65292;&#20294;&#22312;&#27809;&#26377;&#31526;&#21495;&#25968;&#25454;&#31867;&#22411;&#30340;&#35821;&#35328;&#20013;&#65292;&#21464;&#37327;&#20063;&#21487;&#20197;&#29992;&#23383;&#31526;&#20018;&#65292;&#21704;&#24076;&#34920;&#24341;&#29992;&#65292;&#29978;&#33267;
&#25968;&#23383;&#34920;&#31034;&#65288;&#35265; <a href="expr.html#%28part._s3..6%29" data-pltdoc="x">&#28040;&#38500;&#21464;&#37327;&#21517;</a>&#65289;&#12290;</p><h5>2.2.1<tt>&nbsp;</tt><a name="(part._s2..2..1)"></a>&#29615;&#22659;&#30340;&#25509;&#21475;</h5><p>&#29615;&#22659;&#26159;&#19968;&#20989;&#25968;&#65292;&#23450;&#20041;&#22495;&#20026;&#26377;&#38480;&#20010;&#21464;&#37327;&#30340;&#38598;&#21512;&#65292;&#20540;&#22495;&#20026;&#25152;&#26377; Scheme &#20540;&#30340;&#38598;&#21512;&#12290;&#25968;&#23398;&#19978;&#24120;&#35828;&#30340;
&#26377;&#38480;&#20989;&#25968;&#26159;&#25351;&#26377;&#24207;&#25968;&#23545;&#32452;&#25104;&#30340;&#26377;&#38480;&#38598;&#21512;&#65292;&#25105;&#20204;&#37319;&#29992;&#36825;&#19968;&#21547;&#20041;&#65292;&#23601;&#24471;&#34920;&#31034;&#24418;&#22914;
<span class="Iidentity">$\{(var_1,\allowbreak val_1),\allowbreak ...,\allowbreak (var_n, val_n)\}$</span>&#30340;&#25152;
&#26377;&#38598;&#21512;&#12290;&#20854;&#20013;&#65292;<span class="texMathInline">var_i</span> &#26159;&#26576;&#19968;&#21464;&#37327;&#65292;<span class="texMathInline">val_i</span> &#26159;&#20219;&#24847; Scheme &#20540;&#12290;&#26377;&#26102;&#31216;&#29615;&#22659;
<span class="texMathInline">env</span> &#20013;&#21464;&#37327; <span class="texMathInline">var</span> &#30340;&#20540; <span class="texMathInline">val</span> &#20026;&#20854;&#22312; <span class="texMathInline">env</span> &#20013;&#30340;<span class="emph">&#32465;&#23450;</span> (<span class="emph">binding</span>)&#12290;
<a name="(idx._(gentag._208))"></a>
<a name="(idx._(gentag._209))"></a></p><p>&#36825;&#19968;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;&#26377;&#19977;&#20010;&#36807;&#31243;&#65292;&#23450;&#20041;&#22914;&#19979;&#65306;</p><blockquote class="SubFlow"><p><a name="(idx._(gentag._210))"></a>
<a name="(idx._(gentag._211))"></a>
<a name="(idx._(gentag._212))"></a>
<span class="Iidentity">\begin{align*}&amp;<span class="stt">(empty-env)</span> &amp;= &amp;\ \lceil \emptyset \rceil \\
&amp;<span class="stt">(apply-env </span><span class="Iidentity">\lceil f \rceil</span><span class="stt"> </span><span class="Iidentity">var</span><span class="stt">)</span> &amp;= &amp;\ f(var) \\
&amp;<span class="stt">(extend-env </span><span class="Iidentity">var</span><span class="stt"> </span><span class="Iidentity">v</span><span class="stt"> </span><span class="Iidentity">\lceil f \rceil</span><span class="stt">)</span> &amp;= &amp;\ \lceil g \rceil \\
&amp;\phantom{x} &amp;&#20854;&#20013;&#65292;&amp;\ g(var_1) = <span class="Iidentity">\begin{cases}v &amp; &#33509;\ var_1 = var \\
 f(var_1) &amp; &#21542;&#21017;\end{cases}</span>\end{align*}</span>
<a name="(idx._(gentag._213))"></a></p></blockquote><p>&#36807;&#31243; <span class="stt">empty-env</span> &#19981;&#24102;&#21442;&#25968;&#65292;&#24517;&#39035;&#36820;&#22238;&#31354;&#29615;&#22659;&#30340;&#34920;&#31034;&#65307;<span class="stt">apply-env</span> &#29992;&#29615;&#22659;&#23545;&#21464;&#37327;
&#27714;&#20540;&#65307;<span class="stt">(extend-env </span><span class="texMathInline">var</span><span class="stt"> </span><span class="texMathInline">val</span><span class="stt"> </span><span class="texMathInline">env</span><span class="stt">)</span> &#20135;&#29983;&#19968;&#20010;&#26032;&#29615;&#22659;&#65292;&#23558;&#21464;&#37327; <span class="texMathInline">var</span>
&#30340;&#20540;&#35774;&#20026; <span class="texMathInline">val</span>&#65292;&#27492;&#22806;&#19982; <span class="texMathInline">env</span> &#30456;&#21516;&#12290;&#20363;&#22914;&#65292;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">d</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">x</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">y</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23450;&#20041;&#20102;&#19968;&#20010;&#29615;&#22659; <span class="texMathInline">e</span>&#65292;&#20351; <span class="texMathInline">e(<span class="stt">d</span>) = 6</span>&#65292;<span class="texMathInline">e(<span class="stt">x</span>) = 7</span>&#65292;<span class="texMathInline">e(<span class="stt">y</span>) =
8</span>&#65292;&#19988;&#23545;&#20219;&#20309;&#20854;&#20182;&#21464;&#37327;&#65292;<span class="texMathInline">e</span>&#26410;&#23450;&#20041;&#12290;&#26412;&#20363;&#20013;&#65292;<span class="stt">y</span>&#20808;&#32465;&#23450;&#21040; <span class="texMathInline">14</span>&#65292;&#38543;&#21518;&#32465;&#23450;&#21040;
<span class="texMathInline">8</span>&#12290;&#36825;&#24403;&#28982;&#21482;&#26159;&#29983;&#25104;&#35813;&#29615;&#22659;&#30340;&#20247;&#22810;&#26041;&#27861;&#20043;&#19968;&#12290;</p></blockquote><p>&#22914;&#21516;&#21069;&#19968;&#20010;&#20363;&#23376;&#65292;&#21487;&#20197;&#23558;&#25509;&#21475;&#20013;&#30340;&#36807;&#31243;&#20998;&#20026;&#26500;&#36896;&#22120;&#21644;&#35266;&#27979;&#22120;&#12290;&#26412;&#20363;&#20013;&#65292;<span class="stt">empty-env</span>&#21644;
<span class="stt">extend-env</span>&#26159;&#26500;&#36896;&#22120;&#65292;<span class="stt">apply-env</span>&#26159;&#21807;&#19968;&#30340;&#35266;&#27979;&#22120;&#12290;
<a name="(idx._(gentag._214))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..4)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._215))"></a>
&#32771;&#34385;&#25968;&#25454;&#31867;&#22411;<span class="emph">&#26632;</span> (<span class="emph">stack</span>)&#65292;&#20854;&#25509;&#21475;&#21253;&#21547;&#36807;&#31243; <span class="stt">empty-stack</span>&#12289;<span class="stt">push</span>&#12289;
<span class="stt">pop</span>&#12289;<span class="stt">top</span> &#21644; <span class="stt">empty-stack?</span>&#12290;&#25353;&#29031;&#31034;&#20363;&#20013;&#30340;&#26041;&#24335;&#20889;&#20986;&#36825;&#20123;&#25805;&#20316;&#30340;&#23450;&#20041;&#12290;&#21738;
&#20123;&#25805;&#20316;&#26159;&#26500;&#36896;&#22120;&#65311;&#21738;&#20123;&#26159;&#35266;&#27979;&#22120;&#65311;
<a name="(idx._(gentag._216))"></a></p></blockquote><h5>2.2.2<tt>&nbsp;</tt><a name="(part._s2..2..2)"></a>&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</h5><p><a name="(idx._(gentag._217))"></a>
<a name="(idx._(gentag._218))"></a>
&#35266;&#23519;&#21487;&#30693;&#65292;&#27599;&#20010;&#29615;&#22659;&#37117;&#33021;&#20174;&#31354;&#29615;&#22659;&#24320;&#22987;&#65292;<span class="texMathInline">n</span> &#27425;&#35843;&#29992; <span class="stt">extend-env</span> &#24471;&#21040;&#65292;&#20854;&#20013; <span class="texMathInline">n
\geqslant 0</span>&#12290;&#20363;&#22914;&#65292;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="texMathInline">var_n</span><span class="hspace">&nbsp;</span><span class="texMathInline">val_n</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extend-env</span><span class="hspace">&nbsp;</span><span class="texMathInline">var_1</span><span class="hspace">&nbsp;</span><span class="texMathInline">val_1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#30001;&#27492;&#21487;&#24471;&#19968;&#31181;&#29615;&#22659;&#30340;&#34920;&#31034;&#26041;&#27861;&#12290;</p></blockquote><p>&#27599;&#20010;&#29615;&#22659;&#37117;&#33021;&#29992;&#19979;&#21015;&#35821;&#27861;&#23450;&#20041;&#30340;&#34920;&#36798;&#24335;&#29983;&#25104;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Env\mbox{-}exp} &amp;::= <span class="stt">(empty-env)</span> \\ &amp;::= <span class="stt">(extend-env</span><span class="stt">
</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">
</span><span class="Iidentity">\mathit{Scheme\mbox{-}value}</span><span class="stt">
</span><span class="Iidentity">\mathit{Env\mbox{-}exp}</span><span class="stt">)</span>\end{align*}</span></p><p>&#21487;&#20197;&#29992;&#25551;&#36848;&#21015;&#34920;&#38598;&#21512;&#30340;&#35821;&#27861;&#34920;&#31034;&#29615;&#22659;&#65292;&#30001;&#27492;&#24471;&#20986;<span class="EoplFigureRef"></span> &#20013;&#30340;&#23454;&#29616;&#12290;&#36807;&#31243; <span class="stt">apply-env</span> &#26597;
&#30475;&#34920;&#31034;&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500; <span class="stt">env</span>&#65292;&#21028;&#26029;&#23427;&#34920;&#31034;&#21738;&#31181;&#29615;&#22659;&#65292;&#24182;&#20570;&#36866;&#24403;&#25805;&#20316;&#12290;&#22914;&#26524;&#23427;&#34920;&#31034;&#31354;&#29615;
&#22659;&#65292;&#37027;&#23601;&#25253;&#38169;&#65307;&#22914;&#26524;&#23427;&#34920;&#31034; <span class="stt">extend-env</span> &#29983;&#25104;&#30340;&#29615;&#22659;&#65292;&#37027;&#23601;&#21028;&#26029;&#35201;&#26597;&#25214;&#30340;&#21464;&#37327;&#26159;&#21542;&#19982;
&#29615;&#22659;&#20013;&#32465;&#23450;&#30340;&#26576;&#19968;&#21464;&#37327;&#30456;&#21516;&#65292;&#22914;&#26524;&#26159;&#65292;&#21017;&#36820;&#22238;&#20445;&#23384;&#30340;&#20540;&#65292;&#21542;&#21017;&#22312;&#20445;&#23384;&#30340;&#29615;&#22659;&#20013;&#26597;&#25214;&#21464;&#37327;&#12290;</p><p>&#36825;&#26159;&#19968;&#31181;&#24120;&#35265;&#30340;&#20195;&#30721;&#27169;&#24335;&#12290;&#25105;&#20204;&#21483;&#23427;<span class="emph">&#35299;&#37322;&#22120;&#31192;&#26041;</span> (<span class="emph">interpreter recipe</span>)&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#35299;&#37322;&#22120;&#31192;&#26041;</span>
<a name="(idx._(gentag._219))"></a></p></blockquote><blockquote class="TipContent"><ol><li><p>&#26597;&#30475;&#19968;&#27573;&#25968;&#25454;&#12290;</p></li><li><p>&#21028;&#26029;&#23427;&#34920;&#31034;&#20160;&#20040;&#26679;&#30340;&#25968;&#25454;&#12290;</p></li><li><p>&#25552;&#21462;&#25968;&#25454;&#30340;&#21508;&#20010;&#37096;&#20998;&#65292;&#23545;&#23427;&#20204;&#20570;&#36866;&#24403;&#25805;&#20316;&#12290;</p></li></ol></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="EoplFigure"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Env} = <span class="stt">(empty-env)</span> \mid <span class="stt">(extend-env </span><span class="texMathInline">\mathit{Var}</span><span class="stt"> </span><span class="texMathInline">\mathit{SchemeVal}</span><span class="stt"> </span><span class="texMathInline">\mathit{Env}</span><span class="stt">)</span></span></td></tr><tr><td><span class="texMathInline">\mathit{Var} = \mathit{Sym}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._220))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">empty-env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._221))"></a></td></tr><tr><td><a name="(idx._(gentag._222))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-env</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{SchemeVal} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">extend-env</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._223))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-env</span></span> : <span class="texMathInline">\mathit{Env} \times \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">empty-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">extend-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">caddr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadddr</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-env</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-no-binding-found</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">apply-env</span><span class="hspace">&nbsp;</span><span class="RktVal">"~s&#26410;&#32465;&#23450;"</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">report-invalid-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eopl:error</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">apply-env</span><span class="hspace">&nbsp;</span><span class="RktVal">"&#38750;&#27861;&#29615;&#22659;: ~s"</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><blockquote class="caption"><p>&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;<a name="(elem._fig-2..1)"></a></p></blockquote></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._224))"></a>
<a name="(idx._(gentag._225))"></a></div></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..5)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._226))"></a>
<a name="(idx._(gentag._227))"></a>
<a name="(idx._(gentag._228))"></a>
<a name="(idx._(gentag._229))"></a>
&#21482;&#35201;&#33021;&#21306;&#20998;&#31354;&#29615;&#22659;&#21644;&#38750;&#31354;&#29615;&#22659;&#65292;&#24182;&#33021;&#20174;&#21518;&#32773;&#20013;&#25552;&#21462;&#20986;&#25968;&#25454;&#29255;&#27573;&#65292;&#23601;&#33021;&#29992;&#20219;&#20309;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#29615;
&#22659;&#12290;&#25353;&#36825;&#31181;&#26041;&#24335;&#23454;&#29616;&#29615;&#22659;&#65306;&#31354;&#29615;&#22659;&#30001;&#31354;&#21015;&#34920;&#34920;&#31034;&#65292;<span class="stt">extend-env</span>&#29983;&#25104;&#22914;&#19979;&#29615;&#22659;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCentered"><p><img src="alist-env.svg" alt="关联列表表示法" width="216.0pt" height="104.4pt"/></p></blockquote><p><a name="(idx._(gentag._230))"></a>
<a name="(idx._(gentag._231))"></a>
&#36825;&#21483; <span class="emph">a-list</span> &#25110;<span class="emph">&#20851;&#32852;&#21015;&#34920;</span> (<span class="emph">association-list</span>) &#34920;&#31034;&#27861;&#12290;</p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..6)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21457;&#26126;&#19977;&#31181;&#20197;&#19978;&#30340;&#29615;&#22659;&#25509;&#21475;&#34920;&#31034;&#65292;&#32473;&#20986;&#23454;&#29616;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..7)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#37325;&#20889;<span class="EoplFigureRef"></span> &#20013;&#30340; <span class="stt">apply-env</span>&#65292;&#32473;&#20986;&#26356;&#35814;&#32454;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..8)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._232))"></a>
<a name="(idx._(gentag._233))"></a>
&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#35266;&#27979;&#22120; <span class="stt">empty-env?</span>&#65292;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..9)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#35266;&#27979;&#22120; <span class="stt">has-binding?</span>&#65292;&#23427;&#21462;&#19968;&#29615;&#22659; <span class="texMathInline">env</span>&#65292;&#19968;&#20010;&#21464;&#37327; <span class="texMathInline">s</span>&#65292;&#21028;&#26029;
<span class="texMathInline">s</span> &#22312; <span class="texMathInline">env</span> &#20013;&#26159;&#21542;&#26377;&#32465;&#23450;&#20540;&#12290;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..10)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._234))"></a>
&#32473;&#29615;&#22659;&#25509;&#21475;&#28155;&#21152;&#26500;&#36896;&#22120; <span class="stt">extend-env*</span>&#65292;&#29992; a-list &#34920;&#31034;&#27861;&#23454;&#29616;&#23427;&#12290;&#36825;&#20010;&#26500;&#36896;&#22120;&#21462;&#19968;&#21464;
&#37327;&#21015;&#34920;&#21644;&#19968;&#38271;&#24230;&#30456;&#31561;&#30340;&#20540;&#21015;&#34920;&#65292;&#20197;&#21450;&#19968;&#29615;&#22659;&#65292;&#20854;&#23450;&#20041;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}&amp; <span class="stt">(extend-env* (</span><span class="Iidentity">var_1</span><span class="stt"> </span><span class="Iidentity">\dots</span><span class="stt"> </span><span class="Iidentity">var_k</span><span class="stt">) (</span><span class="Iidentity">val_1</span><span class="stt"> </span><span class="Iidentity">\dots</span><span class="stt"> </span><span class="Iidentity">var_k</span><span class="stt">) </span><span class="Iidentity">\lceil f \rceil</span><span class="stt">)</span> = \lceil g \rceil, \\
&amp; \quad &#20854;&#20013;&#65292;g(var) =
 <span class="Iidentity">\begin{cases}val_i &amp; &#33509; \ var = var_i \  &#23545;&#26576;&#20010; \ i \ &#25104;&#31435;&#65292;1 \leqslant i \leqslant k \\
f(var) &amp; &#21542;&#21017;\end{cases}</span>\end{align*}</span>
<a name="(idx._(gentag._235))"></a>
<a name="(idx._(gentag._236))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..11)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#21069;&#19968;&#39064;&#20013;&#30340; <span class="stt">extend-env*</span> &#23454;&#29616;&#27604;&#36739;&#25305;&#21155;&#30340;&#35805;&#65292;&#36816;&#34892;&#26102;&#38388;&#19982; <span class="texMathInline">k</span> &#25104;&#27491;&#27604;&#12290;&#26377;&#19968;&#31181;&#34920;
&#31034;&#21487;&#20351; <span class="stt">extend-env*</span> &#30340;&#36816;&#34892;&#26102;&#38388;&#20026;&#24120;&#25968;&#65306;&#29992;&#31354;&#21015;&#34920;&#34920;&#31034;&#31354;&#29615;&#22659;&#65292;&#29992;&#19979;&#38754;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;
&#31034;&#38750;&#31354;&#29615;&#22659;&#65306;</p><blockquote class="SCentered"><p><img src="rib-cage-one.svg" alt="肋排环境表示法片段" width="201.6pt" height="102.6pt"/></p></blockquote><blockquote class="SubFlow"><p>&#37027;&#20040;&#19968;&#20010;&#29615;&#22659;&#30475;&#36215;&#26469;&#20687;&#26159;&#36825;&#26679;&#65306;</p><blockquote class="SCentered"><p><img src="rib-cage.svg" alt="肋排环境表示法" width="522.0pt" height="156.0pt"/></p></blockquote><p><a name="(idx._(gentag._237))"></a>
<a name="(idx._(gentag._238))"></a>
&#36825;&#21483;&#20570;<span class="emph">&#32907;&#25490;</span> (<span class="emph">ribcage</span>) &#34920;&#31034;&#27861;&#12290;&#29615;&#22659;&#30001;&#21517;&#20026;<span class="emph">&#32907;&#39592;</span> (<span class="emph">rib</span>) &#30340;&#24207;&#23545;&#21015;&#34920;&#34920;&#31034;&#65307;
&#27599;&#26681;&#24038;&#32907;&#26159;&#21464;&#37327;&#21015;&#34920;&#65292;&#21491;&#32907;&#26159;&#23545;&#24212;&#30340;&#20540;&#21015;&#34920;&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616; <span class="stt">extend-env*</span> &#21644;&#20854;&#20182;&#29615;&#22659;&#25509;&#21475;&#12290;
<a name="(idx._(gentag._239))"></a>
<a name="(idx._(gentag._240))"></a>
<a name="(idx._(gentag._241))"></a></p></blockquote></blockquote><h5>2.2.3<tt>&nbsp;</tt><a name="(part._s2..2..3)"></a>&#36807;&#31243;&#34920;&#31034;&#27861;</h5><p><a name="(idx._(gentag._242))"></a>
<a name="(idx._(gentag._243))"></a>
&#29615;&#22659;&#25509;&#21475;&#26377;&#19968;&#26465;&#37325;&#35201;&#24615;&#36136;&#65306;&#23427;&#21482;&#26377; <span class="stt">apply-env</span> &#19968;&#20010;&#35266;&#27979;&#22120;&#12290;&#36825;&#26679;&#23601;&#33021;&#29992;&#21462;&#19968;&#21464;&#37327;&#65292;&#36820;
&#22238;&#32465;&#23450;&#20540;&#30340; Scheme &#36807;&#31243;&#34920;&#31034;&#29615;&#22659;&#12290;</p><p>&#35201;&#36825;&#26679;&#34920;&#31034;&#65292;&#23450;&#20041; <span class="stt">empty-env</span> &#21644; <span class="stt">extend-env</span> &#30340;&#36820;&#22238;&#20540;&#20026;&#36807;&#31243;&#65292;&#35843;&#29992;&#20108;&#32773;&#30340;&#36820;
&#22238;&#20540;&#23601;&#22914;&#21516;&#35843;&#29992;&#19978;&#19968;&#33410;&#30340; <span class="stt">apply-env</span> &#19968;&#26679;&#12290;&#30001;&#27492;&#24471;&#20986;&#19979;&#38754;&#30340;&#23454;&#29616;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline">\mathit{Env} = \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="texMathInline">\mathit{Var} = \mathit{Sym}</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._244))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">empty-env</span></span> : <span class="texMathInline">() \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">empty-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-no-binding-found</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._245))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">extend-env</span></span> : <span class="texMathInline">\mathit{Var} \times \mathit{SchemeVal} \times \mathit{Env} \to \mathit{Env}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">extend-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">saved-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-val</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">saved-val</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">apply-env</span><span class="hspace">&nbsp;</span><span class="RktSym">saved-env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><a name="(idx._(gentag._246))"></a></td></tr><tr><td><span style="font-weight: bold"><span class="stt">apply-env</span></span> : <span class="texMathInline">\mathit{Env} \times \mathit{Var} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">apply-env</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">env</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p><span class="stt">empty-env</span> &#21019;&#24314;&#30340;&#31354;&#29615;&#22659;&#25910;&#21040;&#20219;&#20309;&#21464;&#37327;&#37117;&#20250;&#25253;&#38169;&#65292;&#34920;&#26126;&#32473;&#23450;&#30340;&#21464;&#37327;&#19981;&#22312;&#20854;&#20013;&#12290;&#36807;&#31243;
<span class="stt">extend-env</span> &#36820;&#22238;&#30340;&#36807;&#31243;&#20195;&#34920;&#25193;&#23637;&#32780;&#24471;&#30340;&#29615;&#22659;&#12290;&#36825;&#20010;&#36807;&#31243;&#25910;&#21040;&#21464;&#37327; <span class="stt">search-var</span>
&#21518;&#65292;&#21028;&#26029;&#35813;&#21464;&#37327;&#26159;&#21542;&#19982;&#29615;&#22659;&#20013;&#32465;&#23450;&#30340;&#30456;&#21516;&#12290;&#22914;&#26524;&#30456;&#21516;&#65292;&#23601;&#36820;&#22238;&#20445;&#23384;&#30340;&#20540;&#65307;&#21542;&#21017;&#65292;&#23601;&#22312;&#20445;&#23384;&#30340;
&#29615;&#22659;&#20013;&#26597;&#25214;&#23427;&#12290;</p><p>&#36825;&#31181;&#34920;&#31034;&#27861;&#20013;&#65292;&#25968;&#25454;&#30001; <span class="stt">apply-env</span> <span class="emph">&#25191;&#34892;&#30340;&#21160;&#20316;</span>&#34920;&#31034;&#65292;&#25105;&#20204;&#31216;&#20043;
&#20026;<span class="emph">&#36807;&#31243;&#34920;&#31034;&#27861;</span> (<span class="emph">procedural representation</span>)&#12290;</p><p>&#25968;&#25454;&#31867;&#22411;&#21482;&#26377;&#19968;&#20010;&#35266;&#27979;&#22120;&#30340;&#24773;&#24418;&#24182;&#38750;&#24819;&#35937;&#20013;&#37027;&#33324;&#23569;&#35265;&#12290;&#27604;&#22914;&#65292;&#24403;&#25968;&#25454;&#26159;&#19968;&#32452;&#20989;&#25968;&#65292;&#23601;&#33021;&#29992;&#35843;
&#29992;&#26102;&#25191;&#34892;&#30340;&#21160;&#20316;<a name="(idx._(gentag._247))"></a>&#34920;&#31034;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#25353;&#29031;&#19979;
&#21015;&#27493;&#39588;&#25552;&#28860;&#20986;&#25509;&#21475;&#21644;&#36807;&#31243;&#34920;&#31034;&#27861;&#65306;</p><ol><li><p>&#25214;&#20986;&#23458;&#25143;&#20195;&#30721;&#20013;&#27714;&#21462;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340; lambda &#34920;&#36798;&#24335;&#12290;&#20026;&#27599;&#20010;&#36825;&#26679;&#30340; lambda &#34920;&#36798;&#24335;
&#20889;&#19968;&#20010;&#26500;&#36896;&#22120;&#36807;&#31243;&#12290;&#26500;&#36896;&#22120;&#36807;&#31243;&#30340;&#21442;&#25968;&#29992;&#20316; lambda &#34920;&#36798;&#24335;&#20013;&#30340;&#33258;&#30001;&#21464;&#37327;&#12290;&#22312;&#23458;&#25143;&#20195;&#30721;&#20013;&#65292;
&#29992;&#26500;&#36896;&#22120;&#35843;&#29992;&#26367;&#25442;&#23545;&#24212;&#30340; lambda &#34920;&#36798;&#24335;&#12290;</p></li><li><p>&#20687;&#23450;&#20041; <span class="stt">apply-env</span> &#37027;&#26679;&#23450;&#20041;&#19968;&#20010; <span class="stt">apply-</span> &#36807;&#31243;&#12290;&#25214;&#20986;&#23458;&#25143;&#20195;&#30721;&#20013;&#25152;&#26377;&#20351;
&#29992;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#22320;&#26041;&#65292;&#21253;&#25324;&#26500;&#36896;&#22120;&#36807;&#31243;&#30340;&#20027;&#20307;&#12290;&#25152;&#26377;&#20351;&#29992;&#25351;&#23450;&#31867;&#22411;&#20540;&#30340;&#22320;&#26041;&#37117;&#25913;&#29992;
<span class="stt">apply-</span> &#36807;&#31243;&#12290;</p></li></ol><p><a name="(idx._(gentag._248))"></a>
&#19968;&#26086;&#23436;&#25104;&#36825;&#20123;&#27493;&#39588;&#65292;&#25509;&#21475;&#23601;&#21253;&#21547;&#25152;&#26377;&#30340;&#26500;&#36896;&#22120;&#36807;&#31243;&#21644; <span class="stt">apply-</span> &#36807;&#31243;&#65292;&#23458;&#25143;&#20195;&#30721;&#21017;&#19982;&#34920;
&#31034;&#26080;&#20851;&#65306;&#23427;&#19981;&#20877;&#20381;&#36182;&#34920;&#31034;&#65292;&#25105;&#20204;&#23558;&#33021;&#38543;&#24847;&#25442;&#29992;&#21478;&#19968;&#22871;&#25509;&#21475;&#23454;&#29616;&#65292;&#27491;&#22914; <a href="#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#25152;&#36848;&#12290;</p><p>&#22914;&#26524;&#29992;&#20110;&#23454;&#29616;&#30340;&#35821;&#35328;&#19981;&#25903;&#25345;&#39640;&#38454;&#36807;&#31243;&#65292;&#37027;&#23601;&#24471;&#20877;&#20570;&#19968;&#20123;&#27493;&#39588;&#65292;&#29992;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;&#21644;&#35299;&#37322;&#22120;&#31192;
&#26041;&#23454;&#29616;&#25152;&#38656;&#25509;&#21475;&#65292;&#23601;&#20687;&#19978;&#19968;&#33410;&#37027;&#26679;&#12290;&#36825;&#19968;&#25805;&#20316;&#21483;&#20570;<span class="emph">&#28040;&#20989;</span> (<span class="emph">defunctionalization</span>)&#12290;
<a name="(idx._(gentag._249))"></a>
&#29615;&#22659;&#30340;&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#20013;&#65292;&#21508;&#31181;&#21464;&#20307;&#37117;&#26159;&#28040;&#20989;&#30340;&#31616;&#21333;&#20363;&#23376;&#12290;&#36807;&#31243;&#34920;&#31034;&#27861;&#21644;&#28040;&#20989;&#34920;&#31034;&#27861;&#30340;&#20851;&#31995;&#23558;
&#26159;&#26412;&#20070;&#21453;&#22797;&#20986;&#29616;&#30340;&#20027;&#39064;&#12290;
<a name="(idx._(gentag._250))"></a>
<a name="(idx._(gentag._251))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..12)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._252))"></a>
<a name="(idx._(gentag._253))"></a>
<a name="(idx._(gentag._254))"></a>
<a name="(idx._(gentag._255))"></a>
&#29992;&#36807;&#31243;&#34920;&#31034;&#27861;&#23454;&#29616;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#26632;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..13)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#36807;&#31243;&#34920;&#31034;&#27861;&#65292;&#29992;&#20004;&#20010;&#36807;&#31243;&#32452;&#25104;&#30340;&#21015;&#34920;&#34920;&#31034;&#29615;&#22659;&#65292;&#23454;&#29616; <span class="stt">empty-env?</span>&#12290;&#19968;&#20010;&#36807;&#31243;&#20687;&#21069;
&#38754;&#37027;&#26679;&#65292;&#36820;&#22238;&#21464;&#37327;&#30340;&#32465;&#23450;&#20540;&#65307;&#19968;&#20010;&#36820;&#22238;&#29615;&#22659;&#26159;&#21542;&#20026;&#31354;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..14)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25193;&#23637;&#21069;&#19968;&#39064;&#20013;&#30340;&#34920;&#31034;&#27861;&#65292;&#21152;&#20837;&#31532;&#19977;&#20010;&#36807;&#31243;&#65292;&#29992;&#23427;&#26469; <span class="stt">has-binding?</span> &#65288;&#35265;
<span class="EoplExerciseRef"></span>&#65289;&#12290;
<a name="(idx._(gentag._256))"></a>
<a name="(idx._(gentag._257))"></a></p></blockquote><h4>2.3<tt>&nbsp;</tt><a name="(part._s2..3)"></a>&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</h4><p><a name="(idx._(gentag._258))"></a>
<a href="isd.html" data-pltdoc="x">&#24402;&#32435;&#24335;&#25968;&#25454;&#38598;</a>&#22823;&#37096;&#20998;&#37117;&#22312;&#22788;&#29702;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292;<span class="EoplDefinitionRef"></span> &#32473;&#20986;&#20102;
lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp}
&amp;::= \mathit{Identifier} \\
&amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\
&amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>}\end{align*}</span></p><p>&#25105;&#20204;&#36824;&#20889;&#20986;&#20102;&#36807;&#31243; <span class="stt">occurs-free?</span>&#12290;&#20687;&#24403;&#26102;&#25552;&#21040;&#30340;&#65292;<a href="isd.html#%28part._s1..2..4%29" data-pltdoc="x"><span class="stt">occurs-free?</span></a>&#20013;
<span class="stt">occurs-free?</span> &#30340;&#23450;&#20041;&#19981;&#22823;&#23481;&#26131;&#35835;&#25026;&#12290;&#27604;&#22914;&#65292;&#24456;&#38590;&#25630;&#26126;&#30333; <span class="stt">(car (cadr exp))</span> &#25351;
&#20195; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#20013;&#30340;&#21464;&#37327;&#22768;&#26126;&#65292;&#25110;&#32773; <span class="stt">(caddr exp)</span> &#25351;&#20195;&#34920;&#36798;&#24335;&#30340;&#20027;&#20307;&#12290;</p><p><a name="(idx._(gentag._259))"></a>
&#35201;&#25913;&#21892;&#36825;&#31181;&#24773;&#20917;&#65292;&#21487;&#20197;&#32473; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#28155;&#21152;&#19968;&#22871;&#25509;&#21475;&#12290;&#25105;&#20204;&#30340;&#25509;&#21475;&#26377;&#20960;&#20010;&#26500;&#36896;&#22120;&#65292;&#20197;
&#21450;&#20004;&#31181;&#35266;&#27979;&#22120;&#65306;&#35859;&#35789;&#21644;&#25552;&#21462;&#22120;&#12290;</p><p>&#26500;&#36896;&#22120;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Var} \times \mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \times \mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span></p></td></tr></table></blockquote><p>&#35859;&#35789;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp?</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Bool}</span></p></td></tr></table></blockquote><p><a name="(idx._(gentag._260))"></a>
&#25552;&#21462;&#22120;&#26377;&#65306;</p><blockquote><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span style="font-weight: bold"><span class="stt">var-exp-&gt;var</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Var}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp-&gt;bound-var</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Var}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">lambda-exp-&gt;body</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp-&gt;rator</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span><span class="stt"></span></p></td></tr><tr><td><p><span class="stt"></span><span style="font-weight: bold"><span class="stt">app-exp-&gt;rand</span></span><span class="stt">: </span><span class="texMathInline">\mathit{Lc\mbox{-}Exp} \to \mathit{Lc\mbox{-}Exp}</span></p></td></tr></table></blockquote><p>&#27599;&#20010;&#25552;&#21462;&#22120;&#23545;&#24212; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#20013;&#30340;&#19968;&#37096;&#20998;&#12290;&#29616;&#22312;&#21487;&#20197;&#20889;&#20986;&#19968;&#29256;&#21482;&#20381;&#36182;&#25509;&#21475;&#30340;
<span class="stt">occurs-free?</span>&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><a name="(idx._(gentag._261))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a name="(elem._occurs-free~3f)"></a><span style="font-weight: bold"><span class="stt">occurs-free?</span></span> : <span class="texMathInline">\mathit{Sym} \times \mathit{LcExp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">occurs-free?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">var-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp-&gt;var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp-&gt;bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp-&gt;body</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rator</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rand</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._262))"></a></div></p></blockquote><p>&#21482;&#35201;&#20351;&#29992;&#19978;&#36848;&#26500;&#36896;&#22120;&#65292;&#24590;&#26679;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#37117;&#21487;&#20197;&#12290;
<a name="(idx._(gentag._263))"></a></p><p><a name="(idx._(gentag._264))"></a>
&#25105;&#20204;&#21487;&#20197;&#20889;&#20986;&#35774;&#35745;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#25509;&#21475;&#30340;&#19968;&#33324;&#27493;&#39588;&#65306;</p><blockquote class="Tip"><blockquote class="SCentered"><p><span style="font-weight: bold">&#35774;&#35745;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#25509;&#21475;</span></p></blockquote><blockquote class="TipContent"><ol><li><p>&#20026;&#25968;&#25454;&#31867;&#22411;&#30340;&#27599;&#31181;&#21464;&#20307;&#21152;&#20837;&#19968;&#20010;&#26500;&#36896;&#22120;&#12290;</p></li><li><p>&#20026;&#25968;&#25454;&#31867;&#22411;&#30340;&#27599;&#31181;&#21464;&#20307;&#21152;&#20837;&#19968;&#20010;&#35859;&#35789;&#12290;</p></li><li><p>&#20026;&#20256;&#32473;&#25968;&#25454;&#31867;&#22411;&#26500;&#36896;&#22120;&#30340;&#27599;&#27573;&#25968;&#25454;&#21152;&#20837;&#19968;&#20010;&#25552;&#21462;&#22120;&#12290;
<a name="(idx._(gentag._265))"></a>
<a name="(idx._(gentag._266))"></a></p></li></ol></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..15)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._267))"></a>
&#19978;&#36848;&#35821;&#27861;&#25351;&#23450;&#20102; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#34920;&#31034;&#26041;&#24335;&#65292;&#23454;&#29616;&#20854;&#25509;&#21475;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..16)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20462;&#25913;&#23454;&#29616;&#65292;&#25442;&#29992;&#21478;&#19968;&#31181;&#34920;&#31034;&#65292;&#21435;&#25481; <span class="stt">lambda</span> &#34920;&#36798;&#24335;&#32465;&#23450;&#21464;&#37327;&#21608;&#22260;&#30340;&#25324;&#21495;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..17)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#20877;&#21457;&#26126;&#33267;&#23569;&#20004;&#31181;&#26041;&#24335;&#26469;&#34920;&#31034;&#25968;&#25454;&#31867;&#22411; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#65292;&#23454;&#29616;&#23427;&#20204;&#12290;
<a name="(idx._(gentag._268))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..18)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._269))"></a>
<a name="(idx._(gentag._270))"></a>
&#25105;&#20204;&#24120;&#29992;&#21015;&#34920;&#34920;&#31034;&#20540;&#30340;&#24207;&#21015;&#12290;&#22312;&#36825;&#31181;&#34920;&#31034;&#27861;&#20013;&#65292;&#24456;&#23481;&#26131;&#20174;&#24207;&#21015;&#20013;&#30340;&#19968;&#20010;&#20803;&#32032;&#31227;&#21160;&#21040;&#19979;&#19968;&#20010;&#65292;
&#20294;&#26159;&#19981;&#20511;&#21161;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#24456;&#38590;&#20174;&#19968;&#20010;&#20803;&#32032;&#31227;&#21160;&#21040;&#19978;&#19968;&#20010;&#12290;&#23454;&#29616;&#38750;&#31354;&#21452;&#21521;&#25972;&#25968;&#24207;&#21015;&#65292;&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\[\mathit{NodeInSequence} ::= <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">
</span><span class="Iidentity">\mathit{Listof<span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>}</span><span class="stt"> </span><span class="Iidentity">\mathit{Listof<span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>}</span><span class="stt">)</span>\]</span></p><p>&#31532;&#19968;&#20010;&#25972;&#25968;&#21015;&#34920;&#26159;&#24403;&#21069;&#20803;&#32032;&#20043;&#21069;&#30340;&#24207;&#21015;&#65292;&#21453;&#21521;&#25490;&#21015;&#12290;&#31532;&#20108;&#20010;&#21015;&#34920;&#26159;&#24403;&#21069;&#20803;&#32032;&#20043;&#21518;&#30340;&#24207;&#21015;&#12290;&#20363;
&#22914;&#65292;<span class="stt">(6 (5 4 3 2 1) (7 8 9))</span> &#34920;&#31034;&#21015;&#34920; <span class="stt">(1 2 3 4 5 6 7 8 9)</span>&#65292;&#24403;&#21069;&#20803;&#32032;&#20026;6&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;&#36807;&#31243; <span class="stt">number-&gt;sequence</span>&#65292;&#23427;&#21462;&#19968;&#25968;&#23383;&#65292;&#29983;&#25104;&#21482;&#21253;&#21547;&#35813;&#25968;&#23383;&#30340;&#24207;&#21015;&#12290;&#25509;
&#30528;&#23454;&#29616; <span class="stt">current-element</span>&#12289;<span class="stt">move-to-left</span>&#12289;<span class="stt">move-to-right</span>&#12289;
<span class="stt">insert-to-left</span>&#12289;<span class="stt">insert-to-right</span>&#12289;<span class="stt">at-left-end?</span> &#21644;
<span class="stt">at-right-end?</span>&#12290;</p><p>&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">number-&gt;sequence</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(7<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">current-element</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">6</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(5<span class="stt"> </span>(4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(6<span class="stt"> </span>7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(7<span class="stt"> </span>(6<span class="stt"> </span>5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(6<span class="stt"> </span>(13<span class="stt"> </span>5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">7</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">9</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(6<span class="stt"> </span>(5<span class="stt"> </span>4<span class="stt"> </span>3<span class="stt"> </span>2<span class="stt"> </span>1)<span class="stt"> </span>(13<span class="stt"> </span>7<span class="stt"> </span>8<span class="stt"> </span>9))</span></p></td></tr></table></blockquote></blockquote><p>&#22914;&#26524;&#21442;&#25968;&#22312;&#24207;&#21015;&#26368;&#21491;&#31471;&#65292;&#36807;&#31243;<span class="stt">move-to-right</span>&#24212;&#22833;&#36133;&#12290;&#22914;&#26524;&#21442;&#25968;&#22312;&#24207;&#21015;&#26368;&#24038;&#31471;&#65292;&#36807;&#31243;
<span class="stt">move-to-left</span>&#24212;&#22833;&#36133;&#12290;
<a name="(idx._(gentag._271))"></a>
<a name="(idx._(gentag._272))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..19)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._273))"></a>
&#31354;&#20108;&#21449;&#26641;&#21644;&#29992;&#25972;&#25968;&#26631;&#35760;&#20869;&#37096;&#33410;&#28857;&#30340;&#20108;&#21449;&#26641;&#21487;&#20197;&#29992;&#35821;&#27861;&#34920;&#31034;&#20026;&#65306;</p><p><span class="Iidentity">\[\mathit{BinTree} ::= <span class="stt">()</span> \mid <span class="stt">(</span><span class="Iidentity">\mathit{Int}</span><span class="stt"> </span><span class="Iidentity">\mathit{BinTree}</span><span class="stt">
</span><span class="Iidentity">\mathit{BinTree}</span><span class="stt">)</span>\]</span></p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;&#36807;&#31243; <span class="stt">number-&gt;bintree</span>&#65292;&#23427;&#21462;&#19968;&#20010;&#25972;&#25968;&#65292;&#20135;&#29983;&#19968;&#26869;&#26032;&#30340;&#20108;&#21449;&#26641;&#65292;&#26641;&#30340;
&#21807;&#19968;&#33410;&#28857;&#21253;&#21547;&#35813;&#25968;&#23383;&#12290;&#25509;&#30528;&#23454;&#29616; <span class="stt">current-element</span>&#12289;<span class="stt">move-to-left-son</span>&#12289;
<span class="stt">move-to-right-son</span>&#12289;<span class="stt">at-leaf?</span>&#12289;<span class="stt">insert-to-left</span> &#21644;
<span class="stt">insert-to-right</span>&#12290;&#20363;&#22914;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">number-&gt;bintree</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-to-right</span><span class="hspace">&nbsp;</span><span class="RktVal">14</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-&gt;bintree</span><span class="hspace">&nbsp;</span><span class="RktVal">13</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">t1</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>(12<span class="stt"> </span>()<span class="stt"> </span>())<span class="stt"> </span>(14<span class="stt"> </span>()<span class="stt"> </span>()))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(12<span class="stt"> </span>()<span class="stt"> </span>())</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">current-element</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">12</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">at-leaf?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-right-son</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">move-to-left-son</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">insert-to-left</span><span class="hspace">&nbsp;</span><span class="RktVal">15</span><span class="hspace">&nbsp;</span><span class="RktSym">t1</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(13<span class="stt"> </span>(15<span class="stt"> </span>(12<span class="stt"> </span>()<span class="stt"> </span>())<span class="stt"> </span>())<span class="stt"> </span>(14<span class="stt"> </span>()<span class="stt"> </span>()))</span></p></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..20)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#25353;&#29031;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#20108;&#21449;&#26641;&#34920;&#31034;&#65292;&#24456;&#23481;&#26131;&#20174;&#29238;&#33410;&#28857;&#31227;&#21040;&#26576;&#20010;&#23376;&#33410;&#28857;&#65292;&#20294;&#26159;&#19981;&#20511;
&#21161;&#19978;&#19979;&#25991;&#21442;&#25968;&#65292;&#26080;&#27861;&#20174;&#23376;&#33410;&#28857;&#31227;&#21160;&#21040;&#29238;&#33410;&#28857;&#12290;&#25193;&#23637;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#21015;&#34920;&#34920;&#31034;&#27861;&#65292;
&#29992;&#20197;&#34920;&#31034;&#20108;&#21449;&#26641;&#20013;&#30340;&#33410;&#28857;&#12290;&#25552;&#31034;&#65306;&#24819;&#24819;&#24590;&#26679;&#29992;&#36870;&#24207;&#21015;&#34920;&#34920;&#31034;&#20108;&#21449;&#26641;&#22312;&#24403;&#21069;&#33410;&#28857;&#20197;&#19978;&#30340;&#37096;&#20998;&#65292;
&#23601;&#20687;<span class="EoplExerciseRef"></span> &#37027;&#26679;&#12290;</p><p>&#29992;&#36825;&#31181;&#34920;&#31034;&#23454;&#29616;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#36807;&#31243;&#12290;&#25509;&#30528;&#23454;&#29616; <span class="stt">move-up</span> &#21644;
<span class="stt">at-root?</span>&#12290;</p></blockquote><h4>2.4<tt>&nbsp;</tt><a name="(part._s2..4)"></a>&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#30340;&#24037;&#20855;</h4><p><a name="(idx._(gentag._274))"></a>
&#23545;&#22797;&#26434;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#25353;&#29031;&#19978;&#36848;&#27493;&#39588;&#35774;&#35745;&#25509;&#21475;&#24456;&#24555;&#23601;&#20250;&#20351;&#20154;&#21388;&#20518;&#12290;&#26412;&#33410;&#20171;&#32461;&#29992; Scheme &#33258;&#21160;&#35774;
&#35745;&#21644;&#23454;&#29616;&#25509;&#21475;&#30340;&#24037;&#20855;&#12290;&#36825;&#20010;&#24037;&#20855;&#20135;&#29983;&#30340;&#25509;&#21475;&#19982;&#21069;&#19968;&#33410;&#30340;&#34429;&#19981;&#23436;&#20840;&#30456;&#21516;&#65292;&#21364;&#24456;&#31867;&#20284;&#12290;</p><p><a name="(idx._(gentag._275))"></a>
<a name="(idx._(gentag._276))"></a>
&#20173;&#32771;&#34385;&#21069;&#19968;&#33410;&#35752;&#35770;&#30340;&#25968;&#25454;&#31867;&#22411; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#25509;&#21475;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._lc-exp)"></a><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">identifier?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">body</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324;&#30340;&#21517;&#23383; <span class="stt">var-exp</span>&#12289;<span class="stt">var</span>&#12289;<span class="stt">bound-var</span>&#12289;<span class="stt">app-exp</span>&#12289;<span class="stt">rator</span> &#21644;
<span class="stt">rand</span> &#20998;&#21035;&#26159; <span class="emph">&#21464;&#37327;&#34920;&#36798;&#24335;</span> (<span class="emph">variable expression</span>)&#12289;<span class="emph">&#21464;
&#37327;</span> (<span class="emph">variable</span>)&#12289;<span class="emph">&#32465;&#23450;&#21464;&#37327;</span> (<span class="emph">bound variable</span>)&#12289;<span class="emph">&#35843;&#29992;&#34920;&#36798;
&#24335;</span> (<span class="emph">application expression</span>)&#12289;<span class="emph">&#25805;&#20316;&#31526;</span> (<span class="emph">operator</span>) &#21644;<span class="emph">&#25805;&#20316;&#25968;</span> (<span class="emph">operand</span>) &#30340;&#32553;&#20889;&#12290;</p><p>&#36825;&#20123;&#34920;&#36798;&#24335;&#22768;&#26126;&#20102;&#19977;&#31181;&#26500;&#36896;&#22120;&#65306;<span class="stt">var-exp</span>&#12289;<span class="stt">lambda-exp</span> &#21644; <span class="stt">app-exp</span>&#65292;&#20197;&#21450;
&#19968;&#20010;&#35859;&#35789; <span class="stt">lc-exp?</span>&#12290;&#19977;&#20010;&#26500;&#36896;&#22120;&#29992;&#35859;&#35789; <span class="stt">identifier?</span> &#21644; <span class="stt">lc-exp?</span> &#26816;&#26597;&#23427;
&#20204;&#30340;&#21442;&#25968;&#65292;&#30830;&#20445;&#21442;&#25968;&#21512;&#27861;&#12290;&#25152;&#20197;&#65292;&#22914;&#26524;&#29983;&#25104; lc-exp &#26102;&#21482;&#29992;&#36825;&#20123;&#26500;&#36896;&#22120;&#65292;&#21487;&#20197;&#30830;&#20445;&#34920;&#36798;&#24335;&#21450;
&#20854;&#25152;&#26377;&#23376;&#34920;&#36798;&#24335;&#21512;&#27861;&#12290;&#22914;&#27492;&#19968;&#26469;&#65292;&#22788;&#29702; lambda &#34920;&#36798;&#24335;&#26102;&#23601;&#33021;&#36339;&#36807;&#35768;&#22810;&#26816;&#26597;&#12290;</p><p><a name="(idx._(gentag._277))"></a>
<a name="(idx._(gentag._278))"></a>
&#25105;&#20204;&#29992;&#24418;&#24335; <span class="stt">cases</span> &#20195;&#26367;&#35859;&#35789;&#21644;&#25552;&#21462;&#22120;&#65292;&#21028;&#26029;&#25968;&#25454;&#31867;&#22411;&#30340;&#23454;&#20363;&#23646;&#20110;&#21738;&#31181;&#21464;&#20307;&#65292;&#24182;&#25552;&#21462;&#20986;
&#23427;&#30340;&#32452;&#20214;&#12290;&#20026;&#35299;&#37322;&#36825;&#19968;&#24418;&#24335;&#65292;&#25105;&#20204;&#29992;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#37325;&#20889;
<span class="stt">occurs-free?</span>&#65288;<span class="stt">occurs-free?</span>&#65289;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="texMathInline"><span style="font-weight: bold"><span class="stt">occurs-free?</span></span> : \mathit{Sym} \times \mathit{LcExp} \to \mathit{Bool}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">occurs-free?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">bound-var</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#35201;&#29702;&#35299;&#23427;&#65292;&#20551;&#35774; <span class="stt">exp</span> &#26159;&#30001; <span class="stt">app-exp</span> &#29983;&#25104;&#30340; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;&#26681;&#25454;
<span class="stt">exp</span> &#30340;&#21462;&#20540;&#65292;&#20998;&#25903; <span class="stt">app-exp</span> &#23558;&#34987;&#36873;&#20013;&#65292;<span class="stt">rator</span> &#21644; <span class="stt">rand</span> &#21017;&#32465;&#23450;&#21040;&#20004;
&#20010;&#23376;&#34920;&#36798;&#24335;&#65292;&#25509;&#30528;&#65292;&#34920;&#36798;&#24335;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23558;&#20250;&#27714;&#20540;&#65292;&#23601;&#20687;&#25105;&#20204;&#20889;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp?</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rator</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rand</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp-&gt;rand</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="hspace">&nbsp;</span><span class="RktSym">search-var</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktSym">...</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36882;&#24402;&#35843;&#29992; <span class="stt">occurs-free?</span> &#20687;&#36825;&#26679;&#23436;&#25104;&#36816;&#31639;&#12290;
<a name="(idx._(gentag._279))"></a></p></blockquote><p>&#19968;&#33324;&#30340; <span class="stt">define-datatype</span> &#22768;&#26126;&#24418;&#22914;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(elem._define-datatype)"></a><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}name</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}predicate\mbox{-}name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="texMathInline">\{<span class="stt">(</span>variant\mbox{-}name \quad \{<span class="stt">(</span>filed\mbox{-}name \quad predicate<span class="stt">)</span>\}^{*} <span class="stt">)</span>\}^{+}</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#26032;&#23450;&#20041;&#20102;&#19968;&#31181;&#25968;&#25454;&#31867;&#22411;&#65292;&#21517;&#20026; <span class="texMathInline">type\mbox{-}name</span>&#65292;&#23427;&#26377;&#19968;&#20123;<span class="emph">&#21464;
&#20307;</span> (<span class="emph">variants</span>)&#12290;<a name="(idx._(gentag._280))"></a>&#27599;&#20010;&#21464;&#20307;&#26377;&#19968;&#21464;&#20307;&#21517;&#65292;&#20197;&#21450; 0 &#25110;&#22810;&#20010;&#23383;&#27573;&#65292;&#27599;&#20010;&#23383;&#27573;&#21508;&#26377;&#20854;
&#23383;&#27573;&#21517;&#21644;&#30456;&#24212;&#30340;&#35859;&#35789;&#12290;&#19981;&#35770;&#26159;&#21542;&#23646;&#20110;&#19981;&#21516;&#30340;&#31867;&#22411;&#65292;&#21464;&#20307;&#37117;&#19981;&#33021;&#37325;&#21517;&#12290;&#31867;&#22411;&#20063;&#19981;&#33021;&#37325;&#21517;&#65292;&#19988;&#31867;
&#22411;&#21517;&#19981;&#33021;&#29992;&#20316;&#21464;&#20307;&#21517;&#12290;&#27599;&#20010;&#23383;&#27573;&#30340;&#35859;&#35789;&#24517;&#39035;&#26159;&#19968;&#20010; Scheme &#35859;&#35789;&#12290;</p><p>&#27599;&#20010;&#21464;&#20307;&#37117;&#26377;&#19968;&#20010;&#26500;&#36896;&#22120;&#36807;&#31243;&#65292;&#29992;&#20110;&#21019;&#24314;&#35813;&#21464;&#20307;&#30340;&#20540;&#12290;&#36825;&#20123;&#36807;&#31243;&#30340;&#21517;&#23383;&#19982;&#23545;&#24212;&#30340;&#21464;&#20307;&#30456;&#21516;&#12290;
&#22914;&#26524;&#19968;&#20010;&#21464;&#20307;&#26377; <span class="texMathInline">n</span> &#20010;&#23383;&#27573;&#65292;&#37027;&#20040;&#23427;&#30340;&#26500;&#36896;&#22120;&#21462; <span class="texMathInline">n</span> &#20010;&#21442;&#25968;&#65292;&#29992;&#23545;&#24212;&#30340;&#35859;&#35789;&#26816;&#26597;&#27599;&#20010;
&#21442;&#25968;&#20540;&#65292;&#24182;&#36820;&#22238;&#21464;&#20307;&#20540;&#65292;&#20540;&#30340;&#31532; <span class="texMathInline">i</span> &#20010;&#23383;&#27573;&#20026;&#31532; <span class="texMathInline">i</span> &#20010;&#21442;&#25968;&#20540;&#12290;</p><p><span class="texMathInline">type\mbox{-}predicate\mbox{-}name</span> &#32465;&#23450;&#21040;&#19968;&#20010;&#35859;&#35789;&#12290;&#36825;&#20010;&#35859;&#35789;&#21028;&#26029;&#20854;&#21442;&#25968;&#20540;&#26159;&#21542;&#26159;
&#30456;&#24212;&#30340;&#31867;&#22411;&#12290;</p><p><span class="emph">&#35760;&#24405;&#34920;</span> (<span class="emph">record</span>)<a name="(idx._(gentag._281))"></a> &#21487;&#20197;&#29992;&#21482;&#26377;&#19968;&#31181;&#21464;&#20307;&#30340;&#25968;&#25454;&#31867;&#22411;&#23450;&#20041;&#12290;
&#20026;&#20102;&#21306;&#20998;&#21482;&#26377;&#19968;&#31181;&#21464;&#20307;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#25105;&#20204;&#36981;&#24490;&#19968;&#31181;&#21629;&#21517;&#24815;&#20363;&#65306;&#24403;&#21482;&#26377;&#19968;&#20010;&#21464;&#20307;&#26102;&#65292;&#25105;&#20204;&#20197;
<span class="stt">a-</span><span class="texMathInline">type\mbox{-}name</span>
<a name="(idx._(gentag._282))"></a>
&#25110; <span class="stt">an-</span><span class="texMathInline">type\mbox{-}name</span> &#21629;&#21517;&#26500;&#36896;&#22120;&#65307;&#21542;&#21017;&#65292;&#20197;
<span class="texMathInline">variant\mbox{-}name\mbox{-}type\mbox{-}name</span> &#21629;&#21517;&#26500;&#36896;&#22120;&#12290;</p><p><a name="(idx._(gentag._283))"></a>
<a name="(idx._(gentag._284))"></a>
<a name="(idx._(gentag._285))"></a>
<a name="(idx._(gentag._286))"></a>
&#30001; <span class="stt">define-datatype</span> &#29983;&#25104;&#30340;&#25968;&#25454;&#32467;&#26500;&#21487;&#20197;&#20114;&#36882;&#24402;&#12290;&#20363;&#22914;&#65292;<a href="isd.html#%28part._s1..1%29" data-pltdoc="x">&#36882;&#25512;&#23450;&#20041;&#30340;&#25968;&#25454;</a>&#20013;&#30340; s-list
&#35821;&#27861;&#20026;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{S\mbox{-}list} &amp;::= {\normalfont{<span class="stt">(</span><span class="Iidentity">\{\mathit{S\mbox{-}exp}\}^{*}</span><span class="stt">)</span>}} \\
\mathit{S\mbox{-}exp} &amp;::= \mathit{Symbol} \mid \mathit{S\mbox{-}list}\end{align*}</span></p><p>s-list&#20013;&#30340;&#25968;&#25454;&#21487;&#20197;&#29992;&#25968;&#25454;&#31867;&#22411; <span class="stt">s-list</span>&#34920;&#31034;&#20026;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty-s-list</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">non-empty-s-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rest</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">symbol-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sym</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s-list-s-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">slst</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25968;&#25454;&#31867;&#22411; <span class="stt">s-list</span> &#29992; <span class="stt">(empty-s-list)</span> &#21644; <span class="stt">non-empty-s-list</span> &#20195;&#26367;
<span class="stt">()</span> &#21644; <span class="stt">cons</span> &#26469;&#34920;&#31034;&#21015;&#34920;&#12290;&#22914;&#26524;&#25105;&#20204;&#36824;&#24819;&#29992; Scheme &#21015;&#34920;&#65292;&#21487;&#20197;&#20889;&#25104;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list</span><span class="hspace">&nbsp;</span><span class="RktSym">s-list?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">an-s-list</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sexps</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">s-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">list-of</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">or</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">list-of</span><span class="hspace">&nbsp;</span><span class="RktSym">pred</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">val</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#36825;&#37324; <span class="stt">(list-of </span><span class="texMathInline">pred</span><span class="stt">)</span> &#29983;&#25104;&#19968;&#20010;&#35859;&#35789;&#65292;&#26816;&#26597;&#20854;&#21442;&#25968;&#20540;&#26159;&#21542;&#26159;&#19968;&#20010;&#21015;&#34920;&#65292;&#19988;&#21015;&#34920;&#30340;
&#27599;&#20010;&#20803;&#32032;&#37117;&#28385;&#36275; <span class="texMathInline">pred</span>&#12290;
<a name="(idx._(gentag._287))"></a>
<a name="(idx._(gentag._288))"></a></p></blockquote><p><a name="(idx._(gentag._289))"></a>
<span class="stt">cases</span> &#35821;&#27861;&#30340;&#19968;&#33324;&#22995;&#24418;&#24335;&#20026;&#65306;</p><blockquote class="SubFlow"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="texMathInline">type\mbox{-}name</span><span class="hspace">&nbsp;</span><span class="texMathInline">expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="texMathInline">\{<span class="stt">(</span>variant\mbox{-}name \phantom{x} <span class="stt">(</span>\{filed\mbox{-}name\}^{*}<span class="stt">)</span> \phantom{x} consequent<span class="stt">)</span>\}^{*}</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="texMathInline">default</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>&#35813;&#24418;&#24335;&#25351;&#23450;&#31867;&#22411;&#65292;&#19968;&#20010;&#24453;&#27714;&#20540;&#21644;&#26816;&#26597;&#30340;&#34920;&#36798;&#24335;&#65292;&#20197;&#21450;&#19968;&#20123;&#20174;&#21477;&#12290;&#27599;&#20010;&#20174;&#21477;&#20197;&#25351;&#23450;&#31867;&#22411;&#30340;&#26576;&#19968;
&#21464;&#20307;&#21517;&#21450;&#30456;&#24212;&#23383;&#27573;&#21517;&#20026;&#26631;&#35782;&#12290;<span class="stt">else</span> &#20174;&#21477;&#21487;&#26377;&#21487;&#26080;&#12290;&#39318;&#20808;&#27714; <span class="texMathInline">expression</span> &#30340;&#20540;&#65292;&#24471;
&#21040; <span class="texMathInline">type\mbox{-}name</span> &#30340;&#26576;&#20010;&#20540; <span class="texMathInline">v</span>&#12290;&#22914;&#26524; <span class="texMathInline">v</span> &#26159;&#26576;&#20010;
<span class="texMathInline">variant\mbox{-}name</span> &#30340;&#21464;&#20307;&#65292;&#37027;&#23601;&#36873;&#20013;&#23545;&#24212;&#30340;&#20174;&#21477;&#12290;&#21508; <span class="texMathInline">type\mbox{-}name</span> &#32465;&#23450;
&#21040; <span class="texMathInline">v</span> &#20013;&#23545;&#24212;&#30340;&#23383;&#27573;&#20540;&#12290;&#28982;&#21518;&#22312;&#36825;&#20123;&#32465;&#23450;&#30340;&#20316;&#29992;&#22495;&#20869;&#27714;&#21462;&#24182;&#36820;&#22238; <span class="texMathInline">consequent</span> &#30340;&#20540;&#12290;
&#22914;&#26524; <span class="texMathInline">v</span> &#19981;&#23646;&#20110;&#20219;&#20309;&#21464;&#20307;&#65292;&#19988;&#26377; <span class="stt">else</span> &#20174;&#21477;&#65292;&#21017;&#27714;&#21462;&#24182;&#36820;&#22238; <span class="texMathInline">default</span> &#30340;&#20540;&#12290;
&#22914;&#26524;&#27809;&#26377; <span class="stt">else</span> &#20174;&#21477;&#65292;&#24517;&#39035;&#20026;&#25351;&#23450;&#25968;&#25454;&#31867;&#22411;&#30340;<span class="emph">&#27599;&#20010;</span>&#21464;&#20307;&#25351;&#23450;&#20174;&#21477;&#12290;</p></blockquote><p>&#24418;&#24335; <span class="stt">cases</span> &#26681;&#25454;&#20301;&#32622;&#32465;&#23450;&#21464;&#37327;&#65306; &#31532; <span class="texMathInline">i</span> &#20010;&#21464;&#37327;&#32465;&#23450;&#21040;&#31532; <span class="texMathInline">i</span> &#20010;&#23383;&#27573;&#12290;&#25152;&#20197;&#65292;
&#25105;&#20204;&#21487;&#20197;&#29992;&#65306;</p><blockquote class="SubFlow"><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">exp1</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">or</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp1</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">exp2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote><p>&#20195;&#26367;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">or</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rator</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktMeta"></span><span class="RktPn">(</span><span class="RktSym">occurs-free?</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">search-var</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktMeta"></span></td></tr></table></blockquote></blockquote></blockquote><p><span class="stt">define-datatype</span> &#21644; <span class="stt">cases</span> &#24418;&#24335;&#25552;&#20379;&#20102;&#19968;&#31181;&#31616;&#27905;&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#65292;
&#20294;&#36825;&#31181;&#26041;&#24335;&#24182;&#19981;&#26159;&#21807;&#19968;&#30340;&#12290;&#26681;&#25454;&#20351;&#29992;&#22330;&#26223;&#65292;&#21487;&#33021;&#24471;&#29992;&#19987;&#38376;&#30340;&#34920;&#31034;&#26041;&#24335;&#65292;&#23427;&#20204;&#21033;&#29992;&#25968;&#25454;&#30340;&#29305;&#27530;
&#24615;&#36136;&#65292;&#26356;&#32039;&#20945;&#25110;&#32773;&#26356;&#39640;&#25928;&#12290;&#33719;&#24471;&#36825;&#20123;&#20248;&#21183;&#30340;&#20195;&#20215;&#26159;&#24517;&#39035;&#21160;&#25163;&#23454;&#29616;&#25509;&#21475;&#20013;&#30340;&#36807;&#31243;&#12290;</p><p><a name="(idx._(gentag._290))"></a>
<span class="stt">define-datatype</span> &#24418;&#24335;&#26159;<span class="emph">&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;</span> (<span class="emph">domain-specific language</span>) &#30340;&#20363;
&#23376;&#12290;&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;&#26159;&#19968;&#31181;&#23567;&#24039;&#30340;&#35821;&#35328;&#65292;&#29992;&#26469;&#25551;&#36848;&#23567;&#32780;&#26126;&#30830;&#30340;&#20219;&#21153;&#20013;&#30340;&#21333;&#19968;&#20219;&#21153;&#12290;&#26412;&#20363;&#20013;&#30340;&#20219;
&#21153;&#26159;&#23450;&#20041;&#19968;&#31181;&#36882;&#25512;&#25968;&#25454;&#31867;&#22411;&#12290;&#36825;&#31181;&#35821;&#35328;&#21487;&#33021;&#20687; <span class="stt">define-datatype</span> &#19968;&#26679;&#65292;&#23384;&#22312;&#20110;&#36890;&#29992;&#35821;
&#35328;&#20013;&#65307;&#20063;&#21487;&#33021;&#26159;&#19968;&#38376;&#21333;&#29420;&#30340;&#35821;&#35328;&#65292;&#21035;&#26377;&#19968;&#22871;&#24037;&#20855;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#21019;&#36896;&#36825;&#31867;&#35821;&#35328;&#39318;&#20808;&#35201;&#25214;&#20986;&#20219;&#21153;
&#30340;&#19981;&#21516;&#21464;&#20307;&#65292;&#28982;&#21518;&#35774;&#35745;&#35821;&#35328;&#65292;&#25551;&#36848;&#36825;&#20123;&#21464;&#20307;&#12290;&#36825;&#31181;&#31574;&#30053;&#36890;&#24120;&#38750;&#24120;&#26377;&#25928;&#12290;
<a name="(idx._(gentag._291))"></a>
<a name="(idx._(gentag._292))"></a>
<a name="(idx._(gentag._293))"></a>
<a name="(idx._(gentag._294))"></a></p><blockquote class="EoplExercise"><p><a name="(elem._ex2..21)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._295))"></a>
&#29992; <span class="stt">define-datatype</span> &#23454;&#29616;<a href="#%28part._s2..2..2%29" data-pltdoc="x">&#25968;&#25454;&#32467;&#26500;&#34920;&#31034;&#27861;</a>&#20013;&#30340;&#29615;&#22659;&#25968;&#25454;&#31867;&#22411;&#12290;&#28982;&#21518;
&#23454;&#29616;<span class="EoplExerciseRef"></span> &#20013;&#30340; <span class="stt">has-binding?</span>&#12290;
<a name="(idx._(gentag._296))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..22)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._297))"></a>
&#29992; <span class="stt">define-datatype</span> &#23454;&#29616;<span class="EoplExerciseRef"></span> &#20013;&#30340;&#26632;&#25968;&#25454;&#31867;&#22411;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..23)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._298))"></a>
<span class="stt">lc-exp</span> &#30340;&#23450;&#20041;&#24573;&#30053;&#20102;<span class="EoplDefinitionRef"></span> &#20013;&#30340;&#26465;&#20214;&#65306;
&#8220;<span class="texMathInline">\mathit{Identifier}</span> &#26159;&#38500; <span class="stt">lambda</span> &#20043;&#22806;&#30340;&#20219;&#20309;&#31526;&#21495;&#12290;
&#8221;&#20462;&#25913; <span class="stt">identifier?</span> &#30340;&#23450;&#20041;&#65292;&#34917;&#20805;&#36825;&#19968;&#26465;&#20214;&#12290;&#25552;&#31034;&#65306;&#20219;&#20309;&#35859;&#35789;&#37117;&#33021;&#22312;
<span class="stt">define-datatype</span> &#20013;&#20351;&#29992;&#65292;&#20320;&#23450;&#20041;&#30340;&#20063;&#33021;&#12290;
<a name="(idx._(gentag._299))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..24)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._300))"></a>
&#36825;&#26159;&#29992; <span class="stt">define-datatype</span> &#34920;&#31034;&#30340;&#20108;&#21449;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">key</span><span class="hspace">&nbsp;</span><span class="RktSym">symbol?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym">bintree?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#23454;&#29616;&#25805;&#20316;&#20108;&#21449;&#26641;&#30340;&#36807;&#31243; <span class="stt">bintree-to-list</span>&#65292;&#21017; <span class="stt">(bintree-to-list</span><span class="stt">
</span><span class="stt">(interior-node </span><span class="stt">&rsquo;</span><span class="stt">a (leaf-node 3) (leaf-node 4)))</span> &#24212;&#36820;&#22238;&#21015;&#34920;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">interior-node</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">a</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..25)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._301))"></a>
&#29992; <span class="stt">cases</span> &#20889;&#20986; <span class="stt">max-interior</span>&#65292;&#23427;&#21462;&#33267;&#23569;&#26377;&#19968;&#20010;&#20869;&#37096;&#33410;&#28857;&#30340;&#25972;&#25968;&#20108;&#21449;&#26641;&#65288;&#20687;&#21069;&#19968;
&#36947;&#32451;&#20064;&#37027;&#26679;&#65289;&#65292;&#36820;&#22238;&#21494;&#23376;&#20043;&#21644;&#26368;&#22823;&#30340;&#20869;&#37096;&#33410;&#28857;&#23545;&#24212;&#30340;&#26631;&#31614;&#12290;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-1</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">foo</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bar</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-3</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interior-node</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">baz</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-node</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">max-interior</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-2</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'foo</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">max-interior</span><span class="hspace">&nbsp;</span><span class="RktSym">tree-3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'baz</span></p></td></tr></table></blockquote></blockquote><p>&#26368;&#21518;&#19968;&#27425;&#35843;&#29992; <span class="stt">max-interior</span> &#20063;&#21487;&#33021;&#36820;&#22238; <span class="stt">foo</span>&#65292;&#22240;&#20026;&#33410;&#28857; <span class="stt">foo</span> &#21644;
<span class="stt">baz</span> &#30340;&#21494;&#23376;&#20043;&#21644;&#37117;&#20026; 5&#12290;
<a name="(idx._(gentag._302))"></a>
<a name="(idx._(gentag._303))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..26)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._304))"></a>
<span class="EoplExerciseRef"></span> &#36824;&#26377;&#19968;&#31181;&#20889;&#27861;&#12290;&#26641;&#30340;&#38598;&#21512;&#21487;&#20197;&#29992;&#19979;&#21015;&#35821;&#27861;&#23450;&#20041;&#65306;</p><p><span class="Iidentity">\begin{align*}\mathit{Red\mbox{-}blue\mbox{-}tree} &amp;::= \mathit{Red\mbox{-}blue\mbox{-}subtree} \\
\mathit{Red\mbox{-}blue\mbox{-}subtree} &amp;::= <span class="stt">(red-node </span><span class="Iidentity">\mathit{Red\mbox{-}blue\mbox{-}subtree}</span><span class="stt"> </span><span class="Iidentity">\mathit{Red\mbox{-}blue\mbox{-}subtree}</span><span class="stt">)</span> \\
                               &amp;::= <span class="stt">(blue-node </span><span class="Iidentity">\{\mathit{Red\mbox{-}blue\mbox{-}subtree}\}^{*}</span><span class="stt">)</span> \\
                               &amp;::= <span class="stt">(leaf-node </span><span class="Iidentity">\mathit{Int}</span><span class="stt">)</span>\end{align*}</span></p><p>&#29992; <span class="stt">define-datatype</span> &#20889;&#20986;&#31561;&#20215;&#23450;&#20041;&#65292;&#29992;&#24471;&#21040;&#30340;&#25509;&#21475;&#20889;&#20986;&#19968;&#20010;&#36807;&#31243;&#65292;&#23427;&#21462;&#19968;&#26869;&#26641;&#65292;&#29983;&#25104;
&#24418;&#29366;&#30456;&#21516;&#30340;&#21478;&#19968;&#26869;&#26641;&#65292;&#20294;&#25226;&#27599;&#29255;&#21494;&#23376;&#30340;&#20540;&#25913;&#20026;&#20174;&#24403;&#21069;&#21494;&#23376;&#33410;&#28857;&#21040;&#26641;&#26681;&#20043;&#38388;&#32418;&#33394;&#33410;&#28857;&#30340;&#25968;&#30446;&#12290;
<a name="(idx._(gentag._305))"></a></p></blockquote><h4>2.5<tt>&nbsp;</tt><a name="(part._s2..5)"></a>&#25277;&#35937;&#35821;&#27861;&#21450;&#20854;&#34920;&#31034;</h4><p><div class="SIntrapara"><a name="(idx._(gentag._306))"></a>
<a name="(idx._(gentag._307))"></a>
</div><div class="SIntrapara"><blockquote class="EoplFigure"><p><div class="SIntrapara">[!t]</div><div class="SIntrapara"><blockquote class="SCentered"><p><img src="ast.svg" alt="(lambda (x) (f (f x)))的抽象语法树" width="478.8pt" height="284.4pt"/></p></blockquote></div></p><blockquote class="caption"><p><span class="stt">(lambda (x) (f (f x)))</span> &#30340;&#25277;&#35937;&#35821;&#27861;&#26641;<a name="(elem._fig-2..2)"></a></p></blockquote></blockquote></div></p><p><a name="(idx._(gentag._308))"></a>
<a name="(idx._(gentag._309))"></a>
&#35821;&#27861;&#36890;&#24120;&#25351;&#23450;&#24402;&#32435;&#24335;&#25968;&#25454;&#31867;&#22411;&#30340;&#26576;&#19968;&#20855;&#20307;&#34920;&#31034;&#65292;&#21518;&#32773;&#20351;&#29992;&#21069;&#32773;&#29983;&#25104;&#30340;&#23383;&#31526;&#20018;&#25110;&#20540;&#12290;&#36825;&#31181;&#34920;&#31034;
&#21483;&#20570;<span class="emph">&#20855;&#20307;&#35821;&#27861;</span> (<span class="emph">concrete syntax</span>)&#65292;&#25110;<span class="emph">&#22806;&#22312;</span> (<span class="emph">external</span>) &#34920;&#31034;&#12290;</p><p>&#20363;&#22914;&#65292;<span class="EoplDefinitionRef"></span> &#25351;&#23450;&#38598;&#21512; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#65292;&#29992;&#30340;&#23601;&#26159; lambda &#28436;&#31639;&#34920;
&#36798;&#24335;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#25105;&#20204;&#21487;&#20197;&#29992;&#20854;&#20182;&#20855;&#20307;&#35821;&#27861;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#29992;</p><blockquote class="SubFlow"><p><a name="(elem._lambda-2)"></a><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}exp} &amp;::= \mathit{Identifier} \\
&amp;::= <span class="stt">proc </span><span class="Iidentity">\mathit{Identifier}</span><span class="stt"> </span><span class="stt">=&gt;</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}exp}</span> \\
&amp;::= <span class="Iidentity">\mathit{Lc\mbox{-}exp}</span><span class="stt"> (</span><span class="Iidentity">\mathit{Lc\mbox{-}exp}</span><span class="stt">)</span>\end{align*}</span></p><p>&#25226; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#23450;&#20041;&#20026;&#21478;&#19968;&#20010;&#23383;&#31526;&#20018;&#38598;&#21512;&#12290;</p></blockquote><p>&#20026;&#20102;&#22788;&#29702;&#36825;&#26679;&#30340;&#25968;&#25454;&#65292;&#38656;&#35201;&#23558;&#20854;&#36716;&#25442;&#20026;<span class="emph">&#20869;&#22312;</span> (<span class="emph">internal</span>) &#34920;&#31034;&#12290;
<span class="stt">define-datatype</span> &#24418;&#24335;&#25552;&#20379;&#20102;&#19968;&#31181;&#31616;&#27905;&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;&#36825;&#26679;&#30340;&#20869;&#22312;&#34920;&#31034;&#12290;&#25105;&#20204;&#31216;&#20043;
&#20026;<span class="emph">&#25277;&#35937;&#35821;&#27861;</span> (<span class="emph">abstract syntax</span>)&#12290;&#22312;&#25277;&#35937;&#35821;&#27861;&#20013;&#65292;&#19981;&#38656;&#35201;&#23384;&#20648;&#25324;&#21495;&#20043;&#31867;&#30340;&#32456;&#27490;&#31526;&#65292;
&#22240;&#20026;&#23427;&#20204;&#19981;&#20256;&#36798;&#20449;&#24687;&#12290;&#21478;&#19968;&#26041;&#38754;&#65292;&#25105;&#20204;&#35201;&#30830;&#20445;&#25968;&#25454;&#32467;&#26500;&#36275;&#20197;&#21306;&#20998;&#23427;&#25152;&#34920;&#31034;&#30340; lambda &#28436;&#31639;&#34920;
&#36798;&#24335;&#65292;&#24182;&#25552;&#21462;&#20986;&#21508;&#37096;&#20998;&#12290;<span class="stt">lc-exp</span>&#30340;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#21161;&#25105;&#20204;&#36731;&#26494;&#23454;&#29616;&#36825;&#20123;&#12290;</p><p><a name="(idx._(gentag._310))"></a>
<a name="(idx._(gentag._311))"></a>
<a name="(idx._(gentag._312))"></a>
&#23558;&#20869;&#22312;&#34920;&#31034;&#24418;&#35937;&#21270;&#20026;<span class="emph">&#25277;&#35937;&#35821;&#27861;&#26641;</span> (<span class="emph">abstract syntax tree</span>) &#20063;&#24456;&#19981;&#38169;&#12290;
<span class="EoplFigureRef"></span> &#23637;&#31034;&#20102;&#19968;&#26869;&#25277;&#35937;&#35821;&#27861;&#26641;&#65292;&#23427;&#20195;&#34920;&#25968;&#25454;&#31867;&#22411; <span class="stt">lc-exp</span> &#34920;&#31034;&#30340;
lambda &#28436;&#31639;&#34920;&#36798;&#24335; <span class="stt">(lambda (x) (f (f x)))</span>&#12290;&#26641;&#30340;&#27599;&#20010;&#20869;&#37096;&#33410;&#28857;&#20197;&#30456;&#24212;&#30340;&#29983;&#25104;&#24335;&#21517;
&#23383;&#20026;&#26631;&#35782;&#12290;&#26641;&#26525;&#20197;&#25152;&#20986;&#29616;&#30340;&#38750;&#32456;&#32467;&#31526;&#21517;&#23383;&#20026;&#26631;&#35782;&#12290;&#21494;&#23376;&#23545;&#24212;&#32456;&#27490;&#31526;&#23383;&#31526;&#20018;&#12290;</p><p>&#35201;&#20026;&#26576;&#31181;&#20855;&#20307;&#35821;&#27861;&#35774;&#35745;&#25277;&#35937;&#35821;&#27861;&#65292;&#38656;&#35201;&#32473;&#20854;&#20013;&#30340;&#27599;&#20010;&#29983;&#25104;&#24335;&#65292;&#20197;&#21450;&#29983;&#25104;&#24335;&#20013;&#20986;&#29616;&#30340;&#27599;&#20010;&#38750;&#32456;
&#27490;&#31526;&#21629;&#21517;&#12290;&#24456;&#23481;&#26131;&#23558;&#25277;&#35937;&#35821;&#27861;&#20889;&#25104; <span class="stt">define-datatype</span> &#22768;&#26126;&#12290;&#25105;&#20204;&#20026;&#27599;&#20010;&#38750;&#32456;&#32467;&#31526;&#28155;&#21152;
&#19968;&#20010; <span class="stt">define-datatype</span>&#65292;&#20026;&#27599;&#20010;&#29983;&#25104;&#24335;&#28155;&#21152;&#19968;&#20010;&#21464;&#20307;&#12290;
<a name="(idx._(gentag._313))"></a>
<a name="(idx._(gentag._314))"></a></p><p><span class="EoplFigureRef"></span> &#20013;&#25361;&#20986;&#30340;&#20869;&#23481;&#21487;&#20197;&#31934;&#30830;&#34920;&#31034;&#22914;&#19979;&#65306;</p><p><a name="(elem._lc-grammar2)"></a><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp} &amp;::= \mathit{Identifier} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
&amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\mathit{Identifier}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">lambda-exp (bound-var body)</span>} \\[5pt]
&amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
&amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-exp (rator rand)</span>}\end{align*}</span></p><p>&#26412;&#20070;&#37319;&#29992;&#36825;&#31181;&#34920;&#31034;&#65292;&#21516;&#26102;&#25351;&#26126;&#20855;&#20307;&#35821;&#27861;&#21644;&#25277;&#35937;&#35821;&#27861;&#12290;
<a name="(idx._(gentag._315))"></a></p><p>&#20855;&#20307;&#35821;&#27861;&#20027;&#35201;&#20379;&#20154;&#20351;&#29992;&#65292;&#25277;&#35937;&#35821;&#27861;&#20027;&#35201;&#20379;&#35745;&#31639;&#26426;&#20351;&#29992;&#65292;&#26082;&#24050;&#21306;&#20998;&#20108;&#32773;&#65292;&#29616;&#22312;&#26469;&#30475;&#30475;&#22914;&#20309;&#23558;&#19968;
&#31181;&#35821;&#27861;&#36716;&#25442;&#20026;&#21478;&#19968;&#31181;&#12290;</p><p>&#24403;&#20855;&#20307;&#35821;&#27861;&#26159;&#20010;&#23383;&#31526;&#20018;&#38598;&#21512;&#65292;&#25512;&#23548;&#20986;&#23545;&#24212;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#21487;&#33021;&#30456;&#24403;&#26840;&#25163;&#12290;&#36825;&#19968;&#20219;&#21153;
&#21483;&#20570;<span class="emph">&#35299;&#26512;</span> (<span class="emph">parsing</span>)&#65292;&#30001;<span class="emph">&#35299;&#26512;&#22120;</span> (<span class="emph">parser</span>) &#23436;&#25104;&#12290;&#22240;&#20026;&#20889;&#35299;&#26512;&#22120;&#36890;&#24120;&#27604;&#36739;
&#40635;&#28902;&#65292;&#25152;&#20197;&#26368;&#22909;&#20511;&#30001;&#24037;&#20855;<span class="emph">&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;</span> (<span class="emph">parser generator</span>) &#23436;&#25104;&#12290;
<a name="(idx._(gentag._316))"></a>
<a name="(idx._(gentag._317))"></a>
&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#20197;&#19968;&#22871;&#35821;&#27861;&#20316;&#20026;&#36755;&#20837;&#65292;&#20135;&#29983;&#19968;&#20010;&#35299;&#26512;&#22120;&#12290;&#30001;&#20110;&#35821;&#27861;&#26159;&#30001;&#24037;&#20855;&#22788;&#29702;&#30340;&#65292;&#23427;&#20204;&#24517;&#38656;
&#20197;&#26576;&#31181;&#26426;&#22120;&#33021;&#22815;&#29702;&#35299;&#30340;&#35821;&#35328;&#20889;&#25104;&#65292;&#21363;&#20889;&#35821;&#27861;&#29992;&#30340;&#29305;&#23450;&#39046;&#22495;&#35821;&#35328;&#12290;&#26377;&#24456;&#22810;&#29616;&#25104;&#30340;&#35299;&#26512;&#22120;&#29983;&#25104;&#22120;&#12290;
<a name="(idx._(gentag._318))"></a></p><p><a name="(idx._(gentag._319))"></a>
&#22914;&#26524;&#20855;&#20307;&#35821;&#27861;&#20197;&#21015;&#34920;&#38598;&#21512;&#30340;&#24418;&#24335;&#32473;&#20986;&#65292;&#35299;&#26512;&#36807;&#31243;&#23601;&#20250;&#22823;&#22823;&#31616;&#21270;&#12290;&#27604;&#22914;&#65292;
&#21644;<span class="stt">define-datatype</span> <span class="stt">define-datatype</span> &#30340;&#35821;&#27861;&#31867;&#20284;&#65292;
<a href="#%28elem._lambda-2%29" data-pltdoc="x">&#26412;&#33410;&#24320;&#22836;</a>&#30340; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#25351;&#23450;&#20102;&#19968;&#20010;&#21015;&#34920;&#38598;&#21512;&#12290;&#36825;&#26679;&#65292;Scheme
&#36807;&#31243; <span class="stt">read</span> &#20250;&#33258;&#21160;&#25226;&#23383;&#31526;&#20018;&#35299;&#26512;&#20026;&#21015;&#34920;&#21644;&#31526;&#21495;&#12290;&#28982;&#21518;&#65292;&#25226;&#36825;&#20123;&#21015;&#34920;&#32467;&#26500;&#35299;&#26512;&#20026;&#25277;&#35937;&#35821;
&#27861;&#26641;&#23601;&#23481;&#26131;&#22810;&#20102;&#65292;&#23601;&#20687; <span class="stt">parse-expression</span> &#36825;&#26679;&#12290;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><a name="(idx._(gentag._320))"></a>
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">parse-expression</span></span> : <span class="texMathInline">\mathit{SchemeVal} \to \mathit{LcExp}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">parse-expression</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">datum</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">symbol?</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">pair?</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">eqv?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lambda</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">caddr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">parse-expression</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cadr</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">else</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">report-invalid-concrete-syntax</span><span class="hspace">&nbsp;</span><span class="RktSym">datum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._321))"></a></div></p></blockquote><p><a name="(idx._(gentag._322))"></a>
&#36890;&#24120;&#65292;&#24456;&#23481;&#26131;&#25226;&#25277;&#35937;&#35821;&#27861;&#26641;&#37325;&#26032;&#36716;&#25442;&#20026;&#21015;&#34920;-&#31526;&#21495;&#34920;&#31034;&#12290;&#25105;&#20204;&#36825;&#26679;&#20570;&#20102;&#65292;Scheme &#30340;&#25171;&#21360;&#36807;&#31243;
&#23601;&#20250;&#23558;&#20854;&#26174;&#31034;&#20026;&#21015;&#34920;&#24418;&#24335;&#30340;&#20855;&#20307;&#35821;&#27861;&#12290;&#36825;&#30001; <span class="stt">unparse-lc-exp</span> &#23436;&#25104;&#65306;</p><blockquote class="EoplCodeInset"><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span style="font-weight: bold"><span class="stt">unparse-lc-exp</span></span> : <span class="texMathInline">\mathit{LcExp} \to \mathit{SchemeVal}</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">unparse-lc-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">exp</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cases</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var-exp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bound-var</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lambda</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">bound-var</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">app-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">rator</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rator</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unparse-lc-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">rand</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._323))"></a>
<a name="(idx._(gentag._324))"></a>
<a name="(idx._(gentag._325))"></a>
<a name="(idx._(gentag._326))"></a></div></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..27)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._327))"></a>
&#30011;&#20986;&#19979;&#38754; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#25277;&#35937;&#35821;&#27861;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..28)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._328))"></a>
&#20889;&#20986;&#21453;&#21521;&#35299;&#26512;&#22120;&#65292;&#23558;lc-exp&#30340;&#25277;&#35937;&#35821;&#27861;&#36716;&#25442;&#20026;&#31526;&#21512;&#26412;&#33410;&#31532;&#20108;&#20010;&#35821;&#27861;
&#65288;<span class="stt">lc-grammar2</span>&#65289;&#30340;&#23383;&#31526;&#20018;&#12290;</p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..29)"></a><span class="texMathInline">\textnormal{[}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._329))"></a>
<a name="(idx._(gentag._330))"></a>
<a name="(idx._(gentag._331))"></a>
&#24403;&#20855;&#20307;&#35821;&#27861;&#20351;&#29992;&#20811;&#33713;&#23612;&#26143;&#21495;&#25110;&#21152;&#21495;&#65288;<span class="stt">kleene-star</span>&#65289;&#26102;&#65292;&#29983;&#25104;&#25277;&#35937;&#35821;&#27861;&#26641;&#26102;&#26368;&#22909;
&#20351;&#29992;&#30456;&#24212;&#23376;&#26641;&#30340;<span class="emph">&#21015;&#34920;</span>&#12290;&#20363;&#22914;&#65292;&#22914;&#26524; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#20026;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{Lc\mbox{-}Exp} &amp;::= \mathit{Identifier} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">var-exp (var)</span>} \\[5pt]
                       &amp;::= \normalfont{<span class="stt">(lambda (</span><span class="Iidentity">\{\mathit{Identifier}\}^{*}</span><span class="stt">) </span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt">)</span>} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">lambda-exp (bound-vars body)</span>} \\[5pt]
                       &amp;::= \normalfont{<span class="stt">(</span><span class="Iidentity">\mathit{Lc\mbox{-}Exp}</span><span class="stt"> </span><span class="Iidentity">\{\mathit{Lc\mbox{-}Exp}\}^{*}</span><span class="stt">)</span>} \\[-3pt]
                       &amp;\mathrel{\phantom{::=}} \fbox{<span class="stt">app-exp (rator rands)</span>}\end{align*}</span></p><p>&#37027;&#20040;&#23383;&#27573; <span class="stt">bound-vars</span> &#30340;&#35859;&#35789;&#21487;&#20889;&#20316; <span class="stt">(list-of identifier?)</span>&#65292;<span class="stt">rands</span> &#30340;
&#35859;&#35789;&#21487;&#20889;&#20316; <span class="stt">(list-of lc-exp?)</span>&#12290;&#20197;&#36825;&#31181;&#26041;&#24335;&#20889;&#20986;&#35813;&#35821;&#27861;&#30340; <span class="stt">define-datatype</span>
&#21644;&#35299;&#26512;&#22120;&#12290;
<a name="(idx._(gentag._332))"></a>
<a name="(idx._(gentag._333))"></a></p></blockquote></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..30)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span>&#19978;&#38754;&#23450;&#20041;&#30340;&#36807;&#31243; <span class="stt">parse-expression</span> &#24456;&#19981;&#21487;&#38752;&#65306;&#23427;&#26816;&#26597;&#19981;&#21040;&#26576;&#20123;&#21487;&#33021;&#30340;&#35821;&#27861;&#38169;&#35823;&#65292;&#20363;
&#22914; <span class="stt">(a b c)</span>&#65292;&#24182;&#19988;&#22240;&#20854;&#20182;&#34920;&#36798;&#24335;&#32456;&#27490;&#26102;&#32473;&#19981;&#20986;&#24688;&#24403;&#30340;&#38169;&#35823;&#20449;&#24687;&#65292;&#22914; <span class="stt">(lambda)</span>&#12290;
&#20462;&#25913;&#19968;&#19979;&#65292;&#20351;&#20043;&#26356;&#20581;&#22766;&#65292;&#21487;&#25509;&#21463;&#20219;&#20309;s-exp&#65292;&#24182;&#19988;&#23545;&#19981;&#34920;&#31034; lambda &#28436;&#31639;&#34920;&#36798;&#24335;&#30340; s-exp &#32473;
&#20986;&#24688;&#24403;&#30340;&#38169;&#35823;&#20449;&#24687;&#12290;
<a name="(idx._(gentag._334))"></a>
<a name="(idx._(gentag._335))"></a></p></blockquote><blockquote class="EoplExercise"><p><a name="(elem._ex2..31)"></a><span class="texMathInline">\textnormal{[}{\star}{\star}\textnormal{]}</span><span class="hspace">&nbsp;</span><a name="(idx._(gentag._336))"></a>
&#26377;&#26102;&#65292;&#25226;&#20855;&#20307;&#35821;&#27861;&#23450;&#20041;&#20026;&#25324;&#21495;&#21253;&#22260;&#30340;&#31526;&#21495;&#21644;&#25972;&#25968;&#24207;&#21015;&#24456;&#26377;&#29992;&#12290;&#20363;&#22914;&#65292;&#21487;&#20197;&#25226;
&#38598;&#21512;<span class="emph">&#21069;&#32512;&#21015;&#34920;</span> (<span class="emph">prefix list</span>) &#23450;&#20041;&#20026;&#65306;</p><blockquote class="SubFlow"><p><span class="Iidentity">\begin{align*}\mathit{Prefix\mbox{-}list} &amp;::= <span class="stt">(</span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span><span class="stt">)</span> \\
\mathit{Prefix\mbox{-}exp}  &amp;::= \mathit{Int} \\
                            &amp;::= <span class="stt">- </span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span><span class="stt"> </span><span class="Iidentity">\mathit{Prefix\mbox{-}exp}</span>\end{align*}</span></p><p>&#37027;&#20040; <span class="stt">(- - 3 2 - 4 - 12 7)</span>&#26159;&#19968;&#20010;&#21512;&#27861;&#30340;&#21069;&#32512;&#21015;&#34920;&#12290;&#26377;&#26102;&#20026;&#32426;&#24565;&#20854;&#21457;&#26126;&#32773;Jan
&#321;ukasiewicz&#65292;&#31216;&#20043;&#20026;<span class="emph">&#27874;&#20848;&#21069;&#32512;&#34920;&#31034;&#27861;</span> (<span class="emph">Polish prefix notation</span>)&#12290;&#20889;&#19968;&#20010;
&#35299;&#26512;&#22120;&#65292;&#23558;&#21069;&#32512;&#21015;&#34920;&#34920;&#31034;&#27861;&#36716;&#25442;&#20026;&#25277;&#35937;&#35821;&#27861;&#65306;
<a name="(idx._(gentag._337))"></a>
<a name="(idx._(gentag._338))"></a></p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define-datatype</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">integer?</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">operand1</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">operand2</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix-exp?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#20351;&#19978;&#20363;&#19982;&#36825;&#20960;&#20010;&#26500;&#36896;&#22120;&#29983;&#25104;&#30456;&#21516;&#25277;&#35937;&#35821;&#27861;&#26641;&#65306;</p><blockquote class="EoplCodeInset"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">diff-exp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">const-exp</span><span class="hspace">&nbsp;</span><span class="RktVal">7</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></blockquote><p>&#25552;&#31034;&#65306;&#24819;&#24819;&#22914;&#20309;&#20889;&#19968;&#20010;&#36807;&#31243;&#65292;&#21462;&#19968;&#21015;&#34920;&#65292;&#20135;&#29983;&#19968;&#20010; <span class="stt">prefix-exp</span> &#21644;&#21015;&#34920;&#21097;&#20313;&#20803;&#32032;&#32452;&#25104;
&#30340;&#21015;&#34920;&#12290;
<a name="(idx._(gentag._339))"></a></p></blockquote></blockquote><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="isd.html" title="backward to &quot;1 归纳式数据集&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;编程语言要素&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="expr.html" title="forward to &quot;3 表达式&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>